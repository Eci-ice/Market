(function(){"use strict";var e={6368:function(e,t,s){var r=s(9242),o=s(3396);const i={id:"app"};function n(e,t){const s=(0,o.up)("router-view");return(0,o.wg)(),(0,o.iD)("div",i,[(0,o.Wm)(s)])}var a=s(89);const l={},d=(0,a.Z)(l,[["render",n]]);var c=d,u=s(2483),h=s(7139),g="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGwAAAA0CAMAAABYZS1lAAABZVBMVEUAAABpOhBpOhBpORBpOxFmMxppOA9pOQ9pOhBoORBpOhBrOA5mQA1qOBMAAABpOhBsNg+AQABpOg9qOg9VKgBsOxRpOhFqQBVpORBpOhBjOQ5qOhBwQBBpOhBpORBpOhBpOhFpOhBpOg9mMxFpOhBpOhBpORFmPRRpORBpOxBoORBoORBpOhBpOhBpOhBpOxCAAABnOw9pOxBpOhBqOhBpOBFpOQ5xORxoOg5nNw5qOhBgQABoOBBiOxRoOhFpOhFpOhBqOhFrOQ9pOQ9oOhFoOg9oOQ9mOg9oOgxrPA1oOhBqOg9pOhBmMwBrNg1tPQxtSQBpOhBoORFtNxJpOhBpOw1pNxFqPhJpOg9nOw9pOxBoOg9pOxFpOQ9qORBrOxJqOg5pOQ9pORFqOxFqOw9pOhBpOhBpOxBpPA9oOhBoPBBkNwtqOQ5pOhBoOhBqNQtrOhBqOhBpPA9pOw5pOxFrOA9nOhLrquJsAAAAd3RSTlMA/8mBegpEpfJi4DcUKQH6IQTWVAYaiAw/1BK6EJ/evUvuVA+u9moZs4xRj8Bh5aECRcQwkTtICVglywggDZpbg3tD5yyVeCMWJl11bQUTFQfiTA7ZJy4dpzS4xj2Xbys1hsiYV3Hc0RFzQBckzqQYH4AiOKoyOcXKcFQAAAL6SURBVHic7Zf3Q9pAFMd5DMWIiWmNDEVA9nJVrXsCMuqqtlqtdVW79/j7e5dAkjtCSCj9qfn+lFy+yYe7e+/dw2bJkiVLloxosOf90T/7OP+iR9Yguu8Dd3/9kWtcYGWf4HRo6ZEpmKsXZDlJWJiD4nLDN8AoPpUemoWN2bGWIhSsHIKJOdmHYJJPpbEOYJghX8gw3gHg4NUwyadSX9dgWxHIJRVf92Afz1InFOzyGJiXKl/3YAPMg0ES9swOXEKJRWOwqfGQveQyDUMsmPWqfQh2qiSJpDQFm+dQfG6YhV35aZah0B/GIyOjpmC/1yMAwTLpMwJz4pGzqLmZJUfgYk9nNVqpghZk+7V6p40sY3n9cQcsmy06vf5Vh0XCVj2eJxCf9ygKKGndBREwcYcJiXlQo+sUqY3dbsKahwmtDXUEE5fRPe1ZvIHPgrSO+EMZ6Ti5jYP/WuOYyZuDXR6SAcLPwiehyYoKRtrwd1vDfEBVkCqAj3Z6Y+B++lesBuzNCgFDKTxMO59PgH2lC7AqKjIEDN3ceCjnK4BQmC6P++ZhTuh1kVV/AaBKGgMhjUDkMqZhQ2uwwZMwYQlSq4RRLOmamWFcQ3lHZv+cG8dtVkGBsZsAZDQsN9WhwAyKK1MwLB/H9PTWe5vGSb1zDKGA/muVe/o8YUcDU21YfBpiMfDvEDC2BFDSK6qoS6GLx9sgwH2bTvLXhDuTzMGIOJHGMu4KMxD5ofseCs8EMZDA2zgpt5pa8k7Cz6itwEAWV3gRFs0vOXGPWp+ttlBEubeIkbYnNe4PcRvF5jkUJWJN+hZDgTcsNo7+SusXUZKfnxAjKF/QEa/T8fAJjqvhKbmCqIzY+KIY0vHgHIunDNvTrfYNP70mS6U3y0FqsTXrwwVwm9KxXGBy/Qd3OJsOa1/Ekb1TYHw0jM9KbTjqvZmmYHCN6sVUMhd/dyBdsmEBpxeXCss9wVF6ofllXyO7ddsNTS2SP33g9qpdpuA/T0X7TPbuu1mWJUv/pf4AcFVSLx3KbYcAAAAASUVORK5CYII=",p="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGwAAAA0CAMAAABYZS1lAAABblBMVEUAAABpOhBpOA9mQA1pOhBqOBNpOhBpOxFqOg9wQBBVKgBoOhFqOhBpOhFpORCAQACAAABpOhBtSQAAAABpOhBpORFoORBjOQ5mMxpsNg9pOhBiOxRpORBpOhBrOQ9pOhBpOhBpOg9qQBVrOxJmMxFoOhBoOhBoORBnOw9oOQ5qOxBpOhBoOhBpOg9pOhFmOg9oOhBpOxBpOhBrOA5pOg9qPhJqOw1oOg5pOQ9qOhBoOBBpORFpOg9kNwtoOhFpOhFtNxJoOhBpOhBqORBpOhBsOxRpOQ9pOhBqORFpNxFoOg9oOxFqOhBpOhBpOhBpOhBpOhBpOhBVVQBpOhBpOQ9qORBoOg9mPRRoOgxpORBpOxFmOQ1nOw9nOhJpOg9tPQxpOQ9qOhFqOQ5pOxFoPBBqOhBrOhBqOg9pPA9nNw5pORBqOxFqOw9pOxFpOw9pOhBpOhBqOxBoOBFgQABqOxFdLhdpPA9oORNpOw5qORCsklCSAAAAenRSTlMA/0QU4CnJelQQBpq6iD8EAvoHAe7IYhIKIfINgb9D2YPWDCsPsH9RNEeuzpGnuSPSocI39x0nWOicIEx1FyxpDlzsb7QapWFZLsVKy3Kf243iA+VVMVMZFq2LKEU5lhV4eySqQDAfZCIlbDxXebaT1HE7CJgLERs4XuY8DycAAAN4SURBVHic7ZZnVxpBFIb3uggCIruwkV6UIkURFcUWu7H3aIwaeyyJLT3597mz7LKzgOsSo+fkhPfTbJl5Zube+84wNdVUU03/ppzmxJzzuWCtb6HF81wwZhJgvOwl52IVWVSf1tcfAevxglU9HIp9AYoaVE8AjeYqhq83qPqWquEhWMr3d2FkGw9u4W6TbKPb8bGuqK1QhY3QhsWSha7JBWUYUTsFGJEvVmkN2Dlsrw4mTc45M2H6pvrWrMA8LcqwlmKaRNbAVAWLgg1mAPpnOdK0X6++VMOCwL+WuzQB3ya3IE+NxW0FjIduXTCGO+0G6O4ja+Qhc6aCmWBjTlmwt6fQaihiRSV5jHJYBwzj7mEcSzkQ9rhzHozIpGAYsoxL7nIOQqIUK8qmpxaa4y6S32T7E8ZYbxxZEWZ3lgq9KhNsRZuxQaiTGsdEYDdRTVZvGk6iEoxhN2MAmUtuPAc2B5Uq3qDctt/CfK/YslghO0gN1HeHUb/SNFe7H4SgvDJuwQD8wDTDjC0DfJVp6JnGiOxW7lfyViktSdG98TNtIw8K0O6WYBcpnNsHZExzrV0AtxJtboMqcte8nFLYZ0BZvR5FQpDeFTuaoqYcwNR78taWvSK0Q3Ge9lXaUX6kYacAo4tPl94EQMjjkAibEABWZsWp4gZZLfipUFzE0gKdLPtujcDwqaPgMM39YiuhF2juAH4Yf3aOhHDeQpjUMmp6kWwqLlr4iQtrlzIaMQjDSlZLv/E7ZjBE0V9YzrisUckUk1bwDuHH5ER4TAwqDWsz0krnqoqbq22KVH6JUix+sh+je3FxEAwUTK3tRf3GPxgn2wd8IG9e2Ffme7Mk7SdRvaF9/14YvjvSe20hKQfZ6wut/x3+Y9u9MDzbh3WyGGYkNekRnV4UBr/imXE/DHuUvdOS3cXK5yIFO6hDZy6HjZ3Sx+uIysj0iDplKJhqkQpMfY2wWkzFI+DpYT4rfdN0ml1KSB4B6y46iErmRqqmv6N5r4hu90gYdduihfaolNko+aPry5PBmngq8/Wc1AgLDBWy6xPIJkuaNIwYMbk2qrs6j+hkzBPYstaNR+OeWpog5UKrlk5totZVHqYuNVl/CBvNGo2LaNFx+oBxmx+yLizqChqiYT62LKelKZ5sPzC6LvX5/fSdsEy+Sb/fv/S5umtBTTX9h/oNtfte1rPZY7oAAAAASUVORK5CYII=";const m=e=>((0,o.dD)("data-v-592f61a3"),e=e(),(0,o.Cn)(),e),_=m((()=>(0,o._)("ul",{class:"daohang"},[(0,o._)("li",null,[(0,o._)("h2",null,'"喵咪美食坊"欢迎您!')]),(0,o._)("div",{class:"cat-background"})],-1))),w={key:0,class:"login"},v={class:"input"},y=m((()=>(0,o._)("img",{src:g,alt:"账号",style:{height:"25px","vertical-align":"middle"}},null,-1))),b={class:"input"},k=m((()=>(0,o._)("img",{src:p,alt:"密码",style:{height:"25px","vertical-align":"middle"}},null,-1))),f={class:"image-buttons"},P=m((()=>(0,o._)("button",{class:"butt-1",type:"submit"},"登录",-1))),x={key:1,class:"else"},A={id:"b"},C={key:0,class:"error"};function U(e,t,s,i,n,a){const l=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)(o.HY,null,[_,a.isLoggedIn?((0,o.wg)(),(0,o.iD)("div",x,[(0,o.Uk)(" 您已登录，无需再登录!!! "),(0,o.Wm)(l,{to:a.adminRoute},{default:(0,o.w5)((()=>[(0,o.Uk)("返回")])),_:1},8,["to"])])):((0,o.wg)(),(0,o.iD)("div",w,[(0,o._)("form",{onSubmit:t[2]||(t[2]=(0,r.iM)(((...e)=>a.handleLogin&&a.handleLogin(...e)),["prevent"]))},[(0,o._)("div",v,[y,(0,o.wy)((0,o._)("input",{type:"text",name:"username",placeholder:"账号","onUpdate:modelValue":t[0]||(t[0]=e=>n.credentials.username=e)},null,512),[[r.nr,n.credentials.username]])]),(0,o._)("div",b,[k,(0,o.wy)((0,o._)("input",{type:"password",name:"password",placeholder:"密码","onUpdate:modelValue":t[1]||(t[1]=e=>n.credentials.password=e)},null,512),[[r.nr,n.credentials.password]])]),(0,o.Wm)(l,{to:"/forgot-password",class:"forgot-password"},{default:(0,o.w5)((()=>[(0,o.Uk)("忘记密码?")])),_:1}),(0,o._)("div",f,[P,(0,o.Wm)(l,{to:"/register",class:"butt-1"},{default:(0,o.w5)((()=>[(0,o.Uk)("注册")])),_:1}),(0,o.Wm)(l,{to:"/buyer",class:"butt-1"},{default:(0,o.w5)((()=>[(0,o.Uk)("游客访问")])),_:1})])],32)])),(0,o._)("div",A,[n.error?((0,o.wg)(),(0,o.iD)("div",C,(0,h.zw)(n.error),1)):(0,o.kq)("",!0)])],64)}s(560);var D=s(1076);D.Z.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded";var S={data(){return{credentials:{username:"",password:""},error:"",mockAdminData:null,currentUser:null}},created(){this.fetchUsrFromSession()},computed:{isLoggedIn(){return!!this.currentUser},isSeller(){return this.currentUser&&1===this.currentUser.power},isBuyer(){return this.currentUser&&0===this.currentUser.power},adminRoute(){return this.isSeller?"/seller":"/buyer"}},methods:{async fetchUsrFromSession(){try{const e=await D.Z.get("/now-usr"),t=e.data;return this.currentUser=t,!0}catch(e){return console.error("获取用户数据错误:",e),!1}},async handleLogin(){try{const e={username:this.credentials.username,password:this.credentials.password},t=await fetch("/usr/login-control",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}),s=await t.json();"/error"===s.page?this.$router.push({path:"/error",query:{err:s.msg,to:s.data}}):"/success"===s.page?this.$router.push({path:"/success",query:{message:s.msg,to:s.data}}):null===s.page?console.log("未知页面类型"):this.$router.push({path:s.page})}catch(e){console.error("登录错误:",e),this.error="登录失败"}},async handleLogout(){try{await D.Z.get("/logout-control"),this.$router.push("/")}catch(e){console.error("登出失败:",e)}}}};const I=(0,a.Z)(S,[["render",U],["__scopeId","data-v-592f61a3"]]);var O=I;const F=e=>((0,o.dD)("data-v-c3f5bf04"),e=e(),(0,o.Cn)(),e),T={class:"daohang"},M={class:"title-container"},B=F((()=>(0,o._)("h2",{class:"registration-title"},"请您注册！",-1))),z={class:"login",style:{top:"53%"}},q={key:0},N={key:1},L={class:"input"},V=F((()=>(0,o._)("label",{for:"newusername",style:{top:"-30px","font-size":"20px","font-weight":"bold"}},"用户名",-1))),Z={class:"input"},Q=F((()=>(0,o._)("label",{for:"newpwd",style:{top:"-30px","font-size":"20px","font-weight":"bold"}},"密码",-1))),G={class:"input"},R=F((()=>(0,o._)("label",{for:"newquestion",style:{top:"-30px","font-size":"20px","font-weight":"bold"}},"设置密保问题",-1))),K={class:"input"},E=F((()=>(0,o._)("label",{for:"newanswer",style:{top:"-30px","font-size":"20px","font-weight":"bold"}},"设置答案",-1))),$={class:"input"},H=F((()=>(0,o._)("label",null,"我是：",-1))),Y={key:0,class:"input"},j=F((()=>(0,o._)("label",{for:"newaddress",style:{top:"-30px","font-size":"20px","font-weight":"bold"}},"默认收货地址",-1))),W={key:1,class:"input"},J=F((()=>(0,o._)("label",{for:"newphone",style:{top:"-30px","font-size":"20px","font-weight":"bold"}},"联系电话",-1))),X={class:"image-buttons",style:{"margin-bottom":"25px"}},ee=["src"];function te(e,t,i,n,a,l){const d=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("ul",T,[(0,o._)("div",M,[B,(0,o.Wm)(d,{to:"/"},{default:(0,o.w5)((()=>[(0,o.Uk)("返回初始页面")])),_:1})])]),(0,o._)("div",z,[a.isSeller?((0,o.wg)(),(0,o.iD)("h2",q,"请您注册卖家账户！")):((0,o.wg)(),(0,o.iD)("h2",N,"请您注册买家账户！")),(0,o._)("form",{onSubmit:t[11]||(t[11]=(0,r.iM)(((...e)=>l.handleRegister&&l.handleRegister(...e)),["prevent"]))},[(0,o.wy)((0,o._)("input",{type:"hidden","onUpdate:modelValue":t[0]||(t[0]=e=>a.form.userType=e)},null,512),[[r.nr,a.form.userType]]),(0,o._)("div",L,[V,(0,o.wy)((0,o._)("input",{id:"newusername",type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>a.form.username=e),required:""},null,512),[[r.nr,a.form.username]])]),(0,o._)("div",Z,[Q,(0,o.wy)((0,o._)("input",{id:"newpwd",type:"password","onUpdate:modelValue":t[2]||(t[2]=e=>a.form.password=e),required:""},null,512),[[r.nr,a.form.password]])]),(0,o._)("div",G,[R,(0,o.wy)((0,o._)("input",{id:"newquestion",type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>a.form.question=e),required:""},null,512),[[r.nr,a.form.question]])]),(0,o._)("div",K,[E,(0,o.wy)((0,o._)("input",{id:"newanswer",type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>a.form.answer=e),required:""},null,512),[[r.nr,a.form.answer]])]),(0,o._)("div",$,[H,(0,o._)("div",null,[(0,o.wy)((0,o._)("input",{type:"radio",id:"buyer",value:"0","onUpdate:modelValue":t[5]||(t[5]=e=>a.form.userType=e),onChange:t[6]||(t[6]=e=>l.updateUserType("0"))},null,544),[[r.G2,a.form.userType]]),(0,o.Uk)(" 买家 "),(0,o.wy)((0,o._)("input",{type:"radio",id:"seller",value:"1","onUpdate:modelValue":t[7]||(t[7]=e=>a.form.userType=e),onChange:t[8]||(t[8]=e=>l.updateUserType("1")),required:""},null,544),[[r.G2,a.form.userType]]),(0,o.Uk)(" 卖家 ")])]),a.isSeller?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",Y,[j,(0,o.wy)((0,o._)("input",{id:"newaddress",type:"text","onUpdate:modelValue":t[9]||(t[9]=e=>a.form.address=e),required:""},null,512),[[r.nr,a.form.address]])])),a.isSeller?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",W,[J,(0,o.wy)((0,o._)("input",{id:"newphone",type:"text","onUpdate:modelValue":t[10]||(t[10]=e=>a.form.phone=e),required:""},null,512),[[r.nr,a.form.phone]])])),(0,o._)("div",X,[(0,o._)("input",{class:"input-image-button",type:"image",src:s(6129),alt:"登录",title:"登录",name:"action",value:"登录"},null,8,ee)])],32)])])}D.Z.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded";var se={data(){return{isSeller:!0,form:{power:"1",username:"user",phone:"1234567890",address:"测试地址",password:"user",question:"我的生日？",answer:"1月1日"}}},methods:{async handleRegister(){try{const e={username:this.form.username,password:this.form.password,question:this.form.question,answer:this.form.answer,power:this.form.userType,address:this.form.address,phone:this.form.phone},t=await fetch("/usr/register-control",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}),s=await t.json();"success"!==s.msg?alert(s.msg):(console.log("success"),console.log(s.msg),alert("Register Success!"),this.$router.push("/"))}catch(e){alert("Register fail!")}},updateUserType(e){this.isSeller="1"===e,this.form.userType=e}},created(){this.isSeller="1"===this.$route.query.registeruser}};const re=(0,a.Z)(se,[["render",te],["__scopeId","data-v-c3f5bf04"]]);var oe=re;const ie=e=>((0,o.dD)("data-v-6b32fe48"),e=e(),(0,o.Cn)(),e),ne=ie((()=>(0,o._)("ul",{class:"daohang"},[(0,o._)("div",{class:"cat-background"})],-1))),ae={class:"title-container",style:{"margin-bottom":"10000px"}},le=ie((()=>(0,o._)("h2",{style:{"margin-left":"690px"}},"请您注册！",-1))),de={class:"login"},ce=ie((()=>(0,o._)("button",{class:"butt-1"},"我是买家",-1))),ue=ie((()=>(0,o._)("button",{class:"butt-1"},"我是卖家",-1))),he={key:0,class:"error"};function ge(e,t,s,r,i,n){const a=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("div",null,[ne,(0,o._)("div",ae,[le,(0,o.Wm)(a,{to:"/"},{default:(0,o.w5)((()=>[(0,o.Uk)("返回初始页面")])),_:1})]),(0,o._)("div",de,[(0,o.Wm)(a,{to:{path:"/register",query:{registeruser:"0"}}},{default:(0,o.w5)((()=>[ce])),_:1}),(0,o.Wm)(a,{to:{path:"/register",query:{registeruser:"1"}}},{default:(0,o.w5)((()=>[ue])),_:1})]),i.error?((0,o.wg)(),(0,o.iD)("div",he,(0,h.zw)(i.error),1)):(0,o.kq)("",!0)])}var pe={data(){return{error:""}}};const me=(0,a.Z)(pe,[["render",ge],["__scopeId","data-v-6b32fe48"]]);var _e=me,we=s.p+"img/head.png";const ve=e=>((0,o.dD)("data-v-1e946385"),e=e(),(0,o.Cn)(),e),ye={style:{margin:"0px"}},be={key:0},ke={class:"left"},fe={class:"daohang"},Pe=ve((()=>(0,o._)("img",{class:"head1",src:we,alt:""},null,-1))),xe={class:"head2"},Ae={class:"head4"},Ce={class:"head4"},Ue={class:"head4"},De={class:"head4"},Se={class:"head5"},Ie={class:"right"},Oe=ve((()=>(0,o._)("div",{class:"centered-container"},[(0,o._)("h2",null,"欢迎来到猫咪美食坊！")],-1))),Fe={class:"centered-container"},Te=ve((()=>(0,o._)("option",{value:"猫咪主粮"},"猫咪主粮",-1))),Me=ve((()=>(0,o._)("option",{value:"猫咪零食"},"猫咪零食",-1))),Be=ve((()=>(0,o._)("option",{value:"猫咪日用"},"猫咪日用",-1))),ze=[Te,Me,Be],qe=ve((()=>(0,o._)("br",null,null,-1))),Ne=ve((()=>(0,o._)("br",null,null,-1))),Le=ve((()=>(0,o._)("input",{type:"submit",value:"搜索",style:{width:"130px",cursor:"pointer"}},null,-1))),Ve=ve((()=>(0,o._)("div",{id:"search_list"},null,-1))),Ze=ve((()=>(0,o._)("br",null,null,-1))),Qe={class:"goods"},Ge=["onClick"],Re={class:"media-container"},Ke=["src"],Ee=["src"],$e={class:"media-navigation"},He=["onClick"],Ye=["onClick"],je=["onClick"],We=ve((()=>(0,o._)("br",null,null,-1))),Je={class:"pagination"},Xe=["disabled"],et={id:"page-info"},tt=["disabled"],st={key:1},rt={class:"else"},ot={class:"left"},it={class:"daohang"},nt=ve((()=>(0,o._)("img",{class:"head1",src:we,alt:""},null,-1))),at=ve((()=>(0,o._)("tr",null,[(0,o._)("td",{class:"head2"},"游客")],-1))),lt=ve((()=>(0,o._)("tr",null,[(0,o._)("td",{class:"head4"},[(0,o._)("h3",{class:"head4-1"},"其他功能后登录使用")])],-1))),dt={class:"head5"},ct={class:"right"},ut=ve((()=>(0,o._)("div",{class:"centered-container"},[(0,o._)("h2",null,"欢迎来到猫咪美食坊！")],-1))),ht={class:"centered-container"},gt=ve((()=>(0,o._)("option",{value:"猫咪主粮"},"猫咪主粮",-1))),pt=ve((()=>(0,o._)("option",{value:"猫咪零食"},"猫咪零食",-1))),mt=ve((()=>(0,o._)("option",{value:"猫咪日用"},"猫咪日用",-1))),_t=[gt,pt,mt],wt=ve((()=>(0,o._)("br",null,null,-1))),vt=ve((()=>(0,o._)("br",null,null,-1))),yt=ve((()=>(0,o._)("input",{type:"submit",value:"搜索",style:{width:"130px",cursor:"pointer"}},null,-1))),bt=ve((()=>(0,o._)("div",{id:"search_list"},null,-1))),kt=ve((()=>(0,o._)("br",null,null,-1))),ft={class:"goods"},Pt=["onClick"],xt={class:"media-container"},At=["src"],Ct=["src"],Ut={class:"media-navigation"},Dt=["onClick"],St=["onClick"],It=["onClick"],Ot=ve((()=>(0,o._)("br",null,null,-1))),Ft={class:"pagination"},Tt=["disabled"],Mt={id:"page-info"},Bt=["disabled"];function zt(e,t,s,i,n,a){return(0,o.wg)(),(0,o.iD)("body",ye,[a.isLoggedIn?((0,o.wg)(),(0,o.iD)("div",be,[(0,o._)("div",ke,[(0,o._)("table",fe,[Pe,(0,o._)("tr",null,[(0,o._)("td",xe,(0,h.zw)(a.getUsername),1)]),(0,o._)("tr",null,[(0,o._)("td",Ae,[(0,o._)("h3",{onClick:t[0]||(t[0]=e=>a.navigateTo("BuyerCart")),class:"head4-1",style:{cursor:"pointer"}},"我的购物车")])]),(0,o._)("tr",null,[(0,o._)("td",Ce,[(0,o._)("h3",{onClick:t[1]||(t[1]=e=>a.navigateTo("BuyerLikes")),class:"head4-1",style:{cursor:"pointer"}},"我的收藏")])]),(0,o._)("tr",null,[(0,o._)("td",Ue,[(0,o._)("h3",{onClick:t[2]||(t[2]=e=>a.navigateTo("bu                        yerHistory")),class:"head4-1",style:{cursor:"pointer"}},"历史购买记录")])]),(0,o._)("tr",null,[(0,o._)("td",De,[(0,o._)("h3",{onClick:t[3]||(t[3]=e=>a.navigateTo("BuyerShowRecommend")),class:"head4-1",style:{cursor:"pointer"}},"展示推荐商品")])]),(0,o._)("tr",null,[(0,o._)("td",Se,[(0,o._)("button",{onClick:t[4]||(t[4]=(...e)=>a.handleLogout&&a.handleLogout(...e)),class:"head5-1",style:{cursor:"pointer"}},"退出登录")])])])]),(0,o._)("div",Ie,[Oe,(0,o._)("div",Fe,[(0,o._)("form",{onSubmit:t[7]||(t[7]=(0,r.iM)(((...e)=>a.handleSearch&&a.handleSearch(...e)),["prevent"]))},[(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=e=>n.searchQuery=e),class:"custom-input",placeholder:"搜索商品"},null,512),[[r.nr,n.searchQuery]]),(0,o.Uk)("    "),(0,o.wy)((0,o._)("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>n.selectedCategory=e)},ze,512),[[r.bM,n.selectedCategory]]),qe,Ne,(0,o.Uk)("    "),Le],32),Ve]),Ze,(0,o._)("div",Qe,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.paginatedItems,(e=>((0,o.wg)(),(0,o.iD)("div",{class:"show-1",key:e.goodid},[(0,o._)("div",{onClick:t=>a.postToBuyerShop(e.goodid)},[(0,o._)("div",Re,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.mediaFiles,((e,t)=>(0,o.wy)(((0,o.wg)(),(0,o.iD)("div",{key:t},[a.isVideo(e)?(0,o.wy)(((0,o.wg)(),(0,o.iD)("video",{key:1,src:e.url,controls:""},null,8,Ee)),[[r.F8,e.isActive]]):(0,o.wy)(((0,o.wg)(),(0,o.iD)("img",{key:0,src:e.url,alt:"商品图片"},null,8,Ke)),[[r.F8,e.isActive]])])),[[r.F8,e.isActive]]))),128))])],8,Ge),(0,o._)("div",$e,[(0,o._)("button",{onClick:t=>a.showPrevMedia(e)},"＜",8,He),(0,o.Uk)("         "),(0,o._)("button",{onClick:t=>a.showNextMedia(e)},"＞",8,Ye)]),(0,o._)("div",{onClick:t=>a.postToBuyerShop(e.goodid)},[(0,o._)("p",null,[(0,o.Uk)("商品名："+(0,h.zw)(e.goodname),1),We,(0,o.Uk)("超值价："+(0,h.zw)(e.price)+"元",1)])],8,je)])))),128))]),(0,o._)("div",Je,[(0,o._)("button",{onClick:t[8]||(t[8]=(...e)=>a.goToPrevPage&&a.goToPrevPage(...e)),class:"prev",disabled:1===n.currentPage},"上一页",8,Xe),(0,o._)("span",et,"第 "+(0,h.zw)(n.currentPage)+" / "+(0,h.zw)(a.totalPages)+" 页",1),(0,o._)("button",{onClick:t[9]||(t[9]=(...e)=>a.goToNextPage&&a.goToNextPage(...e)),class:"next",disabled:n.currentPage===a.totalPages},"下一页",8,tt)])])])):((0,o.wg)(),(0,o.iD)("div",st,[(0,o._)("div",rt,[(0,o._)("div",ot,[(0,o._)("table",it,[nt,at,lt,(0,o._)("tr",null,[(0,o._)("td",dt,[(0,o._)("button",{onClick:t[10]||(t[10]=(...e)=>a.handleLogout&&a.handleLogout(...e)),class:"head5-1",style:{cursor:"pointer"}},"返回登录")])])])]),(0,o._)("div",ct,[ut,(0,o._)("div",ht,[(0,o._)("form",{onSubmit:t[13]||(t[13]=(0,r.iM)(((...e)=>a.handleSearch&&a.handleSearch(...e)),["prevent"]))},[(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":t[11]||(t[11]=e=>n.searchQuery=e),class:"custom-input",placeholder:"搜索商品"},null,512),[[r.nr,n.searchQuery]]),(0,o.Uk)("    "),(0,o.wy)((0,o._)("select",{"onUpdate:modelValue":t[12]||(t[12]=e=>n.selectedCategory=e)},_t,512),[[r.bM,n.selectedCategory]]),wt,vt,(0,o.Uk)("    "),yt],32),bt]),kt,(0,o._)("div",ft,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.paginatedItems,(e=>((0,o.wg)(),(0,o.iD)("div",{class:"show-1",key:e.goodid},[(0,o._)("div",{onClick:t=>a.postToBuyerShop(e.goodid)},[(0,o._)("div",xt,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.mediaFiles,((e,t)=>(0,o.wy)(((0,o.wg)(),(0,o.iD)("div",{key:t},[a.isVideo(e)?(0,o.wy)(((0,o.wg)(),(0,o.iD)("video",{key:1,src:e.url,controls:""},null,8,Ct)),[[r.F8,e.isActive]]):(0,o.wy)(((0,o.wg)(),(0,o.iD)("img",{key:0,src:e.url,alt:"商品图片"},null,8,At)),[[r.F8,e.isActive]])])),[[r.F8,e.isActive]]))),128))])],8,Pt),(0,o._)("div",Ut,[(0,o._)("button",{onClick:t=>a.showPrevMedia(e)},"＜",8,Dt),(0,o.Uk)("         "),(0,o._)("button",{onClick:t=>a.showNextMedia(e)},"＞",8,St)]),(0,o._)("div",{onClick:t=>a.postToBuyerShop(e.goodid)},[(0,o._)("p",null,[(0,o.Uk)("商品名："+(0,h.zw)(e.goodname),1),Ot,(0,o.Uk)("超值价："+(0,h.zw)(e.price)+"元",1)])],8,It)])))),128))]),(0,o._)("div",Ft,[(0,o._)("button",{onClick:t[14]||(t[14]=(...e)=>a.goToPrevPage&&a.goToPrevPage(...e)),class:"prev",disabled:1===n.currentPage},"上一页",8,Tt),(0,o._)("span",Mt,"第 "+(0,h.zw)(n.currentPage)+" / "+(0,h.zw)(a.totalPages)+" 页",1),(0,o._)("button",{onClick:t[15]||(t[15]=(...e)=>a.goToNextPage&&a.goToNextPage(...e)),class:"next",disabled:n.currentPage===a.totalPages},"下一页",8,Bt)])])])]))])}var qt={data(){return{items:[],searchQuery:"",selectedCategory:"猫咪主粮",filteredItems:[],currentPage:1,itemsPerPage:2,search:{keyword:"",kind:"猫咪主粮"},currentUser:null}},created(){this.fetchUsrFromSession(),this.fetchgoodListSession()},async mounted(){console.log("BuyerMain 组件已挂载"),await this.fetchgoodListSession(),this.filteredItems=this.items},computed:{isLoggedIn(){return!!this.currentUser},isSeller(){return this.currentUser&&1===this.currentUser.power},isBuyer(){return this.currentUser&&0===this.currentUser.power},getUsername(){return this.currentUser?this.currentUser.username:"未登录"},paginatedItems(){const e=(this.currentPage-1)*this.itemsPerPage,t=this.currentPage*this.itemsPerPage;return this.filteredItems.slice(e,t)},totalPages(){return Math.ceil(this.filteredItems.length/this.itemsPerPage)}},methods:{async fetchUsrFromSession(){try{const e=await D.Z.get("/now-usr"),t=e.data;return this.currentUser=t,!0}catch(e){return console.error("获取用户数据错误:",e),!1}},async fetchgoodListSession(){try{const e=await D.Z.get("/good/buyer-all-good-list-control"),t=e.data.data;return this.items=t.map((e=>{const t=e.picture.trim(),s=t.split(","),r=s.map(((e,t)=>({url:e,isActive:0===t})));return{...e,mediaFiles:r,goodid:e.goodid,goodname:e.goodname.trim(),description:e.description.trim(),price:e.price,number:e.number,kind:e.kind,subkind:e.subkind,buyingid:e.buyingid,numbermax:e.numbermax,islike:e.islike}})),console.log("this.items:",this.items),!0}catch(e){return console.error("获取商品列表数据错误:",e),!1}},isVideo(e){return e.url.endsWith(".mp4")||e.url.endsWith(".avi")},async postToBuyerShop(e){const t=await fetch(`/good/buyer-show-good/${e}`,{method:"POST"});this.selectedFiles=[];const s=await t.json();"/error"===s.page?this.$router.push({path:"/error",query:{err:s.msg,to:s.data}}):"/success"===s.page?this.$router.push({path:"/success",query:{message:s.msg,to:s.data}}):null===s.page?console.log("未知页面类型"):this.$router.push({path:s.page})},async handleLogout(){try{await D.Z.get("/logout-control"),this.$router.push("/")}catch(e){console.error("登出失败:",e)}},navigateTo(e){this.$router.push({name:e})},beforeMount(){this.isLoggedIn||this.$router.push("/")},async handleSearch(){console.log("搜索已执行");const e={keyword:this.searchQuery,kind:this.selectedCategory,ishistory:0},t=await fetch("/good/search-list-control",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}),s=await t.json();"/error"===s.page?this.$router.push({path:"/error",query:{err:s.msg,to:s.data}}):"/success"===s.page?this.$router.push({path:"/success",query:{message:s.msg,to:s.data}}):null===s.page?console.log("未知页面类型"):this.$router.push({path:s.page})},showPrevMedia(e){const t=e.mediaFiles.findIndex((e=>e.isActive));if(console.log("Current active index:",t),t>=0){const s=(t-1+e.mediaFiles.length)%e.mediaFiles.length;console.log("Previous index:",s),this.setActiveMedia(e,s)}},showNextMedia(e){const t=e.mediaFiles.findIndex((e=>e.isActive));if(console.log("Current active index:",t),t>=0){const s=(t+1)%e.mediaFiles.length;console.log("Next index:",s),this.setActiveMedia(e,s)}},setActiveMedia(e,t){e.mediaFiles.forEach(((e,s)=>{e.isActive=s===t,console.log(`Media at index ${s} active status: `,e.isActive)}))},goToPrevPage(){this.currentPage>1&&(this.currentPage--,console.log("Current page after prev:",this.currentPage))},goToNextPage(){this.currentPage<this.totalPages&&(this.currentPage++,console.log("Current page after next:",this.currentPage))},resetPage(){this.currentPage=1}},watch:{filteredItems(e,t){e!==t&&this.resetPage()}}};const Nt=(0,a.Z)(qt,[["render",zt],["__scopeId","data-v-1e946385"]]);var Lt=Nt,Vt=s.p+"img/catbackground.png",Zt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQUAAAABAQMAAADtvilwAAAAA1BMVEX/8uHoZVjmAAAACklEQVR4nGMgCAAAIgAB2LoVhQAAAABJRU5ErkJggg==";const Qt=e=>((0,o.dD)("data-v-61bec969"),e=e(),(0,o.Cn)(),e),Gt={key:0},Rt={class:"daohang"},Kt=Qt((()=>(0,o._)("li",null,[(0,o._)("b",null,'欢迎进入"喵咪美食坊"!')],-1))),Et={class:"content"},$t={class:"content-left"},Ht={class:"nav"},Yt={class:"nav-menu"},jt={class:"nav-info"},Wt=Qt((()=>(0,o._)("div",{class:"user-image",style:{left:"-40px"}},[(0,o._)("img",{src:Vt,alt:"用户头像",style:{width:"50px",height:"50px",left:"8.9%",position:"absolute"}})],-1))),Jt={class:"username",style:{"margin-right":"100px"}},Xt=Qt((()=>(0,o._)("img",{src:Zt,alt:"分割线",class:"separator-line"},null,-1))),es={class:"nav-content"},ts={class:"my"},ss={key:1},rs=Qt((()=>(0,o._)("div",{class:"else"},[(0,o.Uk)(" 您还未登录，请先"),(0,o._)("a",{href:"/"},"登录")],-1))),os=[rs];function is(e,t,s,r,i,n){const a=(0,o.up)("router-view");return n.isLoggedIn?((0,o.wg)(),(0,o.iD)("div",Gt,[(0,o._)("ul",Rt,[Kt,(0,o._)("li",{style:{float:"right"},onClick:t[0]||(t[0]=(...e)=>n.handleLogout&&n.handleLogout(...e)),class:"logout-button"},"退出登录")]),(0,o._)("div",Et,[(0,o._)("div",$t,[(0,o._)("div",Ht,[(0,o._)("div",Yt,[(0,o._)("div",jt,[Wt,(0,o._)("div",Jt,(0,h.zw)(n.getUsername),1),Xt]),(0,o._)("div",es,[(0,o._)("h3",{onClick:t[1]||(t[1]=e=>n.navigateTo("UpdatePassword")),class:"black-text",style:{cursor:"pointer"}},"修改密码"),(0,o._)("h3",{onClick:t[2]||(t[2]=e=>n.navigateTo("UploadOneGood")),class:"black-text",style:{cursor:"pointer"}},"发布商品"),(0,o._)("h3",{onClick:t[3]||(t[3]=e=>n.navigateTo("ShowUserInfo")),class:"black-text",style:{cursor:"pointer"}},"查看意向订单"),(0,o._)("h3",{onClick:t[4]||(t[4]=e=>n.navigateTo("UploadMultipleGoods")),class:"black-text",style:{cursor:"pointer"}},"发布多个商品"),(0,o._)("h3",{onClick:t[5]||(t[5]=e=>n.navigateTo("ShowHistoryGoods")),class:"black-text",style:{cursor:"pointer"}},"查看历史商品"),(0,o._)("h3",{onClick:t[6]||(t[6]=e=>n.navigateTo("ShowGoods")),class:"black-text",style:{cursor:"pointer"}},"查看全部商品"),(0,o._)("h3",{onClick:t[7]||(t[7]=e=>n.navigateTo("ShowAllUsers")),class:"black-text",style:{cursor:"pointer"}},"查看客户信息")])])])]),(0,o._)("div",null,[(0,o._)("div",ts,[(0,o.Wm)(a)])])])])):((0,o.wg)(),(0,o.iD)("div",ss,os))}var ns={data(){return{currentUser:null}},created(){this.fetchUsrFromSession()},computed:{isLoggedIn(){return!!this.currentUser},isSeller(){return this.currentUser&&1===this.currentUser.power},isBuyer(){return this.currentUser&&0===this.currentUser.power},getUsername(){return this.currentUser?this.currentUser.username:"未登录"}},methods:{async fetchUsrFromSession(){try{const e=await D.Z.get("/now-usr"),t=e.data;return this.currentUser=t,this.isLoggedIn&&this.isSeller||this.$router.push("/"),!0}catch(e){return console.error("获取用户数据错误:",e),!1}},async handleLogout(){try{await D.Z.get("/logout-control"),this.$router.push("/")}catch(e){console.error("登出失败:",e)}},navigateTo(e){this.$router.push({name:e})}},mounted(){console.log("SellerMain 组件已挂载")}};const as=(0,a.Z)(ns,[["render",is],["__scopeId","data-v-61bec969"]]);var ls=as;const ds=e=>((0,o.dD)("data-v-596f5e84"),e=e(),(0,o.Cn)(),e),cs={key:0},us=ds((()=>(0,o._)("div",{style:{"text-align":"center","margin-bottom":"0px","margin-top":"10px"}},[(0,o._)("img",{src:Vt,alt:"小猫",style:{width:"200px",height:"200px"}})],-1))),hs={class:"main"},gs=ds((()=>(0,o._)("h1",null,"修改密码",-1))),ps={class:"text-center"},ms=ds((()=>(0,o._)("span",null,"旧 密 码: ",-1))),_s=ds((()=>(0,o._)("br",null,null,-1))),ws={class:"text-center"},vs=ds((()=>(0,o._)("span",null,"新 密 码: ",-1))),ys=ds((()=>(0,o._)("br",null,null,-1))),bs={class:"text-center"},ks=ds((()=>(0,o._)("span",null,"确认密码: ",-1))),fs=ds((()=>(0,o._)("br",null,null,-1))),Ps={class:"text-center"},xs=ds((()=>(0,o._)("input",{type:"submit",class:"button",value:"确认修改"},null,-1))),As={key:0,class:"alert-message",id:"b"},Cs={key:1,class:"alert-error",id:"b"},Us={key:1,class:"else"},Ds=ds((()=>(0,o._)("span",null,[(0,o.Uk)("您还未登录，请先"),(0,o._)("a",{href:"index.jsp"},"登录")],-1))),Ss=[Ds];function Is(e,t,s,i,n,a){return n.isLoggedIn?((0,o.wg)(),(0,o.iD)("div",cs,[us,(0,o._)("div",hs,[(0,o._)("form",{onSubmit:t[6]||(t[6]=(0,r.iM)(((...e)=>a.submitForm&&a.submitForm(...e)),["prevent"]))},[(0,o.wy)((0,o._)("input",{type:"hidden","onUpdate:modelValue":t[0]||(t[0]=t=>e.username=t)},null,512),[[r.nr,e.username]]),(0,o.wy)((0,o._)("input",{type:"hidden","onUpdate:modelValue":t[1]||(t[1]=t=>e.userpwd=t)},null,512),[[r.nr,e.userpwd]]),gs,(0,o._)("div",ps,[ms,(0,o.wy)((0,o._)("input",{type:"password","onUpdate:modelValue":t[2]||(t[2]=e=>n.oldpwd=e),required:""},null,512),[[r.nr,n.oldpwd]])]),_s,(0,o._)("div",ws,[vs,(0,o.wy)((0,o._)("input",{type:"password","onUpdate:modelValue":t[3]||(t[3]=e=>n.newpwd=e),required:""},null,512),[[r.nr,n.newpwd]])]),ys,(0,o._)("div",bs,[ks,(0,o.wy)((0,o._)("input",{type:"password","onUpdate:modelValue":t[4]||(t[4]=e=>n.newpwd1=e),required:""},null,512),[[r.nr,n.newpwd1]])]),fs,(0,o._)("div",Ps,[xs,(0,o.Uk)("         "),(0,o._)("button",{onClick:t[5]||(t[5]=(...e)=>a.cancelUpdate&&a.cancelUpdate(...e)),class:"button"},"取消修改")])],32)]),n.message?((0,o.wg)(),(0,o.iD)("div",As,[(0,o._)("p",null,(0,h.zw)(n.message),1)])):(0,o.kq)("",!0),n.error?((0,o.wg)(),(0,o.iD)("div",Cs,[(0,o._)("p",null,(0,h.zw)(n.error),1)])):(0,o.kq)("",!0)])):((0,o.wg)(),(0,o.iD)("div",Us,Ss))}var Os={data(){return{isLoggedIn:!0,oldpwd:"",newpwd:"",newpwd1:"",credentials:{newpwd:"",newpwd1:""},message:null,error:null}},methods:{validateForm(){return this.newpwd.length>15?(alert("密码不能超过15个字符！"),!1):(this.error=null,!0)},async submitForm(){const e=this.validateForm();if(e)try{const e={oldpwd:this.oldpwd,newpwd:this.newpwd,newpwd1:this.newpwd1},t=await fetch("/usr/changedpwd-control",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}),s=await t.json();"/error"===s.page?this.$router.push({path:"/error",query:{err:s.msg,to:s.data}}):"/success"===s.page?this.$router.push({path:"/success",query:{message:s.msg,to:s.data}}):null===s.page?console.log("未知页面类型"):this.$router.push({path:s.page})}catch(t){console.error("修改密码失败:",t),this.error="密码修改失败，请稍后再试。"}},cancelUpdate(){this.oldpwd="",this.newpwd="",this.newpwd1="",this.error=null,this.message=null}}};const Fs=(0,a.Z)(Os,[["render",Is],["__scopeId","data-v-596f5e84"]]);var Ts=Fs;const Ms=e=>((0,o.dD)("data-v-43e13905"),e=e(),(0,o.Cn)(),e),Bs={key:0},zs={key:0,class:"modal",style:{position:"fixed","z-index":"1",left:"0",top:"0",width:"100%",height:"100%",overflow:"auto","background-color":"rgba(0,0,0,0.4)"}},qs=["src"],Ns=["src"],Ls={id:"a"},Vs={class:"container"},Zs=Ms((()=>(0,o._)("div",{class:"centered-container"},[(0,o._)("h2",null,"全部商品信息"),(0,o._)("br")],-1))),Qs={class:"centered-container"},Gs={class:"search-bar"},Rs=Ms((()=>(0,o._)("option",{value:"猫咪主粮"},"猫咪主粮",-1))),Ks=Ms((()=>(0,o._)("option",{value:"猫咪零食"},"猫咪零食",-1))),Es=Ms((()=>(0,o._)("option",{value:"猫咪日用"},"猫咪日用",-1))),$s=[Rs,Ks,Es],Hs={border:"1px",align:"center",cellspacing:"0"},Ys=Ms((()=>(0,o._)("tr",null,[(0,o._)("th",null,"ID"),(0,o._)("th",null,"名称"),(0,o._)("th",null,"描述"),(0,o._)("th",null,"库存"),(0,o._)("th",null,"单价"),(0,o._)("th",null,"展示内容"),(0,o._)("th",null,"状态"),(0,o._)("th",null,"操作")],-1))),js={class:"media-container"},Ws=["src"],Js=["src"],Xs=["onClick"],er=["onClick"],tr=["onClick"],sr=["onClick"],rr={class:"pagination"},or=["disabled"],ir={id:"page-info"},nr=["disabled"],ar={key:1,class:"else"};function lr(e,t,s,i,n,a){const l=(0,o.up)("PriceModal"),d=(0,o.up)("router-link");return a.isLoggedIn?((0,o.wg)(),(0,o.iD)("div",Bs,[n.showModal?((0,o.wg)(),(0,o.iD)("div",zs,[(0,o._)("span",{class:"close-button",onClick:t[0]||(t[0]=(...t)=>e.closeModal&&e.closeModal(...t)),style:{position:"absolute",top:"20px",right:"30px",color:"#f1f1f1","font-size":"35px","font-weight":"bold",cursor:"pointer"}},"×"),"image"===e.modalContentType?((0,o.wg)(),(0,o.iD)("img",{key:0,src:e.modalContentSrc,style:{margin:"auto",display:"none",width:"80%","max-width":"700px"}},null,8,qs)):(0,o.kq)("",!0),"video"===e.modalContentType?((0,o.wg)(),(0,o.iD)("video",{key:1,src:e.modalContentSrc,controls:"",style:{margin:"auto",display:"none",width:"80%","max-width":"700px"}},null,8,Ns)):(0,o.kq)("",!0)])):(0,o.kq)("",!0),(0,o._)("div",Ls,[(0,o._)("div",Vs,[Zs,(0,o._)("div",Qs,[(0,o._)("div",Gs,[(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>n.searchQuery=e),class:"custom-input",placeholder:"搜索商品"},null,512),[[r.nr,n.searchQuery]]),(0,o.wy)((0,o._)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>n.selectedCategory=e),id:"search_kind"},$s,512),[[r.bM,n.selectedCategory]]),(0,o._)("button",{onClick:t[3]||(t[3]=(...e)=>a.searchGoods&&a.searchGoods(...e)),style:{width:"130px"},class:"custom-button"},"搜索")])]),(0,o._)("table",Hs,[Ys,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.paginatedGoods,(e=>((0,o.wg)(),(0,o.iD)("tr",{key:e.goodid},[(0,o._)("td",null,(0,h.zw)(e.goodid),1),(0,o._)("td",null,(0,h.zw)(e.goodname),1),(0,o._)("td",null,(0,h.zw)(e.description),1),(0,o._)("td",{class:(0,h.C_)({"low-stock":e.number<5})},(0,h.zw)(e.number),3),(0,o._)("td",null,(0,h.zw)(e.price),1),(0,o._)("td",null,[(0,o._)("div",js,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.mediaFiles,((e,t)=>(0,o.wy)(((0,o.wg)(),(0,o.iD)("div",{key:t},[a.isVideo(e)?(0,o.kq)("",!0):(0,o.wy)(((0,o.wg)(),(0,o.iD)("img",{key:0,src:e.url,alt:"商品图片"},null,8,Ws)),[[r.F8,e.isActive]]),a.isVideo(e)?(0,o.wy)(((0,o.wg)(),(0,o.iD)("video",{key:1,src:e.url,controls:""},null,8,Js)),[[r.F8,e.isActive]]):(0,o.kq)("",!0)])),[[r.F8,e.isActive]]))),128))]),(0,o._)("div",null,[(0,o._)("button",{onClick:t=>a.showPrevMedia(e)},"＜",8,Xs),(0,o.Uk)("         "),(0,o._)("button",{onClick:t=>a.showNextMedia(e)},"＞",8,er)])]),(0,o._)("td",null,(0,h.zw)(a.stateText(e.state)),1),(0,o._)("td",null,[(0,o._)("button",{onClick:t=>a.confirmDelete(e.goodid)},"下架",8,tr),(0,o.Uk)(" | "),(0,o._)("button",{onClick:t=>a.openPriceModal(e)},"修改价格",8,sr)])])))),128))]),(0,o._)("div",rr,[(0,o._)("button",{onClick:t[4]||(t[4]=(...e)=>a.goToPrevPage&&a.goToPrevPage(...e)),class:"prev",disabled:1===n.currentPage},"上一页",8,or),(0,o._)("span",ir,"第 "+(0,h.zw)(n.currentPage)+" / "+(0,h.zw)(a.totalPages)+" 页",1),(0,o._)("button",{onClick:t[5]||(t[5]=(...e)=>a.goToNextPage&&a.goToNextPage(...e)),class:"next",disabled:n.currentPage===a.totalPages},"下一页",8,nr)]),(0,o.Wm)(l,{good:n.selectedGood,isVisible:n.showPriceModal,onClose:t[6]||(t[6]=e=>n.showPriceModal=!1),onUpdate:a.handleUpdatePrice},null,8,["good","isVisible","onUpdate"])])])])):((0,o.wg)(),(0,o.iD)("div",ar,[(0,o._)("span",null,[(0,o.Uk)("您还未登录，请先 "),(0,o.Wm)(d,{to:"/"},{default:(0,o.w5)((()=>[(0,o.Uk)("登录")])),_:1})])]))}const dr=e=>((0,o.dD)("data-v-bf176ba0"),e=e(),(0,o.Cn)(),e),cr={key:0,class:"modal"},ur={class:"modal-content price-modal-content"},hr=dr((()=>(0,o._)("h2",null,[(0,o._)("strong",null,"修改商品价格")],-1))),gr={class:"product-info"},pr=dr((()=>(0,o._)("strong",null,"商品ID:",-1))),mr=dr((()=>(0,o._)("strong",null,"商品名称:",-1))),_r=dr((()=>(0,o._)("strong",null,"原价格:",-1))),wr=dr((()=>(0,o._)("label",{for:"newPrice"},[(0,o._)("strong",null,"修改后价格:")],-1)));function vr(e,t,s,i,n,a){return s.isVisible?((0,o.wg)(),(0,o.iD)("div",cr,[(0,o._)("div",ur,[(0,o._)("span",{class:"close",onClick:t[0]||(t[0]=(...e)=>a.closeModal&&a.closeModal(...e))},"×"),hr,(0,o._)("div",gr,[(0,o._)("p",null,[pr,(0,o.Uk)(" "+(0,h.zw)(s.good.goodid),1)]),(0,o._)("p",null,[mr,(0,o.Uk)(" "+(0,h.zw)(s.good.goodname),1)]),(0,o._)("p",null,[_r,(0,o.Uk)(" "+(0,h.zw)(s.good.price),1)])]),(0,o._)("div",null,[wr,(0,o.wy)((0,o._)("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=e=>n.newPrice=e),placeholder:"输入新价格"},null,512),[[r.nr,n.newPrice]])]),(0,o._)("button",{onClick:t[2]||(t[2]=(...e)=>a.updatePrice&&a.updatePrice(...e))},"确认修改")])])):(0,o.kq)("",!0)}var yr={props:{good:Object,isVisible:Boolean},data(){return{newPrice:""}},methods:{closeModal(){this.$emit("close")},updatePrice(){this.$emit("update",{goodId:this.good.goodid,newPrice:this.newPrice})}}};const br=(0,a.Z)(yr,[["render",vr],["__scopeId","data-v-bf176ba0"]]);var kr=br,fr={components:{PriceModal:kr},data(){return{searchQuery:"",showPriceModal:!1,selectedGood:null,showModal:!1,selectedCategory:"猫咪主粮",currentPage:1,pageSize:6,filteredGoods:[],isHistory:0,showSuccessMessage:!1,successMessage:"",goods:[],currentUser:null}},created(){this.fetchUsrFromSession(),this.fetchgoodListSession()},computed:{isLoggedIn(){return!!this.currentUser},paginatedGoods(){const e=(this.currentPage-1)*this.pageSize,t=e+this.pageSize;return this.filteredGoods.slice(e,t)},totalPages(){return Math.ceil(this.filteredGoods.length/this.pageSize)}},async mounted(){console.log("ShowGoods 组件已挂载"),await this.fetchgoodListSession(),this.filteredGoods=this.goods,console.log("this.filteredGoods:",this.filteredGoods),this.showSuccessModal("价格修改成功！")},methods:{async fetchUsrFromSession(){try{const e=await D.Z.get("/now-usr"),t=e.data;return this.currentUser=t,!0}catch(e){return console.error("获取用户数据错误:",e),!1}},async fetchgoodListSession(){try{const e=await D.Z.get("/good/seller-all-good-list-control"),t=e.data.data;return this.goods=t.map((e=>{const t=e.picture.trim(),s=t.split(","),r=s.map(((e,t)=>({url:e,isActive:0===t})));return{...e,mediaFiles:r,goodname:e.goodname.trim(),description:e.description.trim(),price:e.price,number:e.number,kind:e.kind,subkind:e.subkind}})),console.log("this.goods:",this.goods),!0}catch(e){return console.error("获取商品列表数据错误:",e),!1}},showPrevMedia(e){const t=e.mediaFiles.findIndex((e=>e.isActive));if(console.log("Current active index:",t),t>=0){const s=(t-1+e.mediaFiles.length)%e.mediaFiles.length;console.log("Previous index:",s),this.setActiveMedia(e,s)}},showNextMedia(e){const t=e.mediaFiles.findIndex((e=>e.isActive));if(console.log("Current active index:",t),t>=0){const s=(t+1)%e.mediaFiles.length;console.log("Next index:",s),this.setActiveMedia(e,s)}},setActiveMedia(e,t){e.mediaFiles.forEach(((e,s)=>{e.isActive=s===t,console.log(`Media at index ${s} active status: `,e.isActive)}))},isVideo(e){const t=e.url.endsWith(".mp4");return console.log(`Is media a video: ${t}`),t},showSuccessModal(e){this.successMessage=e,this.showSuccessMessage=!0},async searchGoods(){console.log("搜索已执行");const e={keyword:this.searchQuery,kind:this.selectedCategory,ishistory:0},t=await fetch("/good/search-list-control",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}),s=await t.json();"/error"===s.page?this.$router.push({path:"/error",query:{err:s.msg,to:s.data}}):"/success"===s.page?this.$router.push({path:"/success",query:{message:s.msg,to:s.data}}):null===s.page?console.log("未知页面类型"):this.$router.push({path:s.page})},closeSuccessModal(){this.showSuccessMessage=!1},confirmDelete(e){confirm("确定要删除这个商品吗？")&&this.deleteGood(e)},async deleteGood(e){console.log("删除商品，商品ID:",e);try{const t=await fetch(`/good/delete-good/${e}`,{method:"POST"}),s=await t.json();"/error"===s.page?this.$router.push({path:"/error",query:{err:s.msg,to:s.data}}):"/success"===s.page?this.$router.push({path:"/success",query:{message:s.msg,to:s.data}}):null===s.page?console.log("未知页面类型"):this.$router.push({path:s.page})}catch(t){console.error("删除失败",t)}},openPriceModal(e){console.log("打开价格修改窗口!"),this.selectedGood=e,this.showPriceModal=!0},async handleUpdatePrice({goodId:e,newPrice:t}){const s={goodId:e,newPrice:t},r=await fetch("/good/modify-price",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),o=await r.json();"/error"===o.page?this.$router.push({path:"/error",query:{err:o.msg,to:o.data}}):"/success"===o.page?this.$router.push({path:"/success",query:{message:o.msg,to:o.data}}):null===o.page?console.log("未知页面类型"):this.$router.push({path:o.page})},goToPrevPage(){this.currentPage>1&&this.currentPage--},goToNextPage(){this.currentPage<this.totalPages&&this.currentPage++},resetPage(){this.currentPage=1},stateText(e){const t={0:"上架",1:"冻结",2:"售出"};return t[e]||"未知"}},watch:{filteredGoods(e,t){e!==t&&this.resetPage()}}};const Pr=(0,a.Z)(fr,[["render",lr],["__scopeId","data-v-43e13905"]]);var xr=Pr;const Ar=e=>((0,o.dD)("data-v-002563b9"),e=e(),(0,o.Cn)(),e),Cr={key:0},Ur={id:"a"},Dr={class:"container"},Sr=Ar((()=>(0,o._)("div",{class:"form-group"},[(0,o._)("h2",null,"当前意向订单")],-1))),Ir={border:"1px",align:"center",cellspacing:"0"},Or=Ar((()=>(0,o._)("tr",null,[(0,o._)("th",null,"ID"),(0,o._)("th",null,"地址"),(0,o._)("th",null,"电话"),(0,o._)("th",null,"购买人姓名"),(0,o._)("th",null,"商品ID"),(0,o._)("th",null,"操作"),(0,o._)("th",null,"订单状态")],-1))),Fr=["onClick"],Tr=["onClick"],Mr=["onClick"],Br={key:3,class:"delivery-btn"},zr=["onClick"],qr={key:5},Nr={class:"pagination"},Lr=["disabled"],Vr=["disabled"],Zr={key:1,class:"else"},Qr=Ar((()=>(0,o._)("a",{href:"login"},"登录",-1)));function Gr(e,t,s,r,i,n){return i.isLoggedIn?((0,o.wg)(),(0,o.iD)("div",Cr,[(0,o._)("div",Ur,[(0,o._)("div",Dr,[Sr,(0,o._)("table",Ir,[Or,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.paginatedItems,((e,t)=>((0,o.wg)(),(0,o.iD)("tr",{key:t},[(0,o._)("td",null,(0,h.zw)(e.orderid),1),(0,o._)("td",null,(0,h.zw)(e.address),1),(0,o._)("td",null,(0,h.zw)(e.telephone),1),(0,o._)("td",null,(0,h.zw)(e.buyername),1),(0,o._)("td",null,(0,h.zw)(e.goodid),1),(0,o._)("td",null,[1===e.orderstate?((0,o.wg)(),(0,o.iD)("button",{key:0,onClick:t=>n.confirmOrder(e.orderid),class:"confirm-btn"},"确认订单",8,Fr)):2===e.orderstate?((0,o.wg)(),(0,o.iD)("button",{key:1,onClick:t=>n.confirmOrder(e.orderid),class:"stock-btn"},"确认备货",8,Tr)):3===e.orderstate?((0,o.wg)(),(0,o.iD)("button",{key:2,onClick:t=>n.confirmOrder(e.orderid),class:"shipment-btn"},"确认发货",8,Mr)):4===e.orderstate?((0,o.wg)(),(0,o.iD)("button",Br,"发货完成")):(0,o.kq)("",!0),e.orderstate<=4&&e.orderstate>0?((0,o.wg)(),(0,o.iD)("button",{key:4,onClick:t=>n.cancelOrder(e.orderid),class:"red-btn"},"取消订单",8,zr)):(0,o.kq)("",!0),e.orderstate<0||e.orderstate>4?((0,o.wg)(),(0,o.iD)("span",qr,"无法操作订单")):(0,o.kq)("",!0)]),(0,o._)("td",null,(0,h.zw)(n.getOrderStatus(e.orderstate)),1)])))),128))]),(0,o._)("div",Nr,[(0,o._)("button",{onClick:t[0]||(t[0]=(...e)=>n.goToPrevPage&&n.goToPrevPage(...e)),disabled:n.isPrevDisabled,class:"prev"},"上一页",8,Lr),(0,o._)("span",null,"第"+(0,h.zw)(i.currentPage)+"/"+(0,h.zw)(n.totalPages)+"页",1),(0,o._)("button",{onClick:t[1]||(t[1]=(...e)=>n.goToNextPage&&n.goToNextPage(...e)),disabled:n.isNextDisabled,class:"next"},"下一页",8,Vr)])])])])):((0,o.wg)(),(0,o.iD)("div",Zr,[(0,o.Uk)(" 您还未登录，请先"),Qr]))}var Rr={data(){return{isLoggedIn:!0,orders:[],currentPage:1,itemsPerPage:5,currentUser:{}}},methods:{getOrderStatus(e){const t={0:"等待客户下单",1:"客户已确认，商家待确认",2:"商家已确认，等待商家备货",3:"备货已完成，等待商家发货",4:"发货已完成，等待买家确认交易完成",5:"交易已完成"};return t[e]||"订单被取消"},handleOrderAction(e,t){switch(t){case"wait":break;case"confirm":this.confirmOrder(e);break;case"prepare":break;case"ship":break;case"cancel":this.cancelOrder(e);break}},confirmOrder(e){const t=this.orders.find((t=>t.orderid===e));if(t){let s=t.orderstate+1;D.Z.post("/order/confirmorder-control",{orderid:e,orderstate:s}).then((e=>{e.data&&"确认订单成功"===e.data.msg?(t.orderstate=s,alert("该订单阶段确认成功！")):alert("该订单阶段确认失败！")})).catch((e=>{console.error("确认订单出错:",e)}))}},cancelOrder(e){const t=this.orders.find((t=>t.orderid===e));t&&D.Z.post("/order/deleteorder-control",{orderid:e,orderstate:-1}).then((e=>{e.data&&"取消订单成功"===e.data.msg?(t.orderstate=-1,alert("该订单取消成功！")):alert("该订单取消失败！")})).catch((e=>{console.error("取消订单出错:",e)}))},goToPrevPage(){this.currentPage>1&&(this.currentPage--,this.fetchOrders())},goToNextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchOrders())},fetchOrders(){D.Z.get("/order/showorderinfo-control").then((e=>{console.log(e.data.data),e.data&&e.data.data?(this.orders=e.data.data,console.log("获取意向订单数据列表成功")):console.error("获取意向订单数据列表失败")})).catch((e=>{console.error("获取意向订单数据列表错误",e)}))},async fetchUsrFromSession(){try{const e=await D.Z.get("/now-usr");this.currentUser=e.data,this.currentUser&&(this.isLoggedIn=!0)}catch(e){console.error("获取用户数据错误:",e),this.isLoggedIn=!1}}},computed:{paginatedUsers(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;return this.filteredUsers.slice(e,t)},totalPages(){return Math.ceil(this.orders.length/this.itemsPerPage)},isPrevDisabled(){return this.currentPage<=1},isNextDisabled(){return this.currentPage>=this.totalPages},filteredOrders(){return this.orders.filter((e=>-2!==e.orderstate))},paginatedItems(){const e=(this.currentPage-1)*this.itemsPerPage,t=this.currentPage*this.itemsPerPage;return this.orders.slice(e,t)}},mounted(){this.fetchUsrFromSession().then((()=>{this.isLoggedIn&&this.fetchOrders()}))},created(){this.fetchOrders()}};const Kr=(0,a.Z)(Rr,[["render",Gr],["__scopeId","data-v-002563b9"]]);var Er=Kr;const $r=e=>((0,o.dD)("data-v-fa4db55a"),e=e(),(0,o.Cn)(),e),Hr={key:0},Yr={id:"a"},jr={class:"container"},Wr=$r((()=>(0,o._)("div",{class:"centered-container"},[(0,o._)("h2",null,"历史商品信息"),(0,o._)("br")],-1))),Jr={class:"centered-container"},Xr={class:"search-bar"},eo=$r((()=>(0,o._)("option",{value:"猫咪主粮"},"猫咪主粮",-1))),to=$r((()=>(0,o._)("option",{value:"猫咪零食"},"猫咪零食",-1))),so=$r((()=>(0,o._)("option",{value:"猫咪日用"},"猫咪日用",-1))),ro=[eo,to,so],oo={border:"1px",align:"center",cellspacing:"0"},io=$r((()=>(0,o._)("tr",null,[(0,o._)("th",null,"ID"),(0,o._)("th",null,"名称"),(0,o._)("th",null,"描述"),(0,o._)("th",null,"单价"),(0,o._)("th",null,"展示内容"),(0,o._)("th",null,"类别"),(0,o._)("th",null,"子类别"),(0,o._)("th",null,"创建日期")],-1))),no={class:"media-container"},ao=["src"],lo=["src"],co=["onClick"],uo=["onClick"],ho={class:"pagination"},go=["disabled"],po={id:"page-info"},mo=["disabled"],_o={key:1,class:"else"},wo=$r((()=>(0,o._)("a",{href:"/login"},"登录",-1)));function vo(e,t,s,i,n,a){return a.isLoggedIn?((0,o.wg)(),(0,o.iD)("div",Hr,[(0,o._)("div",Yr,[(0,o._)("div",jr,[Wr,(0,o._)("div",Jr,[(0,o._)("div",Xr,[(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.searchQuery=t),class:"custom-input",placeholder:"搜索商品"},null,512),[[r.nr,e.searchQuery]]),(0,o.wy)((0,o._)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.selectedCategory=e),id:"search_kind"},ro,512),[[r.bM,n.selectedCategory]]),(0,o._)("button",{onClick:t[2]||(t[2]=(...e)=>a.searchGoods&&a.searchGoods(...e)),style:{width:"130px"},class:"custom-button"},"搜索")])]),(0,o._)("table",oo,[io,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.paginatedGoods,(e=>((0,o.wg)(),(0,o.iD)("tr",{key:e.goodid},[(0,o._)("td",null,(0,h.zw)(e.goodid),1),(0,o._)("td",null,(0,h.zw)(e.goodname),1),(0,o._)("td",null,(0,h.zw)(e.description),1),(0,o._)("td",null,(0,h.zw)(e.price),1),(0,o._)("td",null,[(0,o._)("div",no,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.mediaFiles,((e,t)=>(0,o.wy)(((0,o.wg)(),(0,o.iD)("div",{key:t},[a.isVideo(e)?(0,o.kq)("",!0):(0,o.wy)(((0,o.wg)(),(0,o.iD)("img",{key:0,src:e.url,alt:"商品图片"},null,8,ao)),[[r.F8,e.isActive]]),a.isVideo(e)?(0,o.wy)(((0,o.wg)(),(0,o.iD)("video",{key:1,src:e.url,controls:""},null,8,lo)),[[r.F8,e.isActive]]):(0,o.kq)("",!0)])),[[r.F8,e.isActive]]))),128))]),(0,o._)("div",null,[(0,o._)("button",{onClick:t=>a.showPrevMedia(e)},"＜",8,co),(0,o.Uk)("         "),(0,o._)("button",{onClick:t=>a.showNextMedia(e)},"＞",8,uo)])]),(0,o._)("td",null,(0,h.zw)(e.kind),1),(0,o._)("td",null,(0,h.zw)(e.subkind),1),(0,o._)("td",null,(0,h.zw)(e.createdate),1)])))),128))]),(0,o._)("div",ho,[(0,o._)("button",{onClick:t[3]||(t[3]=(...e)=>a.goToPrevPage&&a.goToPrevPage(...e)),class:"prev",disabled:1===n.currentPage},"上一页",8,go),(0,o._)("span",po,"第 "+(0,h.zw)(n.currentPage)+" / "+(0,h.zw)(a.totalPages)+" 页",1),(0,o._)("button",{onClick:t[4]||(t[4]=(...e)=>a.goToNextPage&&a.goToNextPage(...e)),class:"next",disabled:n.currentPage===a.totalPages},"下一页",8,mo)])])])])):((0,o.wg)(),(0,o.iD)("div",_o,[(0,o.Uk)(" 您还未登录，请先"),wo]))}var yo={data(){return{products:[],selectedGood:null,selectedCategory:"猫咪主粮",currentPage:1,pageSize:6,goods:[],filteredGoods:[],currentUser:null,isHistory:1}},created(){this.fetchUsrFromSession(),this.fetchgoodListSession()},computed:{isLoggedIn(){return!!this.currentUser},paginatedGoods(){const e=(this.currentPage-1)*this.pageSize,t=e+this.pageSize;return this.filteredGoods.slice(e,t)},totalPages(){return Math.ceil(this.filteredGoods.length/this.pageSize)}},async mounted(){console.log("ShowHistoryGoods 组件已挂载"),await this.fetchgoodListSession(),this.filteredGoods=this.goods,console.log("this.filteredGoods:",this.filteredGoods)},methods:{async fetchUsrFromSession(){try{const e=await D.Z.get("/now-usr"),t=e.data;return this.currentUser=t,!0}catch(e){return console.error("获取用户数据错误:",e),!1}},async fetchgoodListSession(){try{const e=await D.Z.get("/good/seller-all-historygood-list-control"),t=e.data.data;return this.goods=t.map((e=>{const t=e.picture.trim(),s=t.split(","),r=s.map(((e,t)=>({url:e,isActive:0===t})));return{...e,mediaFiles:r,goodname:e.goodname.trim(),description:e.description.trim(),price:e.price,number:e.number,kind:e.kind,subkind:e.subkind,createdate:e.createdate}})),console.log("this.goods:",this.goods),!0}catch(e){return console.error("获取商品列表数据错误:",e),!1}},showPrevMedia(e){const t=e.mediaFiles.findIndex((e=>e.isActive));if(console.log("Current active index:",t),t>=0){const s=(t-1+e.mediaFiles.length)%e.mediaFiles.length;console.log("Previous index:",s),this.setActiveMedia(e,s)}},showNextMedia(e){const t=e.mediaFiles.findIndex((e=>e.isActive));if(console.log("Current active index:",t),t>=0){const s=(t+1)%e.mediaFiles.length;console.log("Next index:",s),this.setActiveMedia(e,s)}},isVideo(e){const t=e.url.endsWith(".mp4");return console.log(`Is media a video: ${t}`),t},async searchGoods(){console.log("搜索已执行");const e={keyword:this.searchQuery,kind:this.selectedCategory,ishistory:1},t=await fetch("/good/search-list-control",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}),s=await t.json();"/error"===s.page?this.$router.push({path:"/error",query:{err:s.msg,to:s.data}}):"/success"===s.page?this.$router.push({path:"/success",query:{message:s.msg,to:s.data}}):null===s.page?console.log("未知页面类型"):this.$router.push({path:s.page})},goToPrevPage(){this.currentPage>1&&this.currentPage--},goToNextPage(){this.currentPage<this.totalPages&&this.currentPage++},resetPage(){this.currentPage=1},fetchProducts(){}},watch:{filteredGoods(e,t){e!==t&&this.resetPage()}}};const bo=(0,a.Z)(yo,[["render",vo],["__scopeId","data-v-fa4db55a"]]);var ko=bo;const fo=e=>((0,o.dD)("data-v-628ee9a0"),e=e(),(0,o.Cn)(),e),Po={key:0},xo={id:"a"},Ao={class:"container"},Co=fo((()=>(0,o._)("div",{class:"centered-container"},[(0,o._)("h2",null,"用户信息列表")],-1))),Uo=fo((()=>(0,o._)("div",{id:"search_list"},null,-1))),Do={border:"1px",align:"center",cellspacing:"0"},So=fo((()=>(0,o._)("tr",null,[(0,o._)("th",null,"ID"),(0,o._)("th",null,"用户名"),(0,o._)("th",null,"操作")],-1))),Io={class:"pagination"},Oo={id:"page-info"},Fo={key:1,class:"else"},To=fo((()=>(0,o._)("span",null,[(0,o.Uk)("您还未登录，请先"),(0,o._)("a",{href:"/"},"登录")],-1))),Mo=[To];function Bo(e,t,s,r,i,n){const a=(0,o.up)("router-link");return n.isLoggedIn?((0,o.wg)(),(0,o.iD)("div",Po,[(0,o._)("div",xo,[(0,o._)("div",Ao,[Co,Uo,(0,o._)("table",Do,[So,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.paginatedUsers,(e=>((0,o.wg)(),(0,o.iD)("tr",{key:e.userid},[(0,o._)("td",null,(0,h.zw)(e.userid),1),(0,o._)("td",null,(0,h.zw)(e.username),1),(0,o._)("td",null,[(0,o.Wm)(a,{to:{name:"UserOrderHistory",props:[e.userid]}},{default:(0,o.w5)((()=>[(0,o.Uk)(" 查看购买历史 ")])),_:2},1032,["to"])])])))),128))]),(0,o._)("div",Io,[(0,o._)("button",{onClick:t[0]||(t[0]=(...e)=>n.goToPrevPage&&n.goToPrevPage(...e)),class:"prev"},"上一页"),(0,o._)("span",Oo,"第 "+(0,h.zw)(i.currentPage)+" 页",1),(0,o._)("button",{onClick:t[1]||(t[1]=(...e)=>n.goToNextPage&&n.goToNextPage(...e)),class:"next"},"下一页")])])])])):((0,o.wg)(),(0,o.iD)("div",Fo,Mo))}var zo={data(){return{currentUser:null,currentPage:1,pageSize:5,users:[]}},computed:{isLoggedIn(){return!!this.currentUser},paginatedUsers(){const e=(this.currentPage-1)*this.pageSize,t=e+this.pageSize;return this.users.slice(e,t)},totalPages(){return Math.ceil(this.users.length/this.pageSize)}},methods:{async fetchUsrFromSession(){try{const e=await D.Z.get("/now-usr"),t=e.data;return this.currentUser=t,!0}catch(e){return console.error("获取用户数据错误:",e),!1}},goToPrevPage(){this.currentPage>1&&this.currentPage--},goToNextPage(){this.currentPage<this.totalPages&&this.currentPage++},fetchUsers(){D.Z.post("/usr/all-buyer").then((e=>{this.users=e.data.data,console.log(e.data)})).catch((e=>{console.error("There was an error!",e)}))}},mounted(){this.fetchUsrFromSession(),this.fetchUsers()}};const qo=(0,a.Z)(zo,[["render",Bo],["__scopeId","data-v-628ee9a0"]]);var No=qo;const Lo=e=>((0,o.dD)("data-v-9e58766c"),e=e(),(0,o.Cn)(),e),Vo={key:0,class:"container"},Zo=Lo((()=>(0,o._)("h1",null,"上传多个商品",-1))),Qo={class:"form-group"},Go=Lo((()=>(0,o._)("label",{for:"goodName"},"商品名称：",-1))),Ro={key:0,class:"error"},Ko={class:"form-group"},Eo=Lo((()=>(0,o._)("label",{for:"price"},"商品价格：",-1))),$o={key:0,class:"error"},Ho={class:"form-group"},Yo=Lo((()=>(0,o._)("label",{for:"stock"},"商品数量：",-1))),jo={key:0,class:"error"},Wo={class:"form-group"},Jo=Lo((()=>(0,o._)("label",{for:"description"},"商品描述：",-1))),Xo={key:0,class:"error"},ei={class:"form-group"},ti=Lo((()=>(0,o._)("label",{for:"kind"},"商品大类：",-1))),si=["value"],ri={class:"form-group"},oi=Lo((()=>(0,o._)("label",{for:"subkind"},"商品子类：",-1))),ii=["value"],ni=Lo((()=>(0,o._)("label",{for:"kind"},"商品图片：",-1))),ai={id:"preview"},li={key:0},di=["src"],ci=["src"],ui=["onClick"],hi={key:1},gi=["disabled"],pi={key:0,class:"error"},mi=Lo((()=>(0,o._)("br",null,null,-1))),_i=Lo((()=>(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",null,"商品名称"),(0,o._)("th",null,"价格"),(0,o._)("th",null,"数量"),(0,o._)("th",null,"描述"),(0,o._)("th",null,"展示内容"),(0,o._)("th",null,"商品类别"),(0,o._)("th",null,"子类别")])],-1))),wi=["src"],vi=["src"],yi={key:1},bi=Lo((()=>(0,o._)("a",{href:"/login"},"登录",-1)));function ki(e,t,s,i,n,a){return a.isLoggedIn?((0,o.wg)(),(0,o.iD)("div",Vo,[Zo,(0,o._)("div",null,[(0,o._)("div",Qo,[Go,(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>n.goodName=e),placeholder:"请输入商品名称",required:""},null,512),[[r.nr,n.goodName]]),n.errors.goodName?((0,o.wg)(),(0,o.iD)("span",Ro,(0,h.zw)(n.errors.goodName),1)):(0,o.kq)("",!0)]),(0,o._)("div",Ko,[Eo,(0,o.wy)((0,o._)("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=e=>n.price=e),placeholder:"请输入商品价格",required:""},null,512),[[r.nr,n.price]]),n.errors.price?((0,o.wg)(),(0,o.iD)("span",$o,(0,h.zw)(n.errors.price),1)):(0,o.kq)("",!0)]),(0,o._)("div",Ho,[Yo,(0,o.wy)((0,o._)("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=e=>n.stock=e),placeholder:"请输入商品库存",required:""},null,512),[[r.nr,n.stock]]),n.errors.stock?((0,o.wg)(),(0,o.iD)("span",jo,(0,h.zw)(n.errors.stock),1)):(0,o.kq)("",!0)]),(0,o._)("div",Wo,[Jo,(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>n.description=e),placeholder:"请输入商品描述",required:""},null,512),[[r.nr,n.description]]),n.errors.description?((0,o.wg)(),(0,o.iD)("span",Xo,(0,h.zw)(n.errors.description),1)):(0,o.kq)("",!0)]),(0,o._)("div",ei,[ti,(0,o.wy)((0,o._)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>n.selectedKind=e),onChange:t[5]||(t[5]=(...e)=>a.updateSubcategories&&a.updateSubcategories(...e))},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.kinds,(e=>((0,o.wg)(),(0,o.iD)("option",{key:e.value,value:e.value},(0,h.zw)(e.text),9,si)))),128))],544),[[r.bM,n.selectedKind]])]),(0,o._)("div",ri,[oi,(0,o.wy)((0,o._)("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>n.selectedSubkind=e)},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.subkinds,(e=>((0,o.wg)(),(0,o.iD)("option",{key:e,value:e},(0,h.zw)(e),9,ii)))),128))],512),[[r.bM,n.selectedSubkind]])]),ni,(0,o._)("div",ai,[n.selectedFiles.length>0?((0,o.wg)(),(0,o.iD)("div",li,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.selectedFiles,((e,t)=>(0,o.wy)(((0,o.wg)(),(0,o.iD)("div",{key:t},[a.isImage(e)?((0,o.wg)(),(0,o.iD)("img",{key:0,src:a.getURL(e),alt:"预览图"},null,8,di)):((0,o.wg)(),(0,o.iD)("video",{key:1,controls:"",src:a.getURL(e)},null,8,ci)),(0,o._)("button",{onClick:e=>a.removeFile(t)},"X",8,ui)])),[[r.F8,t===n.currentPreviewIndex]]))),128))])):((0,o.wg)(),(0,o.iD)("div",hi," 没有选择文件 "))]),(0,o._)("button",{type:"button",onClick:t[7]||(t[7]=(...e)=>a.prevImage&&a.prevImage(...e))},"＜"),(0,o.Uk)("  "),(0,o._)("button",{type:"button",onClick:t[8]||(t[8]=(...e)=>a.nextImage&&a.nextImage(...e))},"＞"),(0,o._)("input",{type:"file",disabled:a.isFileInputDisabled,ref:"fileInput",onChange:t[9]||(t[9]=(...e)=>a.handleFileChange&&a.handleFileChange(...e)),accept:"image/png, image/jpeg, video/mp4",multiple:"",style:{display:"none"}},null,40,gi),(0,o._)("button",{type:"button",onClick:t[10]||(t[10]=(...e)=>a.triggerFileInput&&a.triggerFileInput(...e))},"上传图片/视频"),n.errors.pictureError?((0,o.wg)(),(0,o.iD)("span",pi,(0,h.zw)(n.errors.pictureError),1)):(0,o.kq)("",!0),mi,(0,o._)("button",{onClick:t[11]||(t[11]=(...e)=>a.addProduct&&a.addProduct(...e))},"添加商品")]),(0,o._)("table",null,[_i,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.productList,((e,t)=>((0,o.wg)(),(0,o.iD)("tr",{key:t},[(0,o._)("td",null,(0,h.zw)(e.goodname),1),(0,o._)("td",null,(0,h.zw)(e.price),1),(0,o._)("td",null,(0,h.zw)(e.number),1),(0,o._)("td",null,(0,h.zw)(e.description),1),(0,o._)("td",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.mediaFiles,((e,t)=>((0,o.wg)(),(0,o.iD)("div",{key:t},[a.isImage(e)?((0,o.wg)(),(0,o.iD)("img",{key:0,src:a.getURL(e),alt:"Image view",style:{"max-width":"100px","max-height":"100px","object-fit":"contain"}},null,8,wi)):((0,o.wg)(),(0,o.iD)("video",{key:1,controls:"",src:a.getURL(e),style:{"max-width":"100px","max-height":"100px"}},null,8,vi))])))),128))]),(0,o._)("td",null,(0,h.zw)(e.kind),1),(0,o._)("td",null,(0,h.zw)(e.subkind),1)])))),128))])]),(0,o._)("button",{onClick:t[12]||(t[12]=(...e)=>a.PredUploadProducts&&a.PredUploadProducts(...e))},"确认发布所有商品")])):((0,o.wg)(),(0,o.iD)("div",yi,[(0,o.Uk)(" 您还未登录，请先"),bi]))}s(8858),s(1318),s(3228);var fi={data(){return{products:[],goodName:"",price:"",stock:"",description:"",selectedFiles:[],selectedKind:"猫咪主粮",selectedSubkind:"",currentPreviewIndex:0,kinds:[{value:"猫咪主粮",text:"猫咪主粮"},{value:"猫咪零食",text:"猫咪零食"},{value:"猫咪日用",text:"猫咪日用"}],subkinds:[],productList:[],errors:{pictureError:"",goodName:"",price:"",stock:"",description:""},currentUser:null,FilesList:new Map}},created(){this.fetchUsrFromSession()},mounted(){this.updateSubcategories()},computed:{isLoggedIn(){return!!this.currentUser},currentFile(){return this.selectedFiles[this.currentPreviewIndex]},isFileInputDisabled(){return this.selectedFiles.length>=3}},methods:{async fetchUsrFromSession(){try{const e=await D.Z.get("/now-usr"),t=e.data;return this.currentUser=t,!0}catch(e){return console.error("获取用户数据错误:",e),!1}},addProduct(){if(this.goodName.length>20)return void alert("商品名称不能超过20个字符");if(isNaN(this.price))return void alert("价格需要输入数字");if(isNaN(this.stock))return void(this.errors.stock="库存需要输入数字");if(this.description.length>100)return void alert("商品描述不能超过100个字符");if(0===this.selectedFiles.length)return void alert("请上传至少一个文件");const e={goodname:this.goodName,price:this.price,number:this.stock,description:this.description,kind:this.selectedKind,subkind:this.selectedSubkind,mediaFiles:this.selectedFiles};this.productList.push(e),this.selectedFiles.forEach((e=>{this.FilesList.set(this.goodName,e)})),this.goodName="",this.price="",this.stock="",this.description="",this.selectedFiles=[],console.log(this.selectedFiles),alert("商品已添加")},isImage(e){return e&&e.type&&e.type.startsWith("image/")},getURL(e){return URL.createObjectURL(e)},updateSubcategories(){"猫咪主粮"===this.selectedKind?this.subkinds=["猫干粮","猫湿粮"]:"猫咪零食"===this.selectedKind?this.subkinds=["饼干","罐头","猫条"]:"猫咪日用"===this.selectedKind&&(this.subkinds=["猫砂盆","猫小窝","猫沙发","清洁除味"]),this.subkinds.length>0?this.selectedSubkind=this.subkinds[0]:this.selectedSubkind=""},handleFileChange(e){const t=Array.from(e.target.files),s=["image/png","image/jpeg","video/mp4"],r=t.filter((e=>s.includes(e.type)));if(r.length<t.length)return void alert("不支持的文件格式。请上传png、jpg或mp4格式的文件。");const o=3-this.selectedFiles.length,i=r.slice(0,o),n=3,a=10485760;if(t.length>n)return void alert(`您只能上传最多 ${n} 个文件。`);const l=t.some((e=>e.size>a));l?alert("所有文件必须小于10MB，请重新选择文件。"):this.selectedFiles.length+i.length>3?alert("最多只能上传3个文件。"):(this.selectedFiles=[...this.selectedFiles,...r],3===this.selectedFiles.length?e.target.disabled=!0:(e.target.disabled=!1,e.target.value=""),this.$refs.fileInput&&(this.$refs.fileInput.value=""),this.selectedFiles.length<3&&(e.target.disabled=!1))},removeFile(e){URL.revokeObjectURL(this.selectedFiles[e]),this.selectedFiles.splice(e,1),this.selectedFiles.length<3&&this.$refs.fileInput&&(this.$refs.fileInput.disabled=!1),this.$refs.fileInput&&(this.$refs.fileInput.value="")},triggerFileInput(){this.$refs.fileInput?this.$refs.fileInput.click():console.error("未找到文件输入框。")},async PredUploadProducts(){const e=this.productList.map((e=>e.goodname)),t=await fetch("/good/upload-multiple-goods",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({goodnames:e})}),s=await t.json();"/error"===s.page?this.$router.push({path:"/error",query:{err:s.msg,to:s.data}}):"/success"===s.page?await this.submitProducts():null===s.page?console.log("未知页面类型"):this.$router.push({path:s.page})},async submitProducts(){for(const e of this.productList){const t=new FormData;t.append("goodname",e.goodname),t.append("price",e.price),t.append("number",e.number),t.append("description",e.description),t.append("kind",e.kind),t.append("subkind",e.subkind);for(const[o,i]of this.FilesList.entries())o===e.goodname&&t.append("mediaFiles",i);const s=await fetch("/good/upload-good",{method:"POST",body:t}),r=await s.json();"/error"===r.page?this.$router.push({path:"/error",query:{err:r.msg,to:r.data}}):"/success"===r.page?this.$router.push({path:"/success",query:{message:r.msg,to:r.data}}):null===r.page?console.log("未知页面类型"):this.$router.push({path:r.page})}},prevImage(){this.selectedFiles.length>0&&(this.currentPreviewIndex=(this.currentPreviewIndex-1+this.selectedFiles.length)%this.selectedFiles.length)},nextImage(){this.selectedFiles.length>0&&(this.currentPreviewIndex=(this.currentPreviewIndex+1)%this.selectedFiles.length)}}};const Pi=(0,a.Z)(fi,[["render",ki],["__scopeId","data-v-9e58766c"]]);var xi=Pi;const Ai=e=>((0,o.dD)("data-v-d337886c"),e=e(),(0,o.Cn)(),e),Ci={class:"daohang"},Ui={class:"title-container"},Di=Ai((()=>(0,o._)("h2",null,"请填写账号",-1))),Si=Ai((()=>(0,o._)("div",{class:"cat-background"},null,-1))),Ii={class:"login"},Oi={class:"input"},Fi=Ai((()=>(0,o._)("h3",null,"找回账号",-1))),Ti=Ai((()=>(0,o._)("input",{class:"button",type:"submit",value:"找回密码"},null,-1))),Mi={key:0,class:"error-message",id:"b"};function Bi(e,t,s,i,n,a){const l=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("ul",Ci,[(0,o._)("div",Ui,[Di,(0,o.Wm)(l,{to:"/"},{default:(0,o.w5)((()=>[(0,o.Uk)("返回初始页面")])),_:1})]),Si]),(0,o._)("div",Ii,[(0,o._)("form",{onSubmit:t[1]||(t[1]=(0,r.iM)(((...e)=>a.submitForgetPassword&&a.submitForgetPassword(...e)),["prevent"]))},[(0,o._)("div",Oi,[Fi,(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>n.forgetName=e),placeholder:"请输入账号"},null,512),[[r.nr,n.forgetName]]),Ti])],32)]),n.error?((0,o.wg)(),(0,o.iD)("div",Mi,(0,h.zw)(n.error),1)):(0,o.kq)("",!0)],64)}var zi={data(){return{forgetName:"",error:null}},methods:{async submitForgetPassword(){try{const e={username:this.forgetName},t=await D.Z.post("/usr/forgetPwd-control",e,{headers:{"Content-Type":"application/json"}}),s=await t;"answer"===s.data.msg?(alert("找到用户！"),console.log(t.data.data),sessionStorage.setItem("forgetUsr",JSON.stringify(t.data.data)),this.$router.push({name:"SecretQuestion"})):"noName"===s.data.msg?alert("找不到该用户！"):alert("System Wrong!")}catch(e){console.log(e),this.error="找回密码时出错"}}}};const qi=(0,a.Z)(zi,[["render",Bi],["__scopeId","data-v-d337886c"]]);var Ni=qi;const Li=e=>((0,o.dD)("data-v-ee0f3110"),e=e(),(0,o.Cn)(),e),Vi=Li((()=>(0,o._)("h1",null,"游客访问页面",-1))),Zi=[Vi];function Qi(e,t,s,r,i,n){return(0,o.wg)(),(0,o.iD)("div",null,Zi)}var Gi={name:"GuestComponent"};const Ri=(0,a.Z)(Gi,[["render",Qi],["__scopeId","data-v-ee0f3110"]]);var Ki=Ri;const Ei=e=>((0,o.dD)("data-v-dfc935c8"),e=e(),(0,o.Cn)(),e),$i={style:{margin:"0px"}},Hi={key:0},Yi={class:"container"},ji={class:"centered-container"},Wi={style:{"border-collapse":"collapse",width:"80%","box-shadow":"0 2px 4px rgba(0,0,0,0.1)"},border:"1",align:"center",cellpadding:"10"},Ji=Ei((()=>(0,o._)("tr",null,[(0,o._)("th",null,"ID"),(0,o._)("th",null,"地址"),(0,o._)("th",null,"电话"),(0,o._)("th",null,"购买人姓名"),(0,o._)("th",null,"商品ID"),(0,o._)("th",null,"订单状态")],-1))),Xi={class:"pagination"},en=["disabled"],tn=["disabled"],sn={key:1},rn=Ei((()=>(0,o._)("span",null,[(0,o.Uk)("您还未登录，请先"),(0,o._)("a",{href:"/login"},"登录")],-1))),on=[rn];function nn(e,t,s,r,i,n){const a=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("div",$i,[i.isLoggedIn?((0,o.wg)(),(0,o.iD)("div",Hi,[(0,o._)("div",Yi,[(0,o.Wm)(a,{to:{name:"ShowAllUsers"}},{default:(0,o.w5)((()=>[(0,o.Uk)("返回")])),_:1}),(0,o._)("div",ji,[(0,o._)("h2",null,"用户 "+(0,h.zw)(s.userId)+" 的购买历史",1)]),(0,o._)("table",Wi,[Ji,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.paginatedOrders,(e=>((0,o.wg)(),(0,o.iD)("tr",{key:e.orderid},[(0,o._)("td",null,(0,h.zw)(e.orderid),1),(0,o._)("td",null,(0,h.zw)(e.address),1),(0,o._)("td",null,(0,h.zw)(e.telephone),1),(0,o._)("td",null,(0,h.zw)(e.buyername),1),(0,o._)("td",null,(0,h.zw)(e.goodid),1),(0,o._)("td",null,(0,h.zw)(n.getOrderStatus(e.orderstate)),1)])))),128))]),(0,o._)("div",Xi,[(0,o._)("button",{onClick:t[0]||(t[0]=(...e)=>n.goToPrevPage&&n.goToPrevPage(...e)),disabled:n.isPrevDisabled},"上一页",8,en),(0,o._)("span",null,(0,h.zw)(i.currentPage)+" / "+(0,h.zw)(n.totalPages),1),(0,o._)("button",{onClick:t[1]||(t[1]=(...e)=>n.goToNextPage&&n.goToNextPage(...e)),disabled:n.isNextDisabled},"下一页",8,tn)])])])):((0,o.wg)(),(0,o.iD)("div",sn,on))])}var an=s(65),ln={props:["userId"],data(){return{isLoggedIn:!0,orders:[],currentPage:1,pageSize:5,currentUser:{}}},computed:{...(0,an.Se)(["isSeller","isBuyer"]),totalPages(){return Math.max(1,Math.ceil(this.orders.length/this.pageSize))},paginatedOrders(){const e=(this.currentPage-1)*this.pageSize,t=e+this.pageSize;return this.orders.slice(e,t)},isPrevDisabled(){return 1===this.currentPage},isNextDisabled(){return this.currentPage>=this.totalPages}},methods:{async fetchUsrFromSession(){try{const e=await D.Z.get("/now-usr");this.currentUser=e.data,this.currentUser&&(this.isLoggedIn=!0)}catch(e){console.error("获取用户数据错误:",e),this.isLoggedIn=!1}},async fetchOrders(){try{await this.fetchUsrFromSession();const e=this.currentUser.power,t=await D.Z.get("/usr/UserOrderHistory-control",{params:{power:e,userid:this.usr}});t.data?(this.orders=t.data.data||[],console.log("获取用户历史数据列表成功")):console.error("获取用户历史数据列表失败")}catch(e){console.error("请求用户历史数据列表错误",e)}},getOrderStatus(e){const t={"-1":"交易取消",0:"等待客户下单",1:"等待商家确认",2:"等待备货确认",3:"等待发货确认",4:"商家已发货，等待交易确认",5:"交易成功"};return t[e]||"未知状态"},goToPrevPage(){this.currentPage>1&&this.currentPage--},goToNextPage(){this.currentPage<this.totalPages&&this.currentPage++}},mounted(){this.fetchOrders()}};const dn=(0,a.Z)(ln,[["render",nn],["__scopeId","data-v-dfc935c8"]]);var cn=dn;const un={class:"success-page"},hn=(0,o._)("h2",null,"成功界面",-1),gn={key:0},pn={key:1};function mn(e,t,s,r,i,n){const a=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("div",un,[hn,i.SuccessMessage?((0,o.wg)(),(0,o.iD)("div",gn,(0,h.zw)(i.SuccessMessage),1)):(0,o.kq)("",!0),i.redirectTo?((0,o.wg)(),(0,o.iD)("div",pn,[(0,o.Wm)(a,{to:i.redirectTo},{default:(0,o.w5)((()=>[(0,o.Uk)("返回页面")])),_:1},8,["to"])])):(0,o.kq)("",!0)])}var _n={data(){return{SuccessMessage:"",redirectTo:null}},created(){this.SuccessMessage=this.$route.query.message||"操作成功",this.redirectTo=this.$route.query.to||"/"}};const wn=(0,a.Z)(_n,[["render",mn]]);var vn=wn;const yn=e=>((0,o.dD)("data-v-d79644d6"),e=e(),(0,o.Cn)(),e),bn={class:"daohang"},kn={class:"title-container"},fn=yn((()=>(0,o._)("h2",null,"请回答密保问题",-1))),Pn=yn((()=>(0,o._)("div",{class:"cat-background"},null,-1))),xn={class:"login"},An={class:"input"},Cn=yn((()=>(0,o._)("input",{class:"button",type:"submit",value:"找回密码"},null,-1))),Un={key:0,class:"error-message",id:"b"};function Dn(e,t,s,i,n,a){const l=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("ul",bn,[(0,o._)("div",kn,[fn,(0,o.Wm)(l,{to:"/"},{default:(0,o.w5)((()=>[(0,o.Uk)("返回初始页面")])),_:1})]),Pn]),(0,o._)("div",xn,[(0,o._)("form",{onSubmit:t[1]||(t[1]=(0,r.iM)(((...e)=>a.submitSecretAnswer&&a.submitSecretAnswer(...e)),["prevent"]))},[(0,o._)("div",An,[(0,o._)("h3",null,"用户"+(0,h.zw)(n.storedUsr.username)+"，请您回答密保问题",1),(0,o._)("h3",null,(0,h.zw)(n.storedUsr.question),1),(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>n.secretAnswer=e),placeholder:"请输入答案"},null,512),[[r.nr,n.secretAnswer]]),Cn])],32)]),n.error?((0,o.wg)(),(0,o.iD)("div",Un,(0,h.zw)(n.error),1)):(0,o.kq)("",!0)],64)}var Sn={data(){return{storedUsr:JSON.parse(sessionStorage.getItem("forgetUsr")||"{}"),secretAnswer:"",error:""}},methods:{async submitSecretAnswer(){try{const e={answer:this.secretAnswer},t=await D.Z.post("/usr/answer-control",e,{headers:{"Content-Type":"application/json"}}),s=await t;"rightAnswer"===s.data.msg?(alert(`答案正确！您的密码是：${this.storedUsr.pwd}`),this.$router.push("/")):"badAnswer"===s.data.msg?alert("答案错误！请重新输入密保答案！"):alert("System Wrong!")}catch(e){this.error="回答密保问题时出错"}}}};const In=(0,a.Z)(Sn,[["render",Dn],["__scopeId","data-v-d79644d6"]]);var On=In;const Fn=e=>((0,o.dD)("data-v-27fdf777"),e=e(),(0,o.Cn)(),e),Tn={style:{margin:"0px"}},Mn={key:0},Bn={class:"left"},zn={class:"daohang"},qn=Fn((()=>(0,o._)("img",{class:"head1",src:we,alt:""},null,-1))),Nn={class:"head2"},Ln={class:"head4"},Vn={class:"head4"},Zn={class:"head4"},Qn={class:"head4"},Gn={class:"head5"},Rn={class:"right",style:{width:"75%"}},Kn={class:"container"},En=Fn((()=>(0,o._)("div",{class:"centered-container"},[(0,o._)("h2",null,"历史下单记录")],-1))),$n={style:{"border-collapse":"collapse",width:"100%","box-shadow":"0 2px 4px rgba(0,0,0,0.1)"},border:"1",align:"center",cellpadding:"10"},Hn=Fn((()=>(0,o._)("tr",null,[(0,o._)("th",null,"ID"),(0,o._)("th",null,"地址"),(0,o._)("th",null,"电话"),(0,o._)("th",null,"购买人姓名"),(0,o._)("th",null,"商品ID"),(0,o._)("th",null,"操作"),(0,o._)("th",null,"订单状态")],-1))),Yn=["onClick"],jn=["onClick"],Wn={key:2},Jn={class:"pagination"},Xn=["disabled"],ea=["disabled"],ta={key:1},sa=Fn((()=>(0,o._)("div",{class:"else"},[(0,o.Uk)(" 您还未登录，请先"),(0,o._)("a",{href:"/"},"登录")],-1))),ra=[sa];function oa(e,t,s,r,i,n){const a=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("body",Tn,[i.isLoggedIn?((0,o.wg)(),(0,o.iD)("div",Mn,[(0,o._)("div",Bn,[(0,o._)("table",zn,[qn,(0,o._)("tr",null,[(0,o._)("td",Nn,(0,h.zw)(n.username),1)]),(0,o._)("tr",null,[(0,o._)("td",Ln,[(0,o._)("h3",{onClick:t[0]||(t[0]=e=>n.navigateTo("BuyerCart")),class:"head4-1",style:{cursor:"pointer"}},"我的购物车")])]),(0,o._)("tr",null,[(0,o._)("td",Vn,[(0,o._)("h3",{onClick:t[1]||(t[1]=e=>n.navigateTo("BuyerLikes")),class:"head4-1",style:{cursor:"pointer"}},"我的收藏")])]),(0,o._)("tr",null,[(0,o._)("td",Zn,[(0,o._)("h3",{onClick:t[2]||(t[2]=e=>n.navigateTo("buyerHistory")),class:"head4-1",style:{cursor:"pointer"}},"历史购买记录")])]),(0,o._)("tr",null,[(0,o._)("td",Qn,[(0,o._)("h3",{onClick:t[3]||(t[3]=e=>n.navigateTo("BuyerMain")),class:"head4-1",style:{cursor:"pointer"}},"返回主页")])]),(0,o._)("tr",null,[(0,o._)("td",Gn,[(0,o._)("button",{onClick:t[4]||(t[4]=(...e)=>n.handleLogout&&n.handleLogout(...e)),class:"head5-1",style:{cursor:"pointer"}},"退出登录")])])])]),(0,o._)("div",Rn,[(0,o._)("div",Kn,[(0,o.Wm)(a,{to:{name:"BuyerMain"}},{default:(0,o.w5)((()=>[(0,o.Uk)(" 返回 ")])),_:1}),En,(0,o._)("table",$n,[Hn,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.paginatedOrders,(e=>((0,o.wg)(),(0,o.iD)("tr",{key:e.orderid},[(0,o._)("td",null,(0,h.zw)(e.orderid),1),(0,o._)("td",null,(0,h.zw)(e.address),1),(0,o._)("td",null,(0,h.zw)(e.telephone),1),(0,o._)("td",null,(0,h.zw)(e.buyername),1),(0,o._)("td",null,(0,h.zw)(e.goodid),1),(0,o._)("td",null,[4===e.orderstate?((0,o.wg)(),(0,o.iD)("button",{key:0,class:"green-btn",onClick:t=>n.handleOrderAction(e.orderid,"confirmCompletion"),style:{"background-color":"transparent",color:"#f44336",border:"2px solid #f44336",padding:"5px 10px","border-radius":"4px",cursor:"pointer"}},"确认交易完成",8,Yn)):(0,o.kq)("",!0),e.orderstate>=0&&e.orderstate<4?((0,o.wg)(),(0,o.iD)("button",{key:1,class:"red-btn",onClick:t=>n.handleOrderAction(e.orderid,"cancel"),style:{"background-color":"transparent",color:"#f44336",border:"2px solid #f44336",padding:"5px 10px","border-radius":"4px",cursor:"pointer"}},"取消订单",8,jn)):(0,o.kq)("",!0),e.orderstate>4||-1===e.orderstate?((0,o.wg)(),(0,o.iD)("span",Wn,"无法操作订单")):(0,o.kq)("",!0)]),(0,o._)("td",null,(0,h.zw)(n.getOrderStatus(e.orderstate)),1)])))),128))]),(0,o._)("div",Jn,[(0,o._)("button",{onClick:t[5]||(t[5]=(...e)=>n.goToPrevPage&&n.goToPrevPage(...e)),disabled:n.isPrevDisabled,class:"prev"},"上一页",8,Xn),(0,o._)("span",null,(0,h.zw)(i.currentPage)+" / "+(0,h.zw)(n.totalPages),1),(0,o._)("button",{onClick:t[6]||(t[6]=(...e)=>n.goToNextPage&&n.goToNextPage(...e)),disabled:n.isNextDisabled,class:"next"},"下一页",8,ea)])])])])):((0,o.wg)(),(0,o.iD)("div",ta,ra))])}var ia={data(){return{isLoggedIn:!0,orders:[],currentPage:1,pageSize:5,totalItems:8}},methods:{...(0,an.nv)(["logout"]),handleLogout(){this.logout(),this.$router.push("/")},navigateTo(e){this.$router.push({name:e})},beforeMount(){this.isLoggedIn||this.$router.push("/")},goBack(){this.$router.push({name:"BuyerMain"})},getOrderStatus(e){const t={"-1":"交易取消",0:"等待客户下单",1:"等待商家确认",2:"等待备货确认",3:"等待发货确认",4:"商家已发货，等待交易确认",5:"交易成功"};return t[e]||"未知状态"},handleOrderAction(e,t){switch(t){case"confirmCompletion":this.confirmOrder(e);break;case"cancel":this.cancelOrder(e);break;default:console.log("无效的操作")}},confirmOrder(e){const t=this.orders.find((t=>t.orderid===e));if(t){let s=t.orderstate+1;D.Z.post("/order/buyerhistoryconfirmorder-control",{orderid:e,orderstate:s}).then((e=>{e.data&&"确认订单成功"===e.data.msg?(t.orderstate=s,alert("该订单阶段确认成功！")):alert("该订单阶段确认失败！")})).catch((e=>{console.error("确认订单出错:",e)}))}},cancelOrder(e){const t=this.orders.find((t=>t.orderid===e));t&&D.Z.post("/order/deleteorder-control",{orderid:e,orderstate:-1}).then((e=>{e.data&&"取消订单成功"===e.data.msg?(t.orderstate=-1,alert("该订单取消成功！")):alert("该订单取消失败！")})).catch((e=>{console.error("取消订单出错:",e)}))},goToPrevPage(){this.currentPage>1&&(this.currentPage--,this.fetchOrders())},goToNextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchOrders())},async fetchUsrFromSession(){try{const e=await D.Z.get("/now-usr");this.currentUser=e.data,this.currentUser&&(this.isLoggedIn=!0)}catch(e){console.error("获取用户数据错误:",e),this.isLoggedIn=!1}},async fetchOrders(){console.log(1),await this.fetchUsrFromSession(),D.Z.get("/order/showbuyerorderinfo-control",{params:{name:this.currentUser.username}}).then((e=>{e.data&&e.data.data?(this.orders=e.data.data,console.log("获取意向订单数据列表成功")):console.error("获取意向订单数据列表失败")})).catch((e=>{console.error("获取意向订单数据列表错误",e)})),console.log(2)}},computed:{...(0,an.Se)(["isSeller","isBuyer"]),username(){return this.$store.state.admin?this.$store.state.admin.username:"未登录"},totalPages(){return 1>Math.ceil(this.orders.length/this.pageSize)?1:Math.ceil(this.orders.length/this.pageSize)},paginatedOrders(){const e=(this.currentPage-1)*this.pageSize,t=e+this.pageSize;return this.orders.slice(e,t)},isSeller(){return this.$store.getters.isSeller},isPrevDisabled(){return 1===this.currentPage},isNextDisabled(){return this.currentPage===this.totalPages}},mounted(){this.fetchOrders(),this.filteredUsers=this.orders}};const na=(0,a.Z)(ia,[["render",oa],["__scopeId","data-v-27fdf777"]]);var aa=na;const la=e=>((0,o.dD)("data-v-7545a467"),e=e(),(0,o.Cn)(),e),da={style:{margin:"0px"}},ca={key:0},ua={class:"left"},ha={class:"daohang"},ga=la((()=>(0,o._)("img",{class:"head1",src:we,alt:""},null,-1))),pa={class:"head2"},ma={class:"head4"},_a={class:"head4"},wa={class:"head4"},va={class:"head4"},ya={class:"head5"},ba={class:"right",style:{width:"50%"}},ka={class:"container"},fa=la((()=>(0,o._)("div",{class:"centered-container"},[(0,o._)("h2",null,"我的收藏")],-1))),Pa={border:"1px",align:"center",cellspacing:"0",style:{width:"90%"}},xa=la((()=>(0,o._)("tr",null,[(0,o._)("th",null,"展示内容"),(0,o._)("th",null,"名称"),(0,o._)("th",null,"描述"),(0,o._)("th",null,"操作")],-1))),Aa={class:"table-column"},Ca={style:{display:"flex","justify-content":"center","align-items":"center"}},Ua={style:{"text-align":"center"}},Da=["src"],Sa={key:0,class:"overlay"},Ia={class:"table-column"},Oa={class:"centered-container"},Fa={class:"table-column"},Ta={class:"centered-container"},Ma={class:"centered-container"},Ba=["onClick"],za={class:"pagination"},qa=["disabled"],Na={id:"page-info"},La=["disabled"],Va={key:1,class:"else"},Za=la((()=>(0,o._)("a",{href:"login"},"登录",-1)));function Qa(e,t,s,i,n,a){return(0,o.wg)(),(0,o.iD)("body",da,[n.isLoggedIn?((0,o.wg)(),(0,o.iD)("div",ca,[(0,o._)("div",ua,[(0,o._)("table",ha,[ga,(0,o._)("tr",null,[(0,o._)("td",pa,(0,h.zw)(a.username),1)]),(0,o._)("tr",null,[(0,o._)("td",ma,[(0,o._)("h3",{onClick:t[0]||(t[0]=e=>a.navigateTo("BuyerCart")),class:"head4-1",style:{cursor:"pointer"}},"我的购物车")])]),(0,o._)("tr",null,[(0,o._)("td",_a,[(0,o._)("h3",{onClick:t[1]||(t[1]=e=>a.navigateTo("BuyerLikes")),class:"head4-1",style:{cursor:"pointer"}},"我的收藏")])]),(0,o._)("tr",null,[(0,o._)("td",wa,[(0,o._)("h3",{onClick:t[2]||(t[2]=e=>a.navigateTo("buyerHistory")),class:"head4-1",style:{cursor:"pointer"}},"历史购买记录")])]),(0,o._)("tr",null,[(0,o._)("td",va,[(0,o._)("h3",{onClick:t[3]||(t[3]=e=>a.navigateTo("BuyerMain")),class:"head4-1",style:{cursor:"pointer"}},"返回主页")])]),(0,o._)("tr",null,[(0,o._)("td",ya,[(0,o._)("button",{onClick:t[4]||(t[4]=(...e)=>a.handleLogout&&a.handleLogout(...e)),class:"head5-1",style:{cursor:"pointer"}},"退出登录")])])])]),(0,o._)("div",ba,[(0,o._)("div",ka,[fa,(0,o._)("table",Pa,[xa,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.paginatedItems,(e=>((0,o.wg)(),(0,o.iD)("tr",{key:e.GOODID},[(0,o._)("td",Aa,[(0,o._)("div",Ca,[(0,o._)("div",Ua,[(0,o._)("div",{class:(0,h.C_)(["media-container",{"sold-out":0!==e.state}])},[(0,o.wy)((0,o._)("div",null,[(0,o._)("img",{src:e.PICTURE,alt:"商品图片"},null,8,Da)],512),[[r.F8,""!==e.PICTURE]])],2),0!==e.state?((0,o.wg)(),(0,o.iD)("div",Sa,"商品不可购买")):(0,o.kq)("",!0)])])]),(0,o._)("td",Ia,[(0,o._)("div",Oa,(0,h.zw)(e.GOODNAME),1)]),(0,o._)("td",Fa,[(0,o._)("div",Ta,(0,h.zw)(e.DESCRIPTION),1)]),(0,o._)("td",null,[(0,o._)("div",Ma,[(0,o._)("button",{class:"delete-button",onClick:t=>a.dislike(e.GOODID,1)},"取消收藏",8,Ba)])])])))),128))]),(0,o._)("div",za,[(0,o._)("button",{onClick:t[5]||(t[5]=(...e)=>a.goToPrevPage&&a.goToPrevPage(...e)),class:"prev",disabled:1===n.currentPage},"上一页",8,qa),(0,o._)("span",Na,"第 "+(0,h.zw)(n.currentPage)+" / "+(0,h.zw)(a.totalPages)+" 页",1),(0,o._)("button",{onClick:t[6]||(t[6]=(...e)=>a.goToNextPage&&a.goToNextPage(...e)),class:"next",disabled:n.currentPage===a.totalPages},"下一页",8,La)])])])])):((0,o.wg)(),(0,o.iD)("div",Va,[(0,o.Uk)(" 您还未登录，请先"),Za]))])}D.Z.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded";var Ga={data(){return{items:[],searchQuery:"",selectedCategory:"猫咪主粮",filteredItems:[],currentPage:1,itemsPerPage:2,search:{keyword:"",kind:"猫咪主粮"},isLoggedIn:!0,currentUser:{}}},computed:{...(0,an.Se)(["isLoggedIn","isSeller","isBuyer"]),username(){return this.$store.state.admin?this.$store.state.admin.username:"未登录"},paginatedItems(){const e=(this.currentPage-1)*this.itemsPerPage,t=this.currentPage*this.itemsPerPage;return this.items.slice(e,t)},totalPages(){return Math.ceil(this.items.length/this.itemsPerPage)}},created(){this.fetchUsrFromSession()},methods:{...(0,an.nv)(["logout"]),dislike(e,t){D.Z.post("/good/addLike",{goodid:e,iscancel:t,userid:this.currentUser.userid}).then((e=>{console.log(e),alert("商品已取消收藏！"),this.getLiskLIst(this.currentUser.userid)})).catch((e=>{console.error(e)}))},handleLogout(){this.logout(),this.$router.push("/")},navigateTo(e){this.$router.push({name:e})},beforeMount(){this.isLoggedIn||this.$router.push("/")},async fetchUsrFromSession(){try{const e=await D.Z.get("/now-usr"),t=e.data;return this.currentUser=t,this.getLiskLIst(this.currentUser.userid),!0}catch(e){return console.error("获取用户数据错误:",e),!1}},getLiskLIst(e){D.Z.post("/cart/showLike",{userId:e}).then((e=>{this.items=e.data,this.items.forEach((e=>{console.log(e)}))})).catch((e=>{console.error(e)}))},handleSearch(){this.items=this.items.filter((e=>{const t=!this.searchQuery||e.name.toLowerCase().includes(this.searchQuery.toLowerCase()),s=!this.selectedCategory||e.kind===this.selectedCategory;return console.log(`Item: ${e.name}, Keyword Match: ${t}, Category Match: ${s}`),t&&s})),console.log("Filtered items count:",this.items.length)},showPrevMedia(e){const t=e.mediaFiles.findIndex((e=>e.isActive));if(console.log("Current active index:",t),t>=0){const s=(t-1+e.mediaFiles.length)%e.mediaFiles.length;console.log("Previous index:",s),this.setActiveMedia(e,s)}},showNextMedia(e){const t=e.mediaFiles.findIndex((e=>e.isActive));if(console.log("Current active index:",t),t>=0){const s=(t+1)%e.mediaFiles.length;console.log("Next index:",s),this.setActiveMedia(e,s)}},setActiveMedia(e,t){e.mediaFiles.forEach(((e,s)=>{e.isActive=s===t,console.log(`Media at index ${s} active status: `,e.isActive)}))},goToPrevPage(){this.currentPage>1&&(this.currentPage--,console.log("Current page after prev:",this.currentPage))},goToNextPage(){this.currentPage<this.totalPages&&(this.currentPage++,console.log("Current page after next:",this.currentPage))},resetPage(){this.currentPage=1}},watch:{items(e,t){e!==t&&this.resetPage()}},mounted(){this.filteredItems=this.items}};const Ra=(0,a.Z)(Ga,[["render",Qa],["__scopeId","data-v-7545a467"]]);var Ka=Ra;const Ea=e=>((0,o.dD)("data-v-da21a5fe"),e=e(),(0,o.Cn)(),e),$a={style:{margin:"0px"}},Ha={key:0},Ya={class:"left"},ja={class:"daohang"},Wa=Ea((()=>(0,o._)("img",{class:"head1",src:we,alt:""},null,-1))),Ja={class:"head2"},Xa={class:"head4"},el={class:"head4"},tl={class:"head4"},sl={class:"head4"},rl={class:"head5"},ol={class:"right",style:{width:"60%",margin:"0px"}},il={class:"container"},nl=Ea((()=>(0,o._)("div",{class:"centered-container"},[(0,o._)("h2",null,"我的购物车")],-1))),al={border:"1px",align:"center",cellspacing:"0",style:{width:"100%"}},ll=Ea((()=>(0,o._)("tr",null,[(0,o._)("th",{class:"table-column"},"展示内容"),(0,o._)("th",{class:"table-column"},"名称"),(0,o._)("th",{class:"table-column"},"购买数量"),(0,o._)("th",{class:"table-column"},"小计"),(0,o._)("th",{class:"table-column"},"操作"),(0,o._)("th",{class:"table-column"},"选择")],-1))),dl={class:"table-column"},cl={style:{display:"flex","justify-content":"center","align-items":"center"}},ul={style:{"text-align":"center"}},hl=["src"],gl={key:0,class:"overlay"},pl={class:"table-column"},ml={class:"centered-container"},_l={class:"table-column"},wl={class:"centered-container"},vl=["onClick"],yl=["onUpdate:modelValue","disabled"],bl=["onClick"],kl={class:"table-column"},fl={class:"centered-container"},Pl={class:"table-column"},xl={class:"centered-container"},Al=["onClick"],Cl=["onClick"],Ul={class:"table-column"},Dl={class:"centered-container"},Sl=["onUpdate:modelValue"],Il={class:"pagination"},Ol=["disabled"],Fl=["disabled"],Tl={key:1,class:"else"},Ml=Ea((()=>(0,o._)("a",{href:"login"},"登录",-1)));function Bl(e,t,s,i,n,a){return(0,o.wg)(),(0,o.iD)("body",$a,[n.isLoggedIn?((0,o.wg)(),(0,o.iD)("div",Ha,[(0,o._)("div",Ya,[(0,o._)("table",ja,[Wa,(0,o._)("tr",null,[(0,o._)("td",Ja,(0,h.zw)(a.username),1)]),(0,o._)("tr",null,[(0,o._)("td",Xa,[(0,o._)("h3",{onClick:t[0]||(t[0]=e=>a.navigateTo("BuyerCart")),class:"head4-1",style:{cursor:"pointer"}},"我的购物车")])]),(0,o._)("tr",null,[(0,o._)("td",el,[(0,o._)("h3",{onClick:t[1]||(t[1]=e=>a.navigateTo("BuyerLikes")),class:"head4-1",style:{cursor:"pointer"}},"我的收藏")])]),(0,o._)("tr",null,[(0,o._)("td",tl,[(0,o._)("h3",{onClick:t[2]||(t[2]=e=>a.navigateTo("buyerHistory")),class:"head4-1",style:{cursor:"pointer"}},"历史购买记录")])]),(0,o._)("tr",null,[(0,o._)("td",sl,[(0,o._)("h3",{onClick:t[3]||(t[3]=e=>a.navigateTo("BuyerMain")),class:"head4-1",style:{cursor:"pointer"}},"返回主页")])]),(0,o._)("tr",null,[(0,o._)("td",rl,[(0,o._)("button",{onClick:t[4]||(t[4]=(...e)=>a.handleLogout&&a.handleLogout(...e)),class:"head5-1",style:{cursor:"pointer"}},"退出登录")])])])]),(0,o._)("div",ol,[(0,o._)("div",il,[nl,(0,o._)("button",{id:"editall-button",onClick:t[5]||(t[5]=(...e)=>a.toggleEdit&&a.toggleEdit(...e))},(0,h.zw)(a.editButtonText),1),(0,o._)("table",al,[ll,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.visibleItems,(e=>((0,o.wg)(),(0,o.iD)("tr",{key:e.id},[(0,o._)("td",dl,[(0,o._)("div",cl,[(0,o._)("div",ul,[(0,o._)("div",{class:(0,h.C_)(["media-container",{"sold-out":0!==e.state}])},[(0,o.wy)((0,o._)("div",null,[(0,o._)("img",{src:e.MEDIAFILES,alt:"商品图片"},null,8,hl)],512),[[r.F8,""!==e.MEDIAFILES]])],2),0!==e.state?((0,o.wg)(),(0,o.iD)("div",gl,"商品不可购买")):(0,o.kq)("",!0)])])]),(0,o._)("td",pl,[(0,o._)("div",ml,(0,h.zw)(e.NAME),1)]),(0,o._)("td",_l,[(0,o._)("div",wl,[n.isEditing?((0,o.wg)(),(0,o.iD)("button",{key:0,onClick:t=>a.decrementQuantity(e)},"-",8,vl)):(0,o.kq)("",!0),(0,o.wy)((0,o._)("input",{type:"number","onUpdate:modelValue":t=>e.quantity=t,disabled:!n.isEditing,style:{width:"64.6px"}},null,8,yl),[[r.nr,e.quantity,void 0,{number:!0}]]),n.isEditing?((0,o.wg)(),(0,o.iD)("button",{key:1,onClick:t=>a.incrementQuantity(e)},"+",8,bl)):(0,o.kq)("",!0)])]),(0,o._)("td",kl,[(0,o._)("div",fl,(0,h.zw)(e.PRICE*e.quantity),1)]),(0,o._)("td",Pl,[(0,o._)("div",xl,[(0,o._)("button",{onClick:t=>a.addToFavorites(e.ID,0)},"收藏",8,Al),n.isEditing?((0,o.wg)(),(0,o.iD)("button",{key:0,onClick:t=>a.removeFromCart(e.ID)},"删除",8,Cl)):(0,o.kq)("",!0)])]),(0,o._)("td",Ul,[(0,o._)("div",Dl,[(0,o.wy)((0,o._)("input",{type:"checkbox","onUpdate:modelValue":t=>n.selectedItems[e.id]=t},null,8,Sl),[[r.e8,n.selectedItems[e.id]]])])])])))),128))]),(0,o._)("div",null,[(0,o._)("h3",null,"总计: "+(0,h.zw)(a.selectedTotalPrice),1),(0,o._)("button",{onClick:t[6]||(t[6]=(...e)=>a.submitSelectedOrders&&a.submitSelectedOrders(...e))},"提交选中的订单"),(0,o._)("button",{onClick:t[7]||(t[7]=(...e)=>a.addToFavoritesSelectedItems&&a.addToFavoritesSelectedItems(...e))},"一键收藏选中商品")]),(0,o._)("div",Il,[(0,o._)("button",{onClick:t[8]||(t[8]=(...e)=>a.goToPrevPage&&a.goToPrevPage(...e)),disabled:e.isPrevDisabled,class:"prev"},"上一页",8,Ol),(0,o._)("span",null,(0,h.zw)(n.currentPage)+" / "+(0,h.zw)(a.totalPages),1),(0,o._)("button",{onClick:t[9]||(t[9]=(...e)=>a.goToNextPage&&a.goToNextPage(...e)),disabled:e.isNextDisabled,class:"next"},"下一页",8,Fl)])])])])):((0,o.wg)(),(0,o.iD)("div",Tl,[(0,o.Uk)(" 您还未登录，请先"),Ml]))])}D.Z.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded";var zl={data(){return{items:[],favorites:[],searchQuery:"",selectedCategory:"猫咪主粮",search:{keyword:"",kind:"猫咪主粮"},isLoggedIn:!0,selectedItems:{},currentPage:1,itemsPerPage:2,isEditing:!0,currentUser:{}}},computed:{...(0,an.Se)(["isLoggedIn","isSeller","isBuyer"]),visibleItems(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;return this.items.slice(e,t)},username(){return this.$store.state.admin?this.$store.state.admin.username:"未登录"},paginatedItems(){const e=(this.currentPage-1)*this.itemsPerPage,t=this.currentPage*this.itemsPerPage;return this.filteredItems.slice(e,t)},totalPages(){return Math.ceil(this.filteredItems.length/this.itemsPerPage)},selectedTotalPrice(){return Object.keys(this.selectedItems).reduce(((e,t)=>{const s=this.cartItems.find((e=>e.ID===Number(t)));return s&&this.selectedItems[t]?e+s.PRICE*s.quantity:e}),0)},editButtonText(){return this.isEditing?"查看":"编辑"}},created(){this.cartItems=this.items,this.filteredItems=this.cartItems,this.fetchCartItems(),this.fetchCartItems(),this.fetchUsrFromSession()},methods:{...(0,an.nv)(["logout"]),isItemVisible(e){const t=(this.currentPage-1)*this.itemsPerPage,s=t+this.itemsPerPage;return e>=t&&e<s},async fetchUsrFromSession(){try{const e=await D.Z.get("/now-usr"),t=e.data;return this.currentUser=t,this.getLIst(this.currentUser.userid),!0}catch(e){return console.error("获取用户数据错误:",e),!1}},getLIst(e){D.Z.get("/cart/allCart?userId="+e).then((e=>{this.items=e.data})).catch((e=>{console.error(e)}))},handleLogout(){this.logout(),this.$router.push("/")},navigateTo(e){this.$router.push({name:e})},beforeMount(){this.isLoggedIn||this.$router.push("/")},fetchCartItems(){},toggleEdit(){this.isEditing=!this.isEditing,this.isEditing||this.updateCart()},incrementQuantity(e){e.quantity<e.MAXQUANTITY&&e.quantity++},decrementQuantity(e){e.quantity>1&&e.quantity--},removeFromCart(e){D.Z.post("/cart/delete-cart-item",{buyingid:e,userid:this.currentUser.userid}).then((e=>{this.items=e.data,this.getLIst(this.currentUser.userid),alert("选中的订单已删除！")})).catch((e=>{console.error(e)}))},addToFavorites(e,t){D.Z.post("/cart/addLike",{goodid:e,iscancel:t,userid:this.currentUser.userid}).then((e=>{alert("商品已添加到收藏夹！"),console.log(e),this.getLIst(this.currentUser.userid)})).catch((e=>{console.error(e)}))},submitSelectedOrders(){this.items=this.items.filter((e=>!this.selectedItems[e.ID])),this.selectedItems={},alert("选中的订单已提交！")},addToFavoritesSelectedItems(){alert("选中的商品已收藏！"),this.selectedItems={}},changePage(e){this.currentPage=e},updateCart(){},showPrevMedia(e){const t=0;if(console.log("Current active index:",t),t>=0){const s=(t-1+e.MEDIAFILES.length)%e.MEDIAFILES.length;console.log("Previous index:",s),this.setActiveMedia(e,s)}},showNextMedia(e){const t=0;if(console.log("Current active index:",t),t>=0){const s=(t+1)%e.MEDIAFILES.length;console.log("Next index:",s),this.setActiveMedia(e,s)}},setActiveMedia(e,t){e.mediaFiles.forEach(((e,s)=>{e.isActive=s===t,console.log(`Media at index ${s} active status: `,e.isActive)}))},goToPrevPage(){this.currentPage>1&&(this.currentPage--,console.log("Current page after prev:",this.currentPage))},goToNextPage(){this.currentPage<this.totalPages&&(this.currentPage++,console.log("Current page after next:",this.currentPage))},resetPage(){this.currentPage=1}},watch:{filteredItems(e,t){e!==t&&this.resetPage()}},mounted(){this.filteredItems=this.items}};const ql=(0,a.Z)(zl,[["render",Bl],["__scopeId","data-v-da21a5fe"]]);var Nl=ql,Ll="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFEAAABRBAMAAABYoVcFAAAAG1BMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACUUeIgAAAACXRSTlMA/99/v0Agn2B4dSdqAAAAe0lEQVR4nO3WwQ1AUBCE4U1oYDlwFAl3HRANUIU6dC6jgv8iSGbOk++9vWw2nD9n6jdWLDNH1lwya0pmQ8lsKZkzJStMdiZNmnySPCkZmLybbL9poAE1d/0ToYWeZ+hk1KjR91B22whlt41QdtsIZaZQtvcijhUWna/kAmZUH+sovcNdAAAAAElFTkSuQmCC";const Vl=e=>((0,o.dD)("data-v-e7634f64"),e=e(),(0,o.Cn)(),e),Zl={style:{"background-color":"#FFF9F1"}},Ql=Vl((()=>(0,o._)("hr",{class:"cline",color:"#BBBBBB",width:"1",size:"900"},null,-1))),Gl={class:"left"},Rl=Vl((()=>(0,o._)("a",{href:"/#/buyer"},[(0,o._)("img",{src:Ll,alt:"",width:"40",title:"返回商品界面"})],-1))),Kl={class:"good-2"},El={colspan:"2",class:"goodname"},$l={colspan:"2",class:"description"},Hl=Vl((()=>(0,o._)("br",null,null,-1))),Yl=Vl((()=>(0,o._)("td",{class:"price"},"总价：",-1))),jl={class:"price"},Wl=Vl((()=>(0,o._)("td",{class:"price"},"剩余库存量：",-1))),Jl={class:"price"},Xl={class:"right"},ed={class:"username"},td={class:"form-group"},sd=Vl((()=>(0,o._)("label",null,"购买数量：",-1))),rd=["max"],od={class:"form-group"},id=Vl((()=>(0,o._)("label",null,"姓名：",-1))),nd=Vl((()=>(0,o._)("br",null,null,-1))),ad={class:"form-group"},ld=Vl((()=>(0,o._)("label",null,"电话：",-1))),dd=Vl((()=>(0,o._)("br",null,null,-1))),cd={class:"form-group"},ud=Vl((()=>(0,o._)("label",null,"交易地点：",-1))),hd=Vl((()=>(0,o._)("br",null,null,-1))),gd=Vl((()=>(0,o._)("button",{type:"submit",class:"butt-2"},"确认购买",-1)));function pd(e,t,s,i,n,a){return(0,o.wg)(),(0,o.iD)("body",Zl,[Ql,(0,o._)("div",Gl,[Rl,(0,o._)("table",Kl,[(0,o._)("tr",null,[(0,o._)("td",El,(0,h.zw)(n.selectedProduct.goodname),1)]),(0,o._)("tr",null,[(0,o._)("td",$l,[Hl,(0,o.Uk)((0,h.zw)(n.selectedProduct.description),1)])]),(0,o._)("tr",null,[Yl,(0,o._)("td",jl,(0,h.zw)(n.selectedProduct.price),1)]),(0,o._)("tr",null,[Wl,(0,o._)("td",Jl,(0,h.zw)(n.selectedProduct.number),1)])]),(0,o._)("button",{onClick:t[0]||(t[0]=(...e)=>a.cancelPurchase&&a.cancelPurchase(...e)),class:"butt-2"},"取消购买")]),(0,o._)("div",Xl,[(0,o._)("form",{onSubmit:t[5]||(t[5]=(0,r.iM)(((...e)=>a.confirmPurchase&&a.confirmPurchase(...e)),["prevent"])),class:"buy-imf"},[(0,o._)("label",ed,[(0,o._)("div",td,[sd,(0,o.wy)((0,o._)("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=e=>n.purchase.number=e),min:"1",max:n.selectedProduct.number,required:"",style:{width:"200px",height:"66.4px"}},null,8,rd),[[r.nr,n.purchase.number,void 0,{number:!0}]])]),(0,o._)("div",od,[id,(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>n.purchase.buyerName=e),required:""},null,512),[[r.nr,n.purchase.buyerName]])]),nd,(0,o._)("div",ad,[ld,(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>n.purchase.telephone=e),required:""},null,512),[[r.nr,n.purchase.telephone]])]),dd,(0,o._)("div",cd,[ud,(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>n.purchase.address=e),required:""},null,512),[[r.nr,n.purchase.address]])]),hd]),gd],32)])])}var md={data(){return{selectedProduct:{},purchase:{quantity:1,buyerName:"buyer",telephone:"12345678901",address:"`123`"}}},created(){this.fetchGoodFromSession(),this.fetchUsrFromSession()},methods:{async fetchUsrFromSession(){try{const e=await D.Z.get("/now-usr"),t=e.data;return this.currentUser=t,!0}catch(e){return console.error("获取用户数据错误:",e),!1}},async fetchGoodFromSession(){try{const e=await D.Z.get("/now-good"),t=e.data,s=t.picture.trim(),r=s.split(","),o=r.map(((e,t)=>({url:e,isActive:0===t})));return this.selectedProduct={...t,mediaFiles:o,goodid:t.goodid,goodname:t.goodname.trim(),description:t.description.trim(),price:t.price,number:t.number,kind:t.kind,subkind:t.subkind,buyingid:t.buyingid,numbermax:t.numbermax,islike:t.islike},console.log("this.selectedProduct:",this.selectedProduct),console.log("this.selectedProduct.goodname:",this.selectedProduct.goodname),!0}catch(e){return console.error("获取用户数据错误:",e),!1}},cancelPurchase(){this.$router.push("/buyer")},confirmPurchase(){this.validateForm()&&(alert("成功创建订单！"),this.$router.push("/buyer"))},validateForm(){const e=/^[0-9]{11}$/;return e.test(this.purchase.telephone)?this.purchase.buyerName.length>10?(alert("用户名不能超过10个字符！"),!1):!(this.purchase.address.length>99)||(alert("地址不能超过99个字符！"),!1):(alert("电话号码需要是11位数字！"),!1)}}};const _d=(0,a.Z)(md,[["render",pd],["__scopeId","data-v-e7634f64"]]);var wd=_d;const vd=e=>((0,o.dD)("data-v-dea9770e"),e=e(),(0,o.Cn)(),e),yd={style:{margin:"0px"}},bd={key:0},kd={class:"left"},fd={class:"daohang"},Pd=vd((()=>(0,o._)("img",{class:"head1",src:we,alt:""},null,-1))),xd={class:"head2"},Ad={class:"head4"},Cd={class:"head4"},Ud={class:"head4"},Dd={class:"head4"},Sd={class:"head5"},Id={class:"right",style:{width:"100%"}},Od=vd((()=>(0,o._)("a",{href:"/#/buyer"},[(0,o._)("img",{src:Ll,alt:"",width:"40",title:"返回商品界面"})],-1))),Fd={class:"picture-k"},Td=["src"],Md=["src"],Bd={class:"media-navigation"},zd={class:"good-2"},qd={colspan:"2",class:"goodname"},Nd={colspan:"2",class:"description"},Ld=vd((()=>(0,o._)("td",{class:"price"},"价格：",-1))),Vd={class:"price"},Zd=vd((()=>(0,o._)("td",{class:"price"},"剩余库存量：",-1))),Qd={class:"price"},Gd={class:"centered-container"},Rd={key:1},Kd={class:"else"},Ed={class:"left"},$d={class:"daohang"},Hd=vd((()=>(0,o._)("img",{class:"head1",src:we,alt:""},null,-1))),Yd=vd((()=>(0,o._)("tr",null,[(0,o._)("td",{class:"head2"},"游客")],-1))),jd=vd((()=>(0,o._)("tr",null,[(0,o._)("td",{class:"head4"},[(0,o._)("h3",{class:"head4-1"},"其他功能后登录使用")])],-1))),Wd={class:"head5"},Jd={class:"right",style:{width:"100%"}},Xd=vd((()=>(0,o._)("a",{href:"/buyer"},[(0,o._)("img",{src:Ll,alt:"",width:"40",title:"返回商品界面"})],-1))),ec={class:"picture-k"},tc=["src"],sc=["src"],rc={class:"media-navigation"},oc={class:"good-2"},ic={colspan:"2",class:"goodname"},nc={colspan:"2",class:"description"},ac=vd((()=>(0,o._)("td",{class:"price"},"价格：",-1))),lc={class:"price"},dc=vd((()=>(0,o._)("td",{class:"price"},"剩余库存量：",-1))),cc={class:"price"},uc={class:"centered-container"};function hc(e,t,s,i,n,a){return(0,o.wg)(),(0,o.iD)("body",yd,[a.isLoggedIn?((0,o.wg)(),(0,o.iD)("div",bd,[(0,o._)("div",kd,[(0,o._)("table",fd,[Pd,(0,o._)("tr",null,[(0,o._)("td",xd,(0,h.zw)(e.username),1)]),(0,o._)("tr",null,[(0,o._)("td",Ad,[(0,o._)("h3",{onClick:t[0]||(t[0]=e=>a.navigateTo("BuyerCart")),class:"head4-1",style:{cursor:"pointer"}},"我的购物车")])]),(0,o._)("tr",null,[(0,o._)("td",Cd,[(0,o._)("h3",{onClick:t[1]||(t[1]=e=>a.navigateTo("BuyerLikes")),class:"head4-1",style:{cursor:"pointer"}},"我的收藏")])]),(0,o._)("tr",null,[(0,o._)("td",Ud,[(0,o._)("h3",{onClick:t[2]||(t[2]=e=>a.navigateTo("buyerHistory")),class:"head4-1",style:{cursor:"pointer"}},"历史购买记录")])]),(0,o._)("tr",null,[(0,o._)("td",Dd,[(0,o._)("h3",{onClick:t[3]||(t[3]=e=>a.navigateTo("BuyerMain")),class:"head4-1",style:{cursor:"pointer"}},"返回主页")])]),(0,o._)("tr",null,[(0,o._)("td",Sd,[(0,o._)("button",{onClick:t[4]||(t[4]=(...e)=>a.handleLogout&&a.handleLogout(...e)),class:"head5-1",style:{cursor:"pointer"}},"退出登录")])])])]),(0,o._)("div",Id,[Od,(0,o._)("div",Fd,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.selectedProduct.mediaFiles,((e,s)=>(0,o.wy)(((0,o.wg)(),(0,o.iD)("div",{class:"media-container",key:s},[e.isVideo?((0,o.wg)(),(0,o.iD)("video",{key:1,src:e.url,controls:"",class:"product-video",style:{width:"200px"}},null,8,Md)):((0,o.wg)(),(0,o.iD)("img",{key:0,src:e.url,alt:"商品图片",class:"product-image",style:{width:"415.8px",height:"504.9px"}},null,8,Td)),(0,o._)("div",Bd,[(0,o._)("button",{class:"media-navigation-button prev-button",onClick:t[5]||(t[5]=e=>a.showPrevMedia(n.selectedProduct))},"＜"),(0,o._)("button",{class:"media-navigation-button next-button",onClick:t[6]||(t[6]=e=>a.showNextMedia(n.selectedProduct))},"＞")])])),[[r.F8,e.isActive]]))),128))]),(0,o._)("table",zd,[(0,o._)("tr",null,[(0,o._)("td",qd,(0,h.zw)(n.selectedProduct.name),1)]),(0,o._)("tr",null,[(0,o._)("td",Nd,(0,h.zw)(n.selectedProduct.description),1)]),(0,o._)("tr",null,[Ld,(0,o._)("td",Vd,(0,h.zw)(n.selectedProduct.price),1)]),(0,o._)("tr",null,[Zd,(0,o._)("td",Qd,(0,h.zw)(n.selectedProduct.number),1)])]),(0,o._)("div",Gd,[(0,o._)("button",{onClick:t[7]||(t[7]=e=>a.buyProduct(n.selectedProduct.id)),class:"butt-1",style:{cursor:"pointer"}},"购买该商品"),(0,o.Uk)("   "),(0,o._)("button",{onClick:t[8]||(t[8]=e=>a.addToCart(n.selectedProduct.id)),class:"butt-1",style:{cursor:"pointer"}},"加入购物车"),(0,o.Uk)("   "),(0,o._)("button",{onClick:t[9]||(t[9]=e=>a.addToFavorites(n.selectedProduct.id)),class:"butt-1",style:{cursor:"pointer"}},"收藏商品")])])])):((0,o.wg)(),(0,o.iD)("div",Rd,[(0,o._)("div",Kd,[(0,o._)("div",Ed,[(0,o._)("table",$d,[Hd,Yd,jd,(0,o._)("tr",null,[(0,o._)("td",Wd,[(0,o._)("button",{onClick:t[10]||(t[10]=(...e)=>a.handleLogout&&a.handleLogout(...e)),class:"head5-1",style:{cursor:"pointer"}},"返回登录")])])])]),(0,o._)("div",Jd,[Xd,(0,o._)("div",ec,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.selectedProduct.mediaFiles,((e,s)=>(0,o.wy)(((0,o.wg)(),(0,o.iD)("div",{class:"media-container",key:s},[e.isVideo?((0,o.wg)(),(0,o.iD)("video",{key:1,src:e.url,controls:"",class:"product-video",style:{width:"200px"}},null,8,sc)):((0,o.wg)(),(0,o.iD)("img",{key:0,src:e.url,alt:"商品图片",class:"product-image",style:{width:"415.8px",height:"504.9px"}},null,8,tc)),(0,o._)("div",rc,[(0,o._)("button",{class:"media-navigation-button prev-button",onClick:t[11]||(t[11]=e=>a.showPrevMedia(n.selectedProduct))},"＜"),(0,o._)("button",{class:"media-navigation-button next-button",onClick:t[12]||(t[12]=e=>a.showNextMedia(n.selectedProduct))},"＞")])])),[[r.F8,e.isActive]]))),128))]),(0,o._)("table",oc,[(0,o._)("tr",null,[(0,o._)("td",ic,(0,h.zw)(n.selectedProduct.goodname),1)]),(0,o._)("tr",null,[(0,o._)("td",nc,(0,h.zw)(n.selectedProduct.description),1)]),(0,o._)("tr",null,[ac,(0,o._)("td",lc,(0,h.zw)(n.selectedProduct.price),1)]),(0,o._)("tr",null,[dc,(0,o._)("td",cc,(0,h.zw)(n.selectedProduct.number),1)])]),(0,o._)("div",uc,[(0,o._)("button",{onClick:t[13]||(t[13]=e=>a.buyProduct(n.selectedProduct.goodid)),class:"butt-1",style:{cursor:"pointer"}},"购买该商品"),(0,o.Uk)("   "),(0,o._)("button",{onClick:t[14]||(t[14]=e=>a.addToCart()),class:"butt-1",style:{cursor:"pointer"}},"加入购物车"),(0,o.Uk)("   "),(0,o._)("button",{onClick:t[15]||(t[15]=e=>a.addToFavorites()),class:"butt-1",style:{cursor:"pointer"}},"收藏商品")])])])]))])}var gc={data(){return{items:[],searchQuery:"",selectedProduct:[],currentUser:"",selectedCategory:"猫咪主粮",filteredItems:[],currentPage:1,itemsPerPage:2,search:{keyword:"",kind:"猫咪主粮"}}},created(){this.fetchUsrFromSession(),this.fetchGoodFromSession()},computed:{isLoggedIn(){return!!this.currentUser},isSeller(){return this.currentUser&&1===this.currentUser.power},isBuyer(){return this.currentUser&&0===this.currentUser.power},paginatedItems(){const e=(this.currentPage-1)*this.itemsPerPage,t=this.currentPage*this.itemsPerPage;return this.filteredItems.slice(e,t)},totalPages(){return Math.ceil(this.filteredItems.length/this.itemsPerPage)}},methods:{...(0,an.nv)(["logout"]),async fetchUsrFromSession(){try{const e=await D.Z.get("/now-usr"),t=e.data;return this.currentUser=t,!0}catch(e){return console.error("获取用户数据错误:",e),!1}},async fetchGoodFromSession(){try{const e=await D.Z.get("/now-good"),t=e.data,s=t.picture.trim(),r=s.split(","),o=r.map(((e,t)=>({url:e,isActive:0===t})));return this.selectedProduct={...t,mediaFiles:o,goodid:t.goodid,goodname:t.goodname.trim(),description:t.description.trim(),price:t.price,number:t.number,kind:t.kind,subkind:t.subkind,buyingid:t.buyingid,numbermax:t.numbermax,islike:t.islike},console.log("this.selectedProduct:",this.selectedProduct),!0}catch(e){return console.error("获取用户数据错误:",e),!1}},handleLogout(){this.logout(),this.$router.push("/")},navigateTo(e){this.$router.push({name:e})},beforeMount(){this.isLoggedIn||this.$router.push("/")},showPrevMedia(e){const t=e.mediaFiles.findIndex((e=>e.isActive));if(console.log("Current active index:",t),t>=0){const s=(t-1+e.mediaFiles.length)%e.mediaFiles.length;console.log("Previous index:",s),this.setActiveMedia(e,s)}},showNextMedia(e){const t=e.mediaFiles.findIndex((e=>e.isActive));if(console.log("Current active index:",t),t>=0){const s=(t+1)%e.mediaFiles.length;console.log("Next index:",s),this.setActiveMedia(e,s)}},setActiveMedia(e,t){e.mediaFiles.forEach(((e,s)=>{e.isActive=s===t,console.log(`Media at index ${s} active status: `,e.isActive)}))},buyProduct(e){this.$router.push({name:"BuyerFillInfo",params:{productId:e}})},addToCart(){console.log("goodid:"+this.selectedProduct.goodid),D.Z.post("/cart/create-cart",{goodid:this.selectedProduct.goodid,userid:this.currentUser.userid}).then((e=>{console.log(e.data),alert("商品已添加购物车")})).catch((e=>{console.error(e)}))},addToFavorites(){D.Z.post("/cart/addLike",{goodid:this.selectedProduct.goodid,iscancel:0,userid:this.currentUser.userid}).then((e=>{alert("商品已添加到收藏夹！"),console.log(e),this.getLIst(this.currentUser.userid)})).catch((e=>{console.error(e)}))}},mounted(){this.filteredItems=this.items}};const pc=(0,a.Z)(gc,[["render",hc],["__scopeId","data-v-dea9770e"]]);var mc=pc;const _c=(0,o._)("h2",null,"错误界面",-1),wc={key:0},vc={key:1};function yc(e,t,s,r,i,n){const a=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("div",null,[_c,i.errorMessage?((0,o.wg)(),(0,o.iD)("div",wc,(0,h.zw)(i.errorMessage),1)):(0,o.kq)("",!0),i.redirectTo?((0,o.wg)(),(0,o.iD)("div",vc,[(0,o.Wm)(a,{to:i.redirectTo},{default:(0,o.w5)((()=>[(0,o.Uk)("返回页面")])),_:1},8,["to"])])):(0,o.kq)("",!0)])}var bc={data(){return{errorMessage:"",redirectTo:null}},created(){this.errorMessage=this.$route.query.err||"",this.redirectTo=this.$route.query.to||"/"}};const kc=(0,a.Z)(bc,[["render",yc]]);var fc=kc;const Pc=e=>((0,o.dD)("data-v-0e47a5cc"),e=e(),(0,o.Cn)(),e),xc={key:0},Ac={key:0,class:"modal",style:{position:"fixed","z-index":"1",left:"0",top:"0",width:"100%",height:"100%",overflow:"auto","background-color":"rgba(0,0,0,0.4)"}},Cc=["src"],Uc=["src"],Dc={id:"a"},Sc={class:"container"},Ic=Pc((()=>(0,o._)("div",{class:"centered-container"},[(0,o._)("h2",null,"搜索商品信息"),(0,o._)("br")],-1))),Oc={class:"centered-container"},Fc={class:"search-bar"},Tc=Pc((()=>(0,o._)("option",{value:"猫咪主粮"},"猫咪主粮",-1))),Mc=Pc((()=>(0,o._)("option",{value:"猫咪零食"},"猫咪零食",-1))),Bc=Pc((()=>(0,o._)("option",{value:"猫咪日用"},"猫咪日用",-1))),zc=[Tc,Mc,Bc],qc={border:"1px",align:"center",cellspacing:"0"},Nc=Pc((()=>(0,o._)("tr",null,[(0,o._)("th",null,"ID"),(0,o._)("th",null,"名称"),(0,o._)("th",null,"描述"),(0,o._)("th",null,"库存"),(0,o._)("th",null,"单价"),(0,o._)("th",null,"展示内容"),(0,o._)("th",null,"状态"),(0,o._)("th",null,"操作")],-1))),Lc={class:"media-container"},Vc=["src"],Zc=["src"],Qc={class:"media-navigation"},Gc=["onClick"],Rc=["onClick"],Kc=["onClick"],Ec=["onClick"],$c={class:"pagination"},Hc=["disabled"],Yc={id:"page-info"},jc=["disabled"],Wc={key:1,class:"else"};function Jc(e,t,s,i,n,a){const l=(0,o.up)("PriceModal"),d=(0,o.up)("router-link");return a.isLoggedIn?((0,o.wg)(),(0,o.iD)("div",xc,[n.showModal?((0,o.wg)(),(0,o.iD)("div",Ac,[(0,o._)("span",{class:"close-button",onClick:t[0]||(t[0]=(...t)=>e.closeModal&&e.closeModal(...t)),style:{position:"absolute",top:"20px",right:"30px",color:"#f1f1f1","font-size":"35px","font-weight":"bold",cursor:"pointer"}},"×"),"image"===e.modalContentType?((0,o.wg)(),(0,o.iD)("img",{key:0,src:e.modalContentSrc,style:{margin:"auto",display:"none",width:"80%","max-width":"700px"}},null,8,Cc)):(0,o.kq)("",!0),"video"===e.modalContentType?((0,o.wg)(),(0,o.iD)("video",{key:1,src:e.modalContentSrc,controls:"",style:{margin:"auto",display:"none",width:"80%","max-width":"700px"}},null,8,Uc)):(0,o.kq)("",!0)])):(0,o.kq)("",!0),(0,o._)("div",Dc,[(0,o._)("div",Sc,[Ic,(0,o._)("div",Oc,[(0,o._)("div",Fc,[(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>n.searchQuery=e),class:"custom-input",placeholder:"搜索商品"},null,512),[[r.nr,n.searchQuery]]),(0,o.wy)((0,o._)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>n.selectedCategory=e),id:"search_kind"},zc,512),[[r.bM,n.selectedCategory]]),(0,o._)("button",{onClick:t[3]||(t[3]=(...e)=>a.searchGoods&&a.searchGoods(...e)),style:{width:"130px"},class:"custom-button"},"搜索")])]),(0,o._)("table",qc,[Nc,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.paginatedGoods,(e=>((0,o.wg)(),(0,o.iD)("tr",{key:e.goodid},[(0,o._)("td",null,(0,h.zw)(e.goodid),1),(0,o._)("td",null,(0,h.zw)(e.goodname),1),(0,o._)("td",null,(0,h.zw)(e.description),1),(0,o._)("td",{class:(0,h.C_)({"low-stock":e.number<5})},(0,h.zw)(e.number),3),(0,o._)("td",null,(0,h.zw)(e.price),1),(0,o._)("td",null,[(0,o._)("div",Lc,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.mediaFiles,((e,t)=>(0,o.wy)(((0,o.wg)(),(0,o.iD)("div",{key:t},[a.isVideo(e)?(0,o.kq)("",!0):(0,o.wy)(((0,o.wg)(),(0,o.iD)("img",{key:0,src:e.url,alt:"商品图片"},null,8,Vc)),[[r.F8,e.isActive]]),a.isVideo(e)?(0,o.wy)(((0,o.wg)(),(0,o.iD)("video",{key:1,src:e.url,controls:""},null,8,Zc)),[[r.F8,e.isActive]]):(0,o.kq)("",!0)])),[[r.F8,e.isActive]]))),128))]),(0,o._)("div",Qc,[(0,o._)("button",{onClick:t=>a.showPrevMedia(e)},"＜",8,Gc),(0,o.Uk)("         "),(0,o._)("button",{onClick:t=>a.showNextMedia(e)},"＞",8,Rc)])]),(0,o._)("td",null,(0,h.zw)(a.stateText(e.state)),1),(0,o._)("td",null,[(0,o._)("button",{onClick:t=>a.confirmDelete(e.goodid)},"下架",8,Kc),(0,o.Uk)(" | "),(0,o._)("button",{onClick:t=>a.openPriceModal(e)},"修改价格",8,Ec)])])))),128))]),(0,o._)("div",$c,[(0,o._)("button",{onClick:t[4]||(t[4]=(...e)=>a.goToPrevPage&&a.goToPrevPage(...e)),class:"prev",disabled:1===n.currentPage},"上一页",8,Hc),(0,o._)("span",Yc,"第 "+(0,h.zw)(n.currentPage)+" / "+(0,h.zw)(a.totalPages)+" 页",1),(0,o._)("button",{onClick:t[5]||(t[5]=(...e)=>a.goToNextPage&&a.goToNextPage(...e)),class:"next",disabled:n.currentPage===a.totalPages},"下一页",8,jc)]),(0,o.Wm)(l,{good:n.selectedGood,isVisible:n.showPriceModal,onClose:t[6]||(t[6]=e=>n.showPriceModal=!1),onUpdate:a.handleUpdatePrice},null,8,["good","isVisible","onUpdate"])])])])):((0,o.wg)(),(0,o.iD)("div",Wc,[(0,o._)("span",null,[(0,o.Uk)("您还未登录，请先 "),(0,o.Wm)(d,{to:"/"},{default:(0,o.w5)((()=>[(0,o.Uk)("登录")])),_:1})])]))}var Xc={components:{PriceModal:kr},data(){return{searchQuery:"",showPriceModal:!1,selectedGood:null,showModal:!1,selectedCategory:"猫咪主粮",currentPage:1,pageSize:6,filteredGoods:[],isHistory:0,showSuccessMessage:!1,successMessage:"",goods:[],currentUser:null}},created(){this.fetchUsrFromSession(),this.fetchgoodListSession()},computed:{isLoggedIn(){return!!this.currentUser},paginatedGoods(){const e=(this.currentPage-1)*this.pageSize,t=e+this.pageSize;return this.filteredGoods.slice(e,t)},totalPages(){return Math.ceil(this.filteredGoods.length/this.pageSize)}},async mounted(){console.log("ShowGoods 组件已挂载"),await this.fetchgoodListSession(),this.filteredGoods=this.goods,console.log("this.filteredGoods:",this.filteredGoods),this.showSuccessModal("价格修改成功！")},methods:{async fetchUsrFromSession(){try{const e=await D.Z.get("/now-usr"),t=e.data;return this.currentUser=t,!0}catch(e){return console.error("获取用户数据错误:",e),!1}},async fetchgoodListSession(){try{const e=await D.Z.get("/searchList"),t=e.data;return this.goods=t.map((e=>{const t=e.picture.trim(),s=t.split(","),r=s.map(((e,t)=>({url:e,isActive:0===t})));return{...e,mediaFiles:r,goodname:e.goodname.trim(),description:e.description.trim(),price:e.price,number:e.number,kind:e.kind,subkind:e.subkind}})),console.log("this.goods:",this.goods),!0}catch(e){return console.error("获取商品列表数据错误:",e),!1}},showPrevMedia(e){const t=e.mediaFiles.findIndex((e=>e.isActive));if(console.log("Current active index:",t),t>=0){const s=(t-1+e.mediaFiles.length)%e.mediaFiles.length;console.log("Previous index:",s),this.setActiveMedia(e,s)}},showNextMedia(e){const t=e.mediaFiles.findIndex((e=>e.isActive));if(console.log("Current active index:",t),t>=0){const s=(t+1)%e.mediaFiles.length;console.log("Next index:",s),this.setActiveMedia(e,s)}},setActiveMedia(e,t){e.mediaFiles.forEach(((e,s)=>{e.isActive=s===t,console.log(`Media at index ${s} active status: `,e.isActive)}))},isVideo(e){const t=e.url.endsWith(".mp4");return console.log(`Is media a video: ${t}`),t},showSuccessModal(e){this.successMessage=e,this.showSuccessMessage=!0},async searchGoods(){console.log("搜索已执行");const e={keyword:this.searchQuery,kind:this.selectedCategory,ishistory:0},t=await fetch("/good/search-list-control",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}),s=await t.json();"/error"===s.page?this.$router.push({path:"/error",query:{err:s.msg,to:s.data}}):"/success"===s.page?this.$router.push({path:"/success",query:{message:s.msg,to:s.data}}):null===s.page?console.log("未知页面类型"):this.$router.push({path:s.page})},closeSuccessModal(){this.showSuccessMessage=!1},confirmDelete(e){confirm("确定要删除这个商品吗？")&&this.deleteGood(e)},deleteGood(e){console.log("删除商品，商品ID:",e),this.filteredGoods=this.filteredGoods.filter((t=>t.goodid!==e)),alert("商品删除成功")},openPriceModal(e){console.log("打开价格修改窗口!"),this.selectedGood=e,this.showPriceModal=!0},handleUpdatePrice({goodId:e,newPrice:t}){const s=this.goods.find((t=>t.goodid===e));s&&(s.price=t),this.showPriceModal=!1},goToPrevPage(){this.currentPage>1&&this.currentPage--},goToNextPage(){this.currentPage<this.totalPages&&this.currentPage++},resetPage(){this.currentPage=1},stateText(e){const t={0:"上架",1:"冻结",2:"售出"};return t[e]||"未知"}},watch:{filteredGoods(e,t){e!==t&&this.resetPage()}}};const eu=(0,a.Z)(Xc,[["render",Jc],["__scopeId","data-v-0e47a5cc"]]);var tu=eu;const su=e=>((0,o.dD)("data-v-06050086"),e=e(),(0,o.Cn)(),e),ru={key:0},ou={id:"a"},iu={class:"container"},nu=su((()=>(0,o._)("div",{class:"centered-container"},[(0,o._)("h2",null,"搜索商品信息"),(0,o._)("br")],-1))),au={class:"centered-container"},lu={class:"search-bar"},du=su((()=>(0,o._)("option",{value:"猫咪主粮"},"猫咪主粮",-1))),cu=su((()=>(0,o._)("option",{value:"猫咪零食"},"猫咪零食",-1))),uu=su((()=>(0,o._)("option",{value:"猫咪日用"},"猫咪日用",-1))),hu=[du,cu,uu],gu={border:"1px",align:"center",cellspacing:"0"},pu=su((()=>(0,o._)("tr",null,[(0,o._)("th",null,"ID"),(0,o._)("th",null,"名称"),(0,o._)("th",null,"描述"),(0,o._)("th",null,"单价"),(0,o._)("th",null,"展示内容"),(0,o._)("th",null,"类别"),(0,o._)("th",null,"子类别"),(0,o._)("th",null,"创建日期")],-1))),mu={class:"media-container"},_u=["src"],wu=["src"],vu={class:"media-navigation"},yu=["onClick"],bu=["onClick"],ku={class:"pagination"},fu=["disabled"],Pu={id:"page-info"},xu=["disabled"],Au={key:1,class:"else"},Cu=su((()=>(0,o._)("a",{href:"/login"},"登录",-1)));function Uu(e,t,s,i,n,a){return a.isLoggedIn?((0,o.wg)(),(0,o.iD)("div",ru,[(0,o._)("div",ou,[(0,o._)("div",iu,[nu,(0,o._)("div",au,[(0,o._)("div",lu,[(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.searchQuery=t),class:"custom-input",placeholder:"搜索商品"},null,512),[[r.nr,e.searchQuery]]),(0,o.wy)((0,o._)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.selectedCategory=e),id:"search_kind"},hu,512),[[r.bM,n.selectedCategory]]),(0,o._)("button",{onClick:t[2]||(t[2]=(...e)=>a.searchGoods&&a.searchGoods(...e)),style:{width:"130px"},class:"custom-button"},"搜索")])]),(0,o._)("table",gu,[pu,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.paginatedGoods,(e=>((0,o.wg)(),(0,o.iD)("tr",{key:e.goodid},[(0,o._)("td",null,(0,h.zw)(e.goodid),1),(0,o._)("td",null,(0,h.zw)(e.goodname),1),(0,o._)("td",null,(0,h.zw)(e.description),1),(0,o._)("td",null,(0,h.zw)(e.price),1),(0,o._)("td",null,[(0,o._)("div",mu,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.mediaFiles,((e,t)=>(0,o.wy)(((0,o.wg)(),(0,o.iD)("div",{key:t},[a.isVideo(e)?(0,o.kq)("",!0):(0,o.wy)(((0,o.wg)(),(0,o.iD)("img",{key:0,src:e.url,alt:"商品图片"},null,8,_u)),[[r.F8,e.isActive]]),a.isVideo(e)?(0,o.wy)(((0,o.wg)(),(0,o.iD)("video",{key:1,src:e.url,controls:""},null,8,wu)),[[r.F8,e.isActive]]):(0,o.kq)("",!0)])),[[r.F8,e.isActive]]))),128))]),(0,o._)("div",vu,[(0,o._)("button",{onClick:t=>a.showPrevMedia(e)},"＜",8,yu),(0,o.Uk)("         "),(0,o._)("button",{onClick:t=>a.showNextMedia(e)},"＞",8,bu)])]),(0,o._)("td",null,(0,h.zw)(e.kind),1),(0,o._)("td",null,(0,h.zw)(e.subkind),1),(0,o._)("td",null,(0,h.zw)(e.createdate),1)])))),128))]),(0,o._)("div",ku,[(0,o._)("button",{onClick:t[3]||(t[3]=(...e)=>a.goToPrevPage&&a.goToPrevPage(...e)),class:"prev",disabled:1===n.currentPage},"上一页",8,fu),(0,o._)("span",Pu,"第 "+(0,h.zw)(n.currentPage)+" / "+(0,h.zw)(a.totalPages)+" 页",1),(0,o._)("button",{onClick:t[4]||(t[4]=(...e)=>a.goToNextPage&&a.goToNextPage(...e)),class:"next",disabled:n.currentPage===a.totalPages},"下一页",8,xu)])])])])):((0,o.wg)(),(0,o.iD)("div",Au,[(0,o.Uk)(" 您还未登录，请先"),Cu]))}var Du={data(){return{products:[],selectedGood:null,selectedCategory:"猫咪主粮",currentPage:1,pageSize:6,goods:[],filteredGoods:[],currentUser:null,isHistory:1}},created(){this.fetchUsrFromSession(),this.fetchgoodListSession()},computed:{isLoggedIn(){return!!this.currentUser},paginatedGoods(){const e=(this.currentPage-1)*this.pageSize,t=e+this.pageSize;return this.filteredGoods.slice(e,t)},totalPages(){return Math.ceil(this.filteredGoods.length/this.pageSize)}},async mounted(){console.log("ShowHistoryGoods 组件已挂载"),await this.fetchgoodListSession(),this.filteredGoods=this.goods,console.log("this.filteredGoods:",this.filteredGoods)},methods:{async fetchUsrFromSession(){try{const e=await D.Z.get("/now-usr"),t=e.data;return this.currentUser=t,!0}catch(e){return console.error("获取用户数据错误:",e),!1}},async fetchgoodListSession(){try{const e=await D.Z.get("/searchList"),t=e.data;return this.goods=t.map((e=>{const t=e.picture.trim(),s=t.split(","),r=s.map(((e,t)=>({url:e,isActive:0===t})));return{...e,mediaFiles:r,goodname:e.goodname.trim(),description:e.description.trim(),price:e.price,number:e.number,kind:e.kind,subkind:e.subkind,createdate:e.createdate}})),console.log("this.goods:",this.goods),!0}catch(e){return console.error("获取商品列表数据错误:",e),!1}},showPrevMedia(e){const t=e.mediaFiles.findIndex((e=>e.isActive));if(console.log("Current active index:",t),t>=0){const s=(t-1+e.mediaFiles.length)%e.mediaFiles.length;console.log("Previous index:",s),this.setActiveMedia(e,s)}},showNextMedia(e){const t=e.mediaFiles.findIndex((e=>e.isActive));if(console.log("Current active index:",t),t>=0){const s=(t+1)%e.mediaFiles.length;console.log("Next index:",s),this.setActiveMedia(e,s)}},isVideo(e){const t=e.url.endsWith(".mp4");return console.log(`Is media a video: ${t}`),t},async searchGoods(){console.log("搜索已执行");const e={keyword:this.searchQuery,kind:this.selectedCategory,ishistory:1},t=await fetch("/good/search-list-control",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}),s=await t.json();"/error"===s.page?this.$router.push({path:"/error",query:{err:s.msg,to:s.data}}):"/success"===s.page?this.$router.push({path:"/success",query:{message:s.msg,to:s.data}}):null===s.page?console.log("未知页面类型"):this.$router.push({path:s.page})},goToPrevPage(){this.currentPage>1&&this.currentPage--},goToNextPage(){this.currentPage<this.totalPages&&this.currentPage++},resetPage(){this.currentPage=1},fetchProducts(){}},watch:{filteredGoods(e,t){e!==t&&this.resetPage()}}};const Su=(0,a.Z)(Du,[["render",Uu],["__scopeId","data-v-06050086"]]);var Iu=Su;const Ou=e=>((0,o.dD)("data-v-06d37f9c"),e=e(),(0,o.Cn)(),e),Fu={style:{margin:"0px"}},Tu={key:0},Mu={class:"left"},Bu={class:"daohang"},zu=Ou((()=>(0,o._)("img",{class:"head1",src:we,alt:""},null,-1))),qu={class:"head2"},Nu={class:"head4"},Lu={class:"head4"},Vu={class:"head4"},Zu={class:"head4"},Qu={class:"head5"},Gu={class:"right"},Ru=Ou((()=>(0,o._)("div",{class:"centered-container"},[(0,o._)("h2",null,"欢迎来到猫咪美食坊！")],-1))),Ku={class:"centered-container"},Eu=Ou((()=>(0,o._)("option",{value:"猫咪主粮"},"猫咪主粮",-1))),$u=Ou((()=>(0,o._)("option",{value:"猫咪零食"},"猫咪零食",-1))),Hu=Ou((()=>(0,o._)("option",{value:"猫咪日用"},"猫咪日用",-1))),Yu=[Eu,$u,Hu],ju=Ou((()=>(0,o._)("br",null,null,-1))),Wu=Ou((()=>(0,o._)("br",null,null,-1))),Ju=Ou((()=>(0,o._)("input",{type:"submit",value:"搜索",style:{width:"130px",cursor:"pointer"}},null,-1))),Xu=Ou((()=>(0,o._)("div",{id:"search_list"},null,-1))),eh=Ou((()=>(0,o._)("br",null,null,-1))),th={class:"goods"},sh=["onClick"],rh={class:"media-container"},oh=["src"],ih=["src"],nh={class:"media-navigation"},ah=["onClick"],lh=["onClick"],dh=["onClick"],ch=Ou((()=>(0,o._)("br",null,null,-1))),uh={class:"pagination"},hh=["disabled"],gh={id:"page-info"},ph=["disabled"],mh={key:1},_h={class:"else"},wh={class:"left"},vh={class:"daohang"},yh=Ou((()=>(0,o._)("img",{class:"head1",src:we,alt:""},null,-1))),bh=Ou((()=>(0,o._)("tr",null,[(0,o._)("td",{class:"head2"},"游客")],-1))),kh=Ou((()=>(0,o._)("tr",null,[(0,o._)("td",{class:"head4"},[(0,o._)("h3",{class:"head4-1"},"其他功能后登录使用")])],-1))),fh={class:"head5"},Ph={class:"right"},xh=Ou((()=>(0,o._)("div",{class:"centered-container"},[(0,o._)("h2",null,"欢迎来到猫咪美食坊！")],-1))),Ah={class:"centered-container"},Ch=Ou((()=>(0,o._)("option",{value:"猫咪主粮"},"猫咪主粮",-1))),Uh=Ou((()=>(0,o._)("option",{value:"猫咪零食"},"猫咪零食",-1))),Dh=Ou((()=>(0,o._)("option",{value:"猫咪日用"},"猫咪日用",-1))),Sh=[Ch,Uh,Dh],Ih=Ou((()=>(0,o._)("br",null,null,-1))),Oh=Ou((()=>(0,o._)("br",null,null,-1))),Fh=Ou((()=>(0,o._)("input",{type:"submit",value:"搜索",style:{width:"130px",cursor:"pointer"}},null,-1))),Th=Ou((()=>(0,o._)("div",{id:"search_list"},null,-1))),Mh=Ou((()=>(0,o._)("br",null,null,-1))),Bh={class:"goods"},zh=["onClick"],qh={class:"media-container"},Nh=["src"],Lh=["src"],Vh={class:"media-navigation"},Zh=["onClick"],Qh=["onClick"],Gh=["onClick"],Rh=Ou((()=>(0,o._)("br",null,null,-1))),Kh={class:"pagination"},Eh=["disabled"],$h={id:"page-info"},Hh=["disabled"];function Yh(e,t,s,i,n,a){return(0,o.wg)(),(0,o.iD)("body",Fu,[a.isLoggedIn?((0,o.wg)(),(0,o.iD)("div",Tu,[(0,o._)("div",Mu,[(0,o._)("table",Bu,[zu,(0,o._)("tr",null,[(0,o._)("td",qu,(0,h.zw)(a.getUsername),1)]),(0,o._)("tr",null,[(0,o._)("td",Nu,[(0,o._)("h3",{onClick:t[0]||(t[0]=e=>a.navigateTo("BuyerCart")),class:"head4-1",style:{cursor:"pointer"}},"我的购物车")])]),(0,o._)("tr",null,[(0,o._)("td",Lu,[(0,o._)("h3",{onClick:t[1]||(t[1]=e=>a.navigateTo("BuyerLikes")),class:"head4-1",style:{cursor:"pointer"}},"我的收藏")])]),(0,o._)("tr",null,[(0,o._)("td",Vu,[(0,o._)("h3",{onClick:t[2]||(t[2]=e=>a.navigateTo("buyerHistory")),class:"head4-1",style:{cursor:"pointer"}},"历史购买记录")])]),(0,o._)("tr",null,[(0,o._)("td",Zu,[(0,o._)("h3",{onClick:t[3]||(t[3]=e=>a.navigateTo("BuyerMain")),class:"head4-1",style:{cursor:"pointer"}},"返回主页")])]),(0,o._)("tr",null,[(0,o._)("td",Qu,[(0,o._)("button",{onClick:t[4]||(t[4]=(...e)=>a.handleLogout&&a.handleLogout(...e)),class:"head5-1",style:{cursor:"pointer"}},"退出登录")])])])]),(0,o._)("div",Gu,[Ru,(0,o._)("div",Ku,[(0,o._)("form",{onSubmit:t[7]||(t[7]=(0,r.iM)(((...e)=>a.handleSearch&&a.handleSearch(...e)),["prevent"]))},[(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=e=>n.searchQuery=e),class:"custom-input",placeholder:"搜索商品"},null,512),[[r.nr,n.searchQuery]]),(0,o.Uk)("    "),(0,o.wy)((0,o._)("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>n.selectedCategory=e)},Yu,512),[[r.bM,n.selectedCategory]]),ju,Wu,(0,o.Uk)("    "),Ju],32),Xu]),eh,(0,o._)("div",th,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.paginatedItems,(e=>((0,o.wg)(),(0,o.iD)("div",{class:"show-1",key:e.goodid},[(0,o._)("div",{onClick:t=>a.postToBuyerShop(e.goodid)},[(0,o._)("div",rh,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.mediaFiles,((e,t)=>(0,o.wy)(((0,o.wg)(),(0,o.iD)("div",{key:t},[a.isVideo(e)?(0,o.wy)(((0,o.wg)(),(0,o.iD)("video",{key:1,src:e.url,controls:""},null,8,ih)),[[r.F8,e.isActive]]):(0,o.wy)(((0,o.wg)(),(0,o.iD)("img",{key:0,src:e.url,alt:"商品图片"},null,8,oh)),[[r.F8,e.isActive]])])),[[r.F8,e.isActive]]))),128))])],8,sh),(0,o._)("div",nh,[(0,o._)("button",{onClick:t=>a.showPrevMedia(e)},"＜",8,ah),(0,o.Uk)("         "),(0,o._)("button",{onClick:t=>a.showNextMedia(e)},"＞",8,lh)]),(0,o._)("div",{onClick:t=>a.postToBuyerShop(e.goodid)},[(0,o._)("p",null,[(0,o.Uk)("商品名："+(0,h.zw)(e.goodname),1),ch,(0,o.Uk)("超值价："+(0,h.zw)(e.price)+"元",1)])],8,dh)])))),128))]),(0,o._)("div",uh,[(0,o._)("button",{onClick:t[8]||(t[8]=(...e)=>a.goToPrevPage&&a.goToPrevPage(...e)),class:"prev",disabled:1===n.currentPage},"上一页",8,hh),(0,o._)("span",gh,"第 "+(0,h.zw)(n.currentPage)+" / "+(0,h.zw)(a.totalPages)+" 页",1),(0,o._)("button",{onClick:t[9]||(t[9]=(...e)=>a.goToNextPage&&a.goToNextPage(...e)),class:"next",disabled:n.currentPage===a.totalPages},"下一页",8,ph)])])])):((0,o.wg)(),(0,o.iD)("div",mh,[(0,o._)("div",_h,[(0,o._)("div",wh,[(0,o._)("table",vh,[yh,bh,kh,(0,o._)("tr",null,[(0,o._)("td",fh,[(0,o._)("button",{onClick:t[10]||(t[10]=(...e)=>a.handleLogout&&a.handleLogout(...e)),class:"head5-1",style:{cursor:"pointer"}},"返回登录")])])])]),(0,o._)("div",Ph,[xh,(0,o._)("div",Ah,[(0,o._)("form",{onSubmit:t[13]||(t[13]=(0,r.iM)(((...e)=>a.handleSearch&&a.handleSearch(...e)),["prevent"]))},[(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":t[11]||(t[11]=e=>n.searchQuery=e),class:"custom-input",placeholder:"搜索商品"},null,512),[[r.nr,n.searchQuery]]),(0,o.Uk)("    "),(0,o.wy)((0,o._)("select",{"onUpdate:modelValue":t[12]||(t[12]=e=>n.selectedCategory=e)},Sh,512),[[r.bM,n.selectedCategory]]),Ih,Oh,(0,o.Uk)("    "),Fh],32),Th]),Mh,(0,o._)("div",Bh,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.paginatedItems,(e=>((0,o.wg)(),(0,o.iD)("div",{class:"show-1",key:e.goodid},[(0,o._)("div",{onClick:t=>a.postToBuyerShop(e.goodid)},[(0,o._)("div",qh,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.mediaFiles,((e,t)=>(0,o.wy)(((0,o.wg)(),(0,o.iD)("div",{key:t},[a.isVideo(e)?(0,o.wy)(((0,o.wg)(),(0,o.iD)("video",{key:1,src:e.url,controls:""},null,8,Lh)),[[r.F8,e.isActive]]):(0,o.wy)(((0,o.wg)(),(0,o.iD)("img",{key:0,src:e.url,alt:"商品图片"},null,8,Nh)),[[r.F8,e.isActive]])])),[[r.F8,e.isActive]]))),128))])],8,zh),(0,o._)("div",Vh,[(0,o._)("button",{onClick:t=>a.showPrevMedia(e)},"＜",8,Zh),(0,o.Uk)("         "),(0,o._)("button",{onClick:t=>a.showNextMedia(e)},"＞",8,Qh)]),(0,o._)("div",{onClick:t=>a.postToBuyerShop(e.goodid)},[(0,o._)("p",null,[(0,o.Uk)("商品名："+(0,h.zw)(e.goodname),1),Rh,(0,o.Uk)("超值价："+(0,h.zw)(e.price)+"元",1)])],8,Gh)])))),128))]),(0,o._)("div",Kh,[(0,o._)("button",{onClick:t[14]||(t[14]=(...e)=>a.goToPrevPage&&a.goToPrevPage(...e)),class:"prev",disabled:1===n.currentPage},"上一页",8,Eh),(0,o._)("span",$h,"第 "+(0,h.zw)(n.currentPage)+" / "+(0,h.zw)(a.totalPages)+" 页",1),(0,o._)("button",{onClick:t[15]||(t[15]=(...e)=>a.goToNextPage&&a.goToNextPage(...e)),class:"next",disabled:n.currentPage===a.totalPages},"下一页",8,Hh)])])])]))])}var jh={data(){return{items:[],searchQuery:"",selectedCategory:"猫咪主粮",filteredItems:[],currentPage:1,itemsPerPage:2,search:{keyword:"",kind:"猫咪主粮"},currentUser:null}},created(){this.fetchUsrFromSession(),this.fetchgoodListSession()},async mounted(){console.log("BuyerMain 组件已挂载"),await this.fetchgoodListSession(),this.filteredItems=this.items},computed:{isLoggedIn(){return!!this.currentUser},isSeller(){return this.currentUser&&1===this.currentUser.power},isBuyer(){return this.currentUser&&0===this.currentUser.power},getUsername(){return this.currentUser?this.currentUser.username:"未登录"},paginatedItems(){const e=(this.currentPage-1)*this.itemsPerPage,t=this.currentPage*this.itemsPerPage;return this.filteredItems.slice(e,t)},totalPages(){return Math.ceil(this.filteredItems.length/this.itemsPerPage)}},methods:{async fetchUsrFromSession(){try{const e=await D.Z.get("/now-usr"),t=e.data;return this.currentUser=t,!0}catch(e){return console.error("获取用户数据错误:",e),!1}},async fetchgoodListSession(){try{const e=await D.Z.get("/searchList"),t=e.data;return this.items=t.map((e=>{const t=e.picture.trim(),s=t.split(","),r=s.map(((e,t)=>({url:e,isActive:0===t})));return{...e,mediaFiles:r,goodid:e.goodid,goodname:e.goodname.trim(),description:e.description.trim(),price:e.price,number:e.number,kind:e.kind,subkind:e.subkind,buyingid:e.buyingid,numbermax:e.numbermax,islike:e.islike}})),console.log("this.items:",this.items),!0}catch(e){return console.error("获取商品列表数据错误:",e),!1}},isVideo(e){return e.url.endsWith(".mp4")||e.url.endsWith(".avi")},async postToBuyerShop(e){const t=await fetch(`/good/buyer-show-good/${e}`,{method:"POST"});this.selectedFiles=[];const s=await t.json();"/error"===s.page?this.$router.push({path:"/error",query:{err:s.msg,to:s.data}}):"/success"===s.page?this.$router.push({path:"/success",query:{message:s.msg,to:s.data}}):null===s.page?console.log("未知页面类型"):this.$router.push({path:s.page})},async handleLogout(){try{await D.Z.get("/logout-control"),this.$router.push("/")}catch(e){console.error("登出失败:",e)}},navigateTo(e){this.$router.push({name:e})},beforeMount(){this.isLoggedIn||this.$router.push("/")},async handleSearch(){console.log("搜索已执行");const e={keyword:this.searchQuery,kind:this.selectedCategory,ishistory:0},t=await fetch("/good/search-list-control",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}),s=await t.json();"/error"===s.page?this.$router.push({path:"/error",query:{err:s.msg,to:s.data}}):"/success"===s.page?this.$router.push({path:"/success",query:{message:s.msg,to:s.data}}):null===s.page?console.log("未知页面类型"):this.$router.push({path:s.page})},showPrevMedia(e){const t=e.mediaFiles.findIndex((e=>e.isActive));if(console.log("Current active index:",t),t>=0){const s=(t-1+e.mediaFiles.length)%e.mediaFiles.length;console.log("Previous index:",s),this.setActiveMedia(e,s)}},showNextMedia(e){const t=e.mediaFiles.findIndex((e=>e.isActive));if(console.log("Current active index:",t),t>=0){const s=(t+1)%e.mediaFiles.length;console.log("Next index:",s),this.setActiveMedia(e,s)}},setActiveMedia(e,t){e.mediaFiles.forEach(((e,s)=>{e.isActive=s===t,console.log(`Media at index ${s} active status: `,e.isActive)}))},goToPrevPage(){this.currentPage>1&&(this.currentPage--,console.log("Current page after prev:",this.currentPage))},goToNextPage(){this.currentPage<this.totalPages&&(this.currentPage++,console.log("Current page after next:",this.currentPage))},resetPage(){this.currentPage=1}},watch:{filteredItems(e,t){e!==t&&this.resetPage()}}};const Wh=(0,a.Z)(jh,[["render",Yh],["__scopeId","data-v-06d37f9c"]]);var Jh=Wh;const Xh=e=>((0,o.dD)("data-v-96ee6556"),e=e(),(0,o.Cn)(),e),eg={key:0},tg={class:"main"},sg=Xh((()=>(0,o._)("h1",null,"请发布商品",-1))),rg={class:"container"},og={class:"left-div",style:{height:"300px"}},ig={id:"preview"},ng={key:0},ag=["src"],lg=["src"],dg=["onClick"],cg={key:1},ug=Xh((()=>(0,o._)("br",null,null,-1))),hg=["disabled"],gg={class:"right-div"},pg={class:"form-group"},mg=Xh((()=>(0,o._)("label",{for:"kind"},"商品大类：",-1))),_g=["value"],wg=Xh((()=>(0,o._)("br",null,null,-1))),vg=Xh((()=>(0,o._)("br",null,null,-1))),yg={class:"form-group"},bg=Xh((()=>(0,o._)("label",{for:"subkind"},"商品子类：",-1))),kg=["value"],fg=Xh((()=>(0,o._)("br",null,null,-1))),Pg=Xh((()=>(0,o._)("br",null,null,-1))),xg={class:"form-group"},Ag=Xh((()=>(0,o._)("label",{for:"goodName"},"商品名称：",-1))),Cg=Xh((()=>(0,o._)("br",null,null,-1))),Ug=Xh((()=>(0,o._)("br",null,null,-1))),Dg={key:0,class:"error"},Sg={class:"form-group"},Ig=Xh((()=>(0,o._)("label",{for:"price"},"商品价格：",-1))),Og=Xh((()=>(0,o._)("br",null,null,-1))),Fg=Xh((()=>(0,o._)("br",null,null,-1))),Tg={key:0,class:"error"},Mg={class:"form-group"},Bg=Xh((()=>(0,o._)("label",{for:"stock"},"商品库存：",-1))),zg=Xh((()=>(0,o._)("br",null,null,-1))),qg=Xh((()=>(0,o._)("br",null,null,-1))),Ng={key:0,class:"error"},Lg={class:"form-group"},Vg=Xh((()=>(0,o._)("label",{for:"description"},"商品描述：",-1))),Zg=Xh((()=>(0,o._)("br",null,null,-1))),Qg=Xh((()=>(0,o._)("br",null,null,-1))),Gg={key:0,class:"error"},Rg=Xh((()=>(0,o._)("div",{class:"form-group"},[(0,o._)("button",{type:"submit",class:"submit-button-container"},"确认发布")],-1))),Kg={key:1,class:"else"},Eg=Xh((()=>(0,o._)("a",{href:"login"},"登录",-1)));function $g(e,t,s,i,n,a){return n.isLoggedIn?((0,o.wg)(),(0,o.iD)("div",eg,[(0,o._)("div",tg,[sg,(0,o._)("form",{onSubmit:t[12]||(t[12]=(0,r.iM)(((...e)=>a.submitForm&&a.submitForm(...e)),["prevent"]))},[(0,o._)("div",rg,[(0,o._)("div",og,[(0,o._)("button",{type:"button",onClick:t[0]||(t[0]=(...e)=>a.goBack&&a.goBack(...e))},"返回"),(0,o._)("div",ig,[n.selectedFiles.length>0?((0,o.wg)(),(0,o.iD)("div",ng,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.selectedFiles,((e,t)=>(0,o.wy)(((0,o.wg)(),(0,o.iD)("div",{key:t},[a.isImage(e)?((0,o.wg)(),(0,o.iD)("img",{key:0,src:a.getURL(e),alt:"预览图"},null,8,ag)):((0,o.wg)(),(0,o.iD)("video",{key:1,controls:"",src:a.getURL(e)},null,8,lg)),(0,o._)("button",{onClick:e=>a.removeFile(t)},"X",8,dg)])),[[r.F8,t===n.currentPreviewIndex]]))),128))])):((0,o.wg)(),(0,o.iD)("div",cg," 没有选择文件 "))]),(0,o._)("button",{type:"button",onClick:t[1]||(t[1]=(...e)=>a.prevImage&&a.prevImage(...e))},"＜"),(0,o.Uk)("  "),(0,o._)("button",{type:"button",onClick:t[2]||(t[2]=(...e)=>a.nextImage&&a.nextImage(...e))},"＞"),ug,(0,o._)("input",{type:"file",disabled:a.isFileInputDisabled,ref:"fileInput",onChange:t[3]||(t[3]=(...e)=>a.handleFileChange&&a.handleFileChange(...e)),accept:"image/png, image/jpeg, video/mp4",multiple:"",style:{display:"none"}},null,40,hg),(0,o._)("button",{type:"button",onClick:t[4]||(t[4]=(...e)=>a.triggerFileInput&&a.triggerFileInput(...e))},"上传图片/视频")]),(0,o._)("div",gg,[(0,o._)("div",pg,[mg,(0,o.wy)((0,o._)("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>n.selectedKind=e),onChange:t[6]||(t[6]=(...e)=>a.updateSubcategories&&a.updateSubcategories(...e))},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.kinds,(e=>((0,o.wg)(),(0,o.iD)("option",{key:e.value,value:e.value},(0,h.zw)(e.text),9,_g)))),128))],544),[[r.bM,n.selectedKind]]),wg,vg]),(0,o._)("div",yg,[bg,(0,o.wy)((0,o._)("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>n.selectedSubkind=e)},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.subkinds,(e=>((0,o.wg)(),(0,o.iD)("option",{key:e,value:e},(0,h.zw)(e),9,kg)))),128))],512),[[r.bM,n.selectedSubkind]]),fg,Pg]),(0,o._)("div",xg,[Ag,(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":t[8]||(t[8]=e=>n.goodName=e),placeholder:"请输入商品名称",required:""},null,512),[[r.nr,n.goodName]]),Cg,Ug,n.errors.goodName?((0,o.wg)(),(0,o.iD)("span",Dg,(0,h.zw)(n.errors.goodName),1)):(0,o.kq)("",!0)]),(0,o._)("div",Sg,[Ig,(0,o.wy)((0,o._)("input",{type:"number","onUpdate:modelValue":t[9]||(t[9]=e=>n.price=e),placeholder:"请输入商品价格",required:""},null,512),[[r.nr,n.price]]),Og,Fg,n.errors.price?((0,o.wg)(),(0,o.iD)("span",Tg,(0,h.zw)(n.errors.price),1)):(0,o.kq)("",!0)]),(0,o._)("div",Mg,[Bg,(0,o.wy)((0,o._)("input",{type:"number","onUpdate:modelValue":t[10]||(t[10]=e=>n.stock=e),placeholder:"请输入商品库存",required:""},null,512),[[r.nr,n.stock]]),zg,qg,n.errors.stock?((0,o.wg)(),(0,o.iD)("span",Ng,(0,h.zw)(n.errors.stock),1)):(0,o.kq)("",!0)]),(0,o._)("div",Lg,[Vg,(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":t[11]||(t[11]=e=>n.description=e),placeholder:"请输入商品描述",required:""},null,512),[[r.nr,n.description]]),Zg,Qg,n.errors.description?((0,o.wg)(),(0,o.iD)("span",Gg,(0,h.zw)(n.errors.description),1)):(0,o.kq)("",!0)]),Rg])])],32)])])):((0,o.wg)(),(0,o.iD)("div",Kg,[(0,o.Uk)(" 您还未登录，请先"),Eg]))}var Hg={data(){return{products:[],isLoggedIn:!0,goodName:"",price:"",stock:"",description:"",selectedFiles:[],selectedKind:"猫咪主粮",selectedSubkind:"",currentPreviewIndex:0,kinds:[{value:"猫咪主粮",text:"猫咪主粮"},{value:"猫咪零食",text:"猫咪零食"},{value:"猫咪日用",text:"猫咪日用"}],subkinds:[],errors:{goodName:null,price:null,stock:null,description:null},currentUser:null}},methods:{updateSubcategories(){"猫咪主粮"===this.selectedKind?this.subkinds=["猫干粮","猫湿粮"]:"猫咪零食"===this.selectedKind?this.subkinds=["饼干","罐头","猫条"]:"猫咪日用"===this.selectedKind&&(this.subkinds=["猫砂盆","猫小窝","猫沙发","清洁除味"]),this.subkinds.length>0?this.selectedSubkind=this.subkinds[0]:this.selectedSubkind=""},async submitForm(){if(this.goodName.length>20)return void alert("商品名称不能超过20个字符");if(isNaN(this.price))return void alert("价格需要输入数字");if(isNaN(this.stock))return void(this.errors.stock="库存需要输入数字");if(this.description.length>100)return void alert("商品描述不能超过100个字符");if(0===this.selectedFiles.length)return void alert("请上传至少一个文件");const e=new FormData;e.append("goodname",this.goodName),e.append("price",this.price),e.append("number",this.stock),e.append("description",this.description),e.append("kind",this.selectedKind),e.append("subkind",this.selectedSubkind),this.selectedFiles.forEach((t=>{e.append("mediaFiles",t)}));const t=await fetch("/good/upload-good",{method:"POST",body:e});this.selectedFiles=[];const s=await t.json();"/error"===s.page?this.$router.push({path:"/error",query:{err:s.msg,to:s.data}}):"/success"===s.page?this.$router.push({path:"/success",query:{message:s.msg,to:s.data}}):null===s.page?console.log("未知页面类型"):this.$router.push({path:s.page})},isImage(e){return e&&e.type&&e.type.startsWith("image/")},getURL(e){return URL.createObjectURL(e)},handleFileChange(e){const t=Array.from(e.target.files),s=["image/png","image/jpeg","video/mp4"],r=t.filter((e=>s.includes(e.type)));if(console.log(r),r.length<t.length)return void alert("不支持的文件格式。请上传png、jpg或mp4格式的文件。");const o=3-this.selectedFiles.length,i=r.slice(0,o),n=3,a=10485760;if(t.length>n)return void alert(`您只能上传最多 ${n} 个文件。`);const l=t.some((e=>e.size>a));l?alert("所有文件必须小于10MB，请重新选择文件。"):this.selectedFiles.length+i.length>3?alert("最多只能上传3个文件。"):(this.selectedFiles=[...this.selectedFiles,...r],3===this.selectedFiles.length?e.target.disabled=!0:(e.target.disabled=!1,e.target.value=""),this.$refs.fileInput&&(this.$refs.fileInput.value=""),this.selectedFiles.length<3&&(e.target.disabled=!1))},goBack(){this.$router.go(-1)},removeFile(e){URL.revokeObjectURL(this.selectedFiles[e]),this.selectedFiles.splice(e,1),this.selectedFiles.length<3&&this.$refs.fileInput&&(this.$refs.fileInput.disabled=!1),this.$refs.fileInput&&(this.$refs.fileInput.value="")},triggerFileInput(){this.$refs.fileInput?this.$refs.fileInput.click():console.error("未找到文件输入框。")},prevImage(){this.selectedFiles.length>0&&(this.currentPreviewIndex=(this.currentPreviewIndex-1+this.selectedFiles.length)%this.selectedFiles.length)},nextImage(){this.selectedFiles.length>0&&(this.currentPreviewIndex=(this.currentPreviewIndex+1)%this.selectedFiles.length)}},mounted(){this.updateSubcategories()},computed:{currentFile(){return this.selectedFiles[this.currentPreviewIndex]},isFileInputDisabled(){return this.selectedFiles.length>=3}}};const Yg=(0,a.Z)(Hg,[["render",$g],["__scopeId","data-v-96ee6556"]]);var jg=Yg;const Wg=e=>((0,o.dD)("data-v-139cbb18"),e=e(),(0,o.Cn)(),e),Jg={class:"daohang"},Xg=Wg((()=>(0,o._)("li",null,[(0,o._)("b",null,'欢迎进入"喵咪美食坊"!')],-1))),ep={class:"content"},tp={class:"content-left"},sp={class:"nav"},rp={class:"nav-menu"},op={class:"nav-info"},ip=Wg((()=>(0,o._)("div",{class:"user-image",style:{left:"-40px"}},[(0,o._)("img",{src:Vt,alt:"用户头像",style:{width:"50px",height:"50px",left:"8.9%",position:"absolute"}})],-1))),np={class:"username",style:{"margin-right":"100px"}},ap=Wg((()=>(0,o._)("img",{src:Zt,alt:"分割线",class:"separator-line"},null,-1))),lp={class:""},dp={class:"right",style:{width:"100%"}},cp=Wg((()=>(0,o._)("a",{href:"/#/buyer"},[(0,o._)("img",{src:Ll,alt:"",width:"40",title:"返回商品界面"})],-1))),up={class:"picture-k"},hp=["src"],gp={class:"media-navigation"},pp=(0,o.uE)('<table class="good-2" data-v-139cbb18><tr data-v-139cbb18><td class="goodname" data-v-139cbb18>姓名：</td>诺诺</tr><tr data-v-139cbb18><td class="price" data-v-139cbb18>年龄：</td>1岁</tr><tr data-v-139cbb18><td class="goodname" data-v-139cbb18>性别：</td>妹妹</tr><tr data-v-139cbb18><td class="price" data-v-139cbb18>体重：</td>2.5kg</tr><tr data-v-139cbb18><td class="goodname" data-v-139cbb18>绝育：</td>是</tr><tr data-v-139cbb18><td class="goodname" data-v-139cbb18>疫苗：</td>一针</tr><tr data-v-139cbb18><td class="goodname" data-v-139cbb18>品种：</td>中华田园猫</tr><tr data-v-139cbb18><td class="goodname" data-v-139cbb18>性格</td>活泼好动</tr></table>',1);function mp(e,t,s,i,n,a){return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("ul",Jg,[Xg,(0,o._)("li",{style:{float:"right"},onClick:t[0]||(t[0]=(...e)=>a.handleLogout&&a.handleLogout(...e)),class:"logout-button"},"退出登录")]),(0,o._)("div",ep,[(0,o._)("div",tp,[(0,o._)("div",sp,[(0,o._)("div",rp,[(0,o._)("div",op,[ip,(0,o._)("div",np,(0,h.zw)(a.getUsername),1),ap]),(0,o._)("div",lp,[(0,o._)("h3",{onClick:t[1]||(t[1]=e=>a.navigateTo("BuyerCart")),class:"black-text",style:{cursor:"pointer"}},"我的购物车"),(0,o._)("h3",{onClick:t[2]||(t[2]=e=>a.navigateTo("BuyerLikes")),class:"black-text",style:{cursor:"pointer"}},"我的收藏"),(0,o._)("h3",{onClick:t[3]||(t[3]=e=>a.navigateTo("buyerHistory")),class:"black-text",style:{cursor:"pointer"}},"历史购买记录"),(0,o._)("h3",{onClick:t[4]||(t[4]=e=>a.navigateTo("BuyerShowCat")),class:"black-text",style:{cursor:"pointer"}},"查看我的猫咪信息"),(0,o._)("h3",{onClick:t[5]||(t[5]=e=>a.navigateTo("BuyerUploadCat")),class:"black-text",style:{cursor:"pointer"}},"添加我的猫咪信息")])])])])]),(0,o._)("div",dp,[cp,(0,o._)("div",up,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.selectedProduct.mediaFiles,((s,i)=>(0,o.wy)(((0,o.wg)(),(0,o.iD)("div",{class:"media-container",key:i},[s.isVideo?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("img",{key:0,src:s.url,alt:"商品图片",class:"product-image",style:{width:"415.8px",height:"504.9px"}},null,8,hp)),(0,o._)("div",gp,[(0,o._)("button",{class:"media-navigation-button prev-button",onClick:t[6]||(t[6]=(...t)=>e.handlePrevious&&e.handlePrevious(...t))},"＜"),(0,o._)("button",{class:"media-navigation-button next-button",onClick:t[7]||(t[7]=(...t)=>e.handleNext&&e.handleNext(...t))},"＞")])])),[[r.F8,s.isActive]]))),128))]),pp])],64)}var _p={data(){return{currentUser:null}},created(){this.fetchUsrFromSession()},computed:{isLoggedIn(){return!!this.currentUser},isSeller(){return this.currentUser&&1===this.currentUser.power},isBuyer(){return this.currentUser&&0===this.currentUser.power},getUsername(){return this.currentUser?this.currentUser.username:"未登录"}},methods:{async fetchUsrFromSession(){try{const e=await D.Z.get("/now-usr"),t=e.data;return this.currentUser=t,this.isLoggedIn&&this.isSeller||this.$router.push("/"),!0}catch(e){return console.error("获取用户数据错误:",e),!1}},async handleLogout(){try{await D.Z.get("/logout-control"),this.$router.push("/")}catch(e){console.error("登出失败:",e)}},navigateTo(e){this.$router.push({name:e})}},mounted(){console.log("SellerMain 组件已挂载")}};const wp=(0,a.Z)(_p,[["render",mp],["__scopeId","data-v-139cbb18"]]);var vp=wp;const yp=e=>((0,o.dD)("data-v-b3ad65d0"),e=e(),(0,o.Cn)(),e),bp={class:"main"},kp=yp((()=>(0,o._)("h1",null,"请您添加猫咪信息！",-1))),fp={class:"container"},Pp={class:"left-div",style:{height:"300px"}},xp={id:"preview"},Ap={key:0},Cp=yp((()=>(0,o._)("img",{src:Vt,style:{"max-width":"50%"},alt:"测试图"},null,-1))),Up=yp((()=>(0,o._)("button",null,"X",-1))),Dp=[Cp,Up],Sp={key:1},Ip=yp((()=>(0,o._)("button",{type:"button"},"＜",-1))),Op=yp((()=>(0,o._)("button",{type:"button"},"＞",-1))),Fp=yp((()=>(0,o._)("br",null,null,-1))),Tp={class:"right-div"},Mp={class:"form-group"},Bp=yp((()=>(0,o._)("label",{for:"goodName"},"猫咪姓名：",-1))),zp=yp((()=>(0,o._)("br",null,null,-1))),qp=yp((()=>(0,o._)("br",null,null,-1))),Np={class:"form-group"},Lp=yp((()=>(0,o._)("label",{for:"price"},"猫咪年龄：",-1))),Vp=yp((()=>(0,o._)("br",null,null,-1))),Zp=yp((()=>(0,o._)("br",null,null,-1))),Qp={class:"form-group"},Gp=yp((()=>(0,o._)("label",{for:"kind"},"猫咪性别：",-1))),Rp=yp((()=>(0,o._)("br",null,null,-1))),Kp=yp((()=>(0,o._)("br",null,null,-1))),Ep={class:"form-group"},$p=yp((()=>(0,o._)("label",{for:"price"},"猫咪体重：",-1))),Hp=yp((()=>(0,o._)("br",null,null,-1))),Yp=yp((()=>(0,o._)("br",null,null,-1))),jp={class:"form-group"},Wp=yp((()=>(0,o._)("label",{for:"kind"},"是否绝育：",-1))),Jp=yp((()=>(0,o._)("br",null,null,-1))),Xp=yp((()=>(0,o._)("br",null,null,-1))),em={class:"form-group"},tm=yp((()=>(0,o._)("label",{for:"kind"},"疫苗：",-1))),sm=yp((()=>(0,o._)("br",null,null,-1))),rm=yp((()=>(0,o._)("br",null,null,-1))),om={class:"form-group"},im=yp((()=>(0,o._)("label",{for:"goodName"},"猫咪品种：",-1))),nm=yp((()=>(0,o._)("br",null,null,-1))),am=yp((()=>(0,o._)("br",null,null,-1))),lm={class:"form-group"},dm=yp((()=>(0,o._)("label",{for:"goodName"},"猫咪性格：",-1))),cm=yp((()=>(0,o._)("br",null,null,-1))),um=yp((()=>(0,o._)("br",null,null,-1))),hm=yp((()=>(0,o._)("div",{class:"form-group"},[(0,o._)("button",{type:"submit",class:"submit-button-container"},"确认发布")],-1))),gm=yp((()=>(0,o._)("div",{class:"form-group"},[(0,o._)("button",{type:"submit",class:"submit-button-container"},"取消发布")],-1)));function pm(e,t,s,i,n,a){return(0,o.wg)(),(0,o.iD)("div",bp,[kp,(0,o._)("div",fp,[(0,o._)("div",Pp,[(0,o._)("div",xp,[e.selectedFiles.length>0?((0,o.wg)(),(0,o.iD)("div",Ap,Dp)):((0,o.wg)(),(0,o.iD)("div",Sp," 请上传猫咪照片！ "))]),Ip,(0,o.Uk)("  "),Op,Fp]),(0,o._)("div",Tp,[(0,o._)("div",Mp,[Bp,(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.goodName=t),placeholder:"请输入猫咪的姓名",required:""},null,512),[[r.nr,e.goodName]]),zp,qp]),(0,o._)("div",Np,[Lp,(0,o.wy)((0,o._)("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=t=>e.price=t),placeholder:"请输入猫咪年龄",required:""},null,512),[[r.nr,e.price]]),Vp,Zp]),(0,o._)("div",Qp,[Gp,(0,o.wy)((0,o._)("select",{"onUpdate:modelValue":t[2]||(t[2]=t=>e.selectedKind=t),onChange:t[3]||(t[3]=(...t)=>e.updateSubcategories&&e.updateSubcategories(...t))},null,544),[[r.bM,e.selectedKind]]),Rp,Kp]),(0,o._)("div",Ep,[$p,(0,o.wy)((0,o._)("input",{type:"number","onUpdate:modelValue":t[4]||(t[4]=t=>e.price=t),placeholder:"请输入猫咪体重",required:""},null,512),[[r.nr,e.price]]),Hp,Yp]),(0,o._)("div",jp,[Wp,(0,o.wy)((0,o._)("select",{"onUpdate:modelValue":t[5]||(t[5]=t=>e.selectedKind=t),onChange:t[6]||(t[6]=(...t)=>e.updateSubcategories&&e.updateSubcategories(...t))},null,544),[[r.bM,e.selectedKind]]),Jp,Xp]),(0,o._)("div",em,[tm,(0,o.wy)((0,o._)("select",{"onUpdate:modelValue":t[7]||(t[7]=t=>e.selectedKind=t),onChange:t[8]||(t[8]=(...t)=>e.updateSubcategories&&e.updateSubcategories(...t))},null,544),[[r.bM,e.selectedKind]]),sm,rm]),(0,o._)("div",om,[im,(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":t[9]||(t[9]=t=>e.goodName=t),placeholder:"请输入猫咪品种",required:""},null,512),[[r.nr,e.goodName]]),nm,am]),(0,o._)("div",lm,[dm,(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":t[10]||(t[10]=t=>e.goodName=t),placeholder:"请描述猫咪性格",required:""},null,512),[[r.nr,e.goodName]]),cm,um]),hm,gm])])])}var mm={name:"BuyerUploadCat"};const _m=(0,a.Z)(mm,[["render",pm],["__scopeId","data-v-b3ad65d0"]]);var wm=_m;const vm=e=>((0,o.dD)("data-v-3230c824"),e=e(),(0,o.Cn)(),e),ym={style:{margin:"0"}},bm={key:0},km={class:"left"},fm={class:"daohang"},Pm=vm((()=>(0,o._)("img",{class:"head1",src:we,alt:""},null,-1))),xm={class:"head2"},Am={class:"head4"},Cm={class:"head4"},Um={class:"head4"},Dm={class:"head4"},Sm={class:"head4"},Im={class:"head5"},Om={class:"right"},Fm={class:"goods-container"},Tm={class:"picture"},Mm=["src"],Bm={class:"goodname"},zm={class:"price"},qm={class:"description"},Nm={key:1},Lm={class:"else"},Vm={class:"left"},Zm={class:"daohang"},Qm=vm((()=>(0,o._)("img",{class:"head1",src:we,alt:""},null,-1))),Gm=vm((()=>(0,o._)("tr",null,[(0,o._)("td",{class:"head2"},"游客")],-1))),Rm=vm((()=>(0,o._)("tr",null,[(0,o._)("td",{class:"head4"},[(0,o._)("h3",{class:"head4-1"},"其他功能请登录后使用")])],-1))),Km={class:"head5"},Em=vm((()=>(0,o._)("div",{class:"right"},"该功能请登录后使用",-1)));function $m(e,t,s,r,i,n){return(0,o.wg)(),(0,o.iD)("body",ym,[n.isLoggedIn?((0,o.wg)(),(0,o.iD)("div",bm,[(0,o._)("div",km,[(0,o._)("table",fm,[Pm,(0,o._)("tr",null,[(0,o._)("td",xm,(0,h.zw)(i.username),1)]),(0,o._)("tr",null,[(0,o._)("td",Am,[(0,o._)("h3",{onClick:t[0]||(t[0]=e=>n.navigateTo("BuyerCart")),class:"head4-1",style:{cursor:"pointer"}},"我的购物车")])]),(0,o._)("tr",null,[(0,o._)("td",Cm,[(0,o._)("h3",{onClick:t[1]||(t[1]=e=>n.navigateTo("BuyerLikes")),class:"head4-1",style:{cursor:"pointer"}},"我的收藏")])]),(0,o._)("tr",null,[(0,o._)("td",Um,[(0,o._)("h3",{onClick:t[2]||(t[2]=e=>n.navigateTo("buyerHistory")),class:"head4-1",style:{cursor:"pointer"}},"历史购买记录")])]),(0,o._)("tr",null,[(0,o._)("td",Dm,[(0,o._)("h3",{onClick:t[3]||(t[3]=e=>n.navigateTo("BuyerShowRecommend")),class:"head4-1",style:{cursor:"pointer"}},"展示推荐商品")])]),(0,o._)("tr",null,[(0,o._)("td",Sm,[(0,o._)("h3",{onClick:t[4]||(t[4]=e=>n.navigateTo("BuyerMain")),class:"head4-1",style:{cursor:"pointer"}},"返回主页")])]),(0,o._)("tr",null,[(0,o._)("td",Im,[(0,o._)("button",{onClick:t[5]||(t[5]=(...e)=>n.handleLogout&&n.handleLogout(...e)),class:"head5-1",style:{cursor:"pointer"}},"退出登录")])])])]),(0,o._)("div",Om,[(0,o._)("div",Fm,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.items,(e=>((0,o.wg)(),(0,o.iD)("div",{key:e.goodid,class:"good-item"},[(0,o._)("div",Tm,[(0,o._)("img",{src:n.getImageUrl(e.picture),alt:"猫粮图片"},null,8,Mm)]),(0,o._)("div",Bm,(0,h.zw)(e.goodname.trim()),1),(0,o._)("div",zm,"价格: "+(0,h.zw)(e.price),1),(0,o._)("div",qm,"每日推荐饮食量: "+(0,h.zw)(e.weight)+"g",1)])))),128))])])])):((0,o.wg)(),(0,o.iD)("div",Nm,[(0,o._)("div",Lm,[(0,o._)("div",Vm,[(0,o._)("table",Zm,[Qm,Gm,Rm,(0,o._)("tr",null,[(0,o._)("td",Km,[(0,o._)("button",{onClick:t[6]||(t[6]=(...e)=>n.handleLogout&&n.handleLogout(...e)),class:"head5-1",style:{cursor:"pointer"}},"返回登录")])])])]),Em])]))])}var Hm={data(){return{items:[],username:"",currentUser:null}},created(){this.fetchUserData()},computed:{isLoggedIn(){return!!this.currentUser}},methods:{...(0,an.nv)(["logout"]),getImageUrl(e){const t="~@/",s=e.replace(/^\.\//,"");return t+s},async fetchUserData(){try{const e=await D.Z.get("/now-usr"),t=e.data;t&&(this.currentUser=t,this.username=t.username,this.fetchRecommendedCatFood())}catch(e){console.error("获取用户数据错误:",e)}},async fetchRecommendedCatFood(){try{if(this.isLoggedIn&&this.currentUser&&this.currentUser.userid){const e=await D.Z.get(`/cat/show-recommend/${this.currentUser.userid}`),{data:t}=e;t&&t.data&&(this.items=t.data.slice(0,3))}}catch(e){console.error("获取推荐猫粮数据错误:",e)}},handleLogout(){this.logout(),this.$router.push("/")},navigateTo(e){this.$router.push({name:e})}}};const Ym=(0,a.Z)(Hm,[["render",$m],["__scopeId","data-v-3230c824"]]);var jm=Ym;const Wm=[{path:"/",component:O},{path:"/login",component:O},{path:"/error",component:fc},{path:"/register",component:oe},{path:"/choose-register",component:_e},{path:"/buyer",name:"BuyerMain",component:Lt},{path:"/seller",name:"SellerMain",component:ls,redirect:{name:"ShowGoods"},children:[{path:"ShowGoods",name:"ShowGoods",component:xr},{path:"ShowSearchGoods",name:"ShowSearchGoods",component:tu},{path:"update-password",name:"UpdatePassword",component:Ts},{path:"upload-onegood",name:"UploadOneGood",component:jg},{path:"show-userinfo",name:"ShowUserInfo",component:Er},{path:"user-order-history",name:"UserOrderHistory",component:cn},{path:"show-historygoods",name:"ShowHistoryGoods",component:ko},{path:"show-searchhistorygoods",name:"ShowSearchHistoryGoods",component:Iu},{path:"show-allusers",name:"ShowAllUsers",component:No},{path:"upload-multiplegoods",name:"UploadMultipleGoods",component:xi}]},{path:"/forgot-password",name:"ForgotPasswordComponent",component:Ni},{path:"/guest",name:"GuestComponent",component:Ki},{path:"/success",name:"Success",component:vn,props:!0},{path:"/secret-question",name:"SecretQuestion",component:On},{path:"/buyer-history",name:"buyerHistory",component:aa},{path:"/buyer-search",name:"buyerSearch",component:Jh},{path:"/likes",name:"BuyerLikes",component:Ka},{path:"/cart",name:"BuyerCart",component:Nl},{path:"/buyer-fill-info",name:"BuyerFillInfo",component:wd},{path:"/buyer-shop",name:"BuyerShop",component:mc},{path:"/buyer-show-cat",name:"BuyerShowCat",component:vp},{path:"/buyer-upload-cat",name:"BuyerUploadCat",component:wm},{path:"/buyer-show-recommend",name:"BuyerShowRecommend",component:jm}],Jm=(0,u.p7)({history:(0,u.r5)(),routes:Wm});var Xm=Jm,e_=(0,an.MT)({state:{admin:null},getters:{isLoggedIn:e=>!!e.admin,isSeller:e=>e.admin&&1===e.admin.power,isBuyer:e=>e.admin&&0===e.admin.power},mutations:{setAdmin(e,t){e.admin=t,e.isLoggedIn=!0,localStorage.setItem("admin",JSON.stringify(t))},clearAdmin(e){e.admin=null,localStorage.removeItem("admin")}},actions:{login({commit:e},t){console.log("Login action triggered",t);const s="seller",r="buyer",o="123";t.username===s&&t.password===o?(e("setAdmin",{username:s,power:1}),console.log("Admin set to seller")):t.username===r&&t.password===o?(e("setAdmin",{username:r,power:0}),console.log("Admin set to buyer")):console.log("Invalid credentials")},logout({commit:e}){e("clearAdmin")}}});const t_=(0,r.ri)(c),s_=localStorage.getItem("admin");s_&&e_.commit("setAdmin",JSON.parse(s_)),t_.use(Xm),t_.use(e_),t_.mount("#app")},6129:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAA6CAMAAADx2BEqAAAA2FBMVEX9pmf///8AAAD/+vf+xp7+vY7/9u//7+T/8Ob//fv+07T+6Nf9pmf9pmb9pmf5pGb9pmj9q2/+3MT///7//v3//Pr/+fX+38j/+/jtpFv9p2f8pmf+v5P9sHj+wpb/69z+2r/9uIf/8un9s37//fz/9/H+1Lb+z63+xZ39tYD+59b/6tr+5ND/8OX/+PT/9e7+yKH+3sf/pmb+4cv/9Oz+0bD+5dL+1rr+1bj+59T+yKD+yqX+zKf+4c3+zar+xZv+4Mr9u4v/7N/+w5j+2Lz9uoj+v5H/7+Oq/kPNAAAASHRSTlP//wD////////////9zO0tm///////////Dotc/////////////////////////////zz///////////////////////////+1ri3VAAADwklEQVR4nO2d13biMBBAPYHQiytlaQk1QAiQQnrZ/v9/tCM35LLJPuzitTT3IUHCnKNzdJFHwhopRz7tjlqtVRRCaCq1qtpp73vdF6CuUt9LQ0WthwX4lHSbiMPyKSBAvZp0e4hDU3UGAVuAy1rSrSEOT+3SE6BO/S8lNTYGMAFo/JeUqiMAxX/SgpGgclRPuhVEctRRADXpRhDJoR4pbcnWf3pa0i34n6i0lU7SbfinaA+9YMW0sSADODqK2HeArTns8+UbC8xt+CLta9bnGMu91325e6iWJoSqCD0H3GQAGjO+5tkAaxq66jgHPmUsZ/FTHoWDtTUZqorYi0Az7EvrhKuY5wEmgUFBbgFqiuAx4GYCYDa52/5jA2AQvAYFaDw3kbLpCZBjxea5JbwAgnc/0l+jAedchW7dhwJDFCDH7v1KqegJ4PS7/4JIMd1rWHexa2PR2RUkgNh0l13WtSSAzNxcZFxaBpgtr5Cx40MSQFjm0Wk8i/Ds3t5DAoiKthg/hwI+EkAmdBOMwo9gHQkgEb2FEV4JJAGkQtMx+i/q/M8/JIBcTHFZ17zlKsIClPL5lQXWKo8MDZjgv8IYMqzovSgduM3E3+Tlwgj8ABwWQI9fIIgsFhBpJbudvxcDkABy4K8E8QtBuVf7PYoBJCB2LTiTtd8jAYTm1P5LAsjKcW59y68G0jRQMmYWZB648h8IsGmRAOJwBbD6YCEIq67tG4UrgPuPBBABbQXGG18RI4D/jXd7/sSAexJAEM4a0HriK2IEmBbdpwRdAXDQcKb+JED6wW+zM7x7xAiwBbiyX7gCDKDorP6SAOlnAMA/ERorwMD7tcAR4PMaMmckgBj0J9632SMqAE4C3HmCI8BTyxs0SIDUczcOd3dUAOz24YgT4M1wJwEkQPpZRnaBRAXAa9y7BEaDZWU09AcNEiDtdCdg4IO//N6vyC99OE+wZkr/S365w01D92wY8AzBRSTxBRB6b9CtCQ2M594VYAfsDoCRH8O6GeHmwR3eO5r648vQ2SsoMhWxN4fiHIAtA54u7Ad84ig9tmB8h5cWsPuNi28samDOlB0/TH5jqYjUhN4ePlpY7gz/92g7M++EgA7ffxosInCeEzGWgYdJBKQqeIII7Sm0FTzmkpNNoDxvso/Mz1h6iMASkpCogqeIIT6gI12SKIIHk0RRmjiZwTRxlChSZliiSEoVKy92qlhKFi0tbrJoShcvKX66eDowQkr2B0bQkTEywh8ZQ4dGyUfw0Cg6Nk4uYo6No4MjJSF8cOQvbKw8lNEyy/cAAAAASUVORK5CYII="}},t={};function s(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,s),i.exports}s.m=e,function(){var e=[];s.O=function(t,r,o,i){if(!r){var n=1/0;for(c=0;c<e.length;c++){r=e[c][0],o=e[c][1],i=e[c][2];for(var a=!0,l=0;l<r.length;l++)(!1&i||n>=i)&&Object.keys(s.O).every((function(e){return s.O[e](r[l])}))?r.splice(l--,1):(a=!1,i<n&&(n=i));if(a){e.splice(c--,1);var d=o();void 0!==d&&(t=d)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[r,o,i]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.p="/"}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,r){var o,i,n=r[0],a=r[1],l=r[2],d=0;if(n.some((function(t){return 0!==e[t]}))){for(o in a)s.o(a,o)&&(s.m[o]=a[o]);if(l)var c=l(s)}for(t&&t(r);d<n.length;d++)i=n[d],s.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return s.O(c)},r=self["webpackChunkmaoliang_project"]=self["webpackChunkmaoliang_project"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=s.O(void 0,[998],(function(){return s(6368)}));r=s.O(r)})();
//# sourceMappingURL=app.js.map