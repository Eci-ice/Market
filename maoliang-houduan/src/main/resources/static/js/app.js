(function(){"use strict";var e={6203:function(e,t,s){var i=s(9242),r=s(3396);const o={id:"app"};function n(e,t){const s=(0,r.up)("router-view");return(0,r.wg)(),(0,r.iD)("div",o,[(0,r.Wm)(s)])}var l=s(89);const a={},d=(0,l.Z)(a,[["render",n]]);var c=d,u=s(2483),g=s(7139),h="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGwAAAA0CAMAAABYZS1lAAABZVBMVEUAAABpOhBpOhBpORBpOxFmMxppOA9pOQ9pOhBoORBpOhBrOA5mQA1qOBMAAABpOhBsNg+AQABpOg9qOg9VKgBsOxRpOhFqQBVpORBpOhBjOQ5qOhBwQBBpOhBpORBpOhBpOhFpOhBpOg9mMxFpOhBpOhBpORFmPRRpORBpOxBoORBoORBpOhBpOhBpOhBpOxCAAABnOw9pOxBpOhBqOhBpOBFpOQ5xORxoOg5nNw5qOhBgQABoOBBiOxRoOhFpOhFpOhBqOhFrOQ9pOQ9oOhFoOg9oOQ9mOg9oOgxrPA1oOhBqOg9pOhBmMwBrNg1tPQxtSQBpOhBoORFtNxJpOhBpOw1pNxFqPhJpOg9nOw9pOxBoOg9pOxFpOQ9qORBrOxJqOg5pOQ9pORFqOxFqOw9pOhBpOhBpOxBpPA9oOhBoPBBkNwtqOQ5pOhBoOhBqNQtrOhBqOhBpPA9pOw5pOxFrOA9nOhLrquJsAAAAd3RSTlMA/8mBegpEpfJi4DcUKQH6IQTWVAYaiAw/1BK6EJ/evUvuVA+u9moZs4xRj8Bh5aECRcQwkTtICVglywggDZpbg3tD5yyVeCMWJl11bQUTFQfiTA7ZJy4dpzS4xj2Xbys1hsiYV3Hc0RFzQBckzqQYH4AiOKoyOcXKcFQAAAL6SURBVHic7Zf3Q9pAFMd5DMWIiWmNDEVA9nJVrXsCMuqqtlqtdVW79/j7e5dAkjtCSCj9qfn+lFy+yYe7e+/dw2bJkiVLloxosOf90T/7OP+iR9Yguu8Dd3/9kWtcYGWf4HRo6ZEpmKsXZDlJWJiD4nLDN8AoPpUemoWN2bGWIhSsHIKJOdmHYJJPpbEOYJghX8gw3gHg4NUwyadSX9dgWxHIJRVf92Afz1InFOzyGJiXKl/3YAPMg0ES9swOXEKJRWOwqfGQveQyDUMsmPWqfQh2qiSJpDQFm+dQfG6YhV35aZah0B/GIyOjpmC/1yMAwTLpMwJz4pGzqLmZJUfgYk9nNVqpghZk+7V6p40sY3n9cQcsmy06vf5Vh0XCVj2eJxCf9ygKKGndBREwcYcJiXlQo+sUqY3dbsKahwmtDXUEE5fRPe1ZvIHPgrSO+EMZ6Ti5jYP/WuOYyZuDXR6SAcLPwiehyYoKRtrwd1vDfEBVkCqAj3Z6Y+B++lesBuzNCgFDKTxMO59PgH2lC7AqKjIEDN3ceCjnK4BQmC6P++ZhTuh1kVV/AaBKGgMhjUDkMqZhQ2uwwZMwYQlSq4RRLOmamWFcQ3lHZv+cG8dtVkGBsZsAZDQsN9WhwAyKK1MwLB/H9PTWe5vGSb1zDKGA/muVe/o8YUcDU21YfBpiMfDvEDC2BFDSK6qoS6GLx9sgwH2bTvLXhDuTzMGIOJHGMu4KMxD5ofseCs8EMZDA2zgpt5pa8k7Cz6itwEAWV3gRFs0vOXGPWp+ttlBEubeIkbYnNe4PcRvF5jkUJWJN+hZDgTcsNo7+SusXUZKfnxAjKF/QEa/T8fAJjqvhKbmCqIzY+KIY0vHgHIunDNvTrfYNP70mS6U3y0FqsTXrwwVwm9KxXGBy/Qd3OJsOa1/Ekb1TYHw0jM9KbTjqvZmmYHCN6sVUMhd/dyBdsmEBpxeXCss9wVF6ofllXyO7ddsNTS2SP33g9qpdpuA/T0X7TPbuu1mWJUv/pf4AcFVSLx3KbYcAAAAASUVORK5CYII=",p="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGwAAAA0CAMAAABYZS1lAAABblBMVEUAAABpOhBpOA9mQA1pOhBqOBNpOhBpOxFqOg9wQBBVKgBoOhFqOhBpOhFpORCAQACAAABpOhBtSQAAAABpOhBpORFoORBjOQ5mMxpsNg9pOhBiOxRpORBpOhBrOQ9pOhBpOhBpOg9qQBVrOxJmMxFoOhBoOhBoORBnOw9oOQ5qOxBpOhBoOhBpOg9pOhFmOg9oOhBpOxBpOhBrOA5pOg9qPhJqOw1oOg5pOQ9qOhBoOBBpORFpOg9kNwtoOhFpOhFtNxJoOhBpOhBqORBpOhBsOxRpOQ9pOhBqORFpNxFoOg9oOxFqOhBpOhBpOhBpOhBpOhBpOhBVVQBpOhBpOQ9qORBoOg9mPRRoOgxpORBpOxFmOQ1nOw9nOhJpOg9tPQxpOQ9qOhFqOQ5pOxFoPBBqOhBrOhBqOg9pPA9nNw5pORBqOxFqOw9pOxFpOw9pOhBpOhBqOxBoOBFgQABqOxFdLhdpPA9oORNpOw5qORCsklCSAAAAenRSTlMA/0QU4CnJelQQBpq6iD8EAvoHAe7IYhIKIfINgb9D2YPWDCsPsH9RNEeuzpGnuSPSocI39x0nWOicIEx1FyxpDlzsb7QapWFZLsVKy3Kf243iA+VVMVMZFq2LKEU5lhV4eySqQDAfZCIlbDxXebaT1HE7CJgLERs4XuY8DycAAAN4SURBVHic7ZZnVxpBFIb3uggCIruwkV6UIkURFcUWu7H3aIwaeyyJLT3597mz7LKzgOsSo+fkhPfTbJl5Zube+84wNdVUU03/ppzmxJzzuWCtb6HF81wwZhJgvOwl52IVWVSf1tcfAevxglU9HIp9AYoaVE8AjeYqhq83qPqWquEhWMr3d2FkGw9u4W6TbKPb8bGuqK1QhY3QhsWSha7JBWUYUTsFGJEvVmkN2Dlsrw4mTc45M2H6pvrWrMA8LcqwlmKaRNbAVAWLgg1mAPpnOdK0X6++VMOCwL+WuzQB3ya3IE+NxW0FjIduXTCGO+0G6O4ja+Qhc6aCmWBjTlmwt6fQaihiRSV5jHJYBwzj7mEcSzkQ9rhzHozIpGAYsoxL7nIOQqIUK8qmpxaa4y6S32T7E8ZYbxxZEWZ3lgq9KhNsRZuxQaiTGsdEYDdRTVZvGk6iEoxhN2MAmUtuPAc2B5Uq3qDctt/CfK/YslghO0gN1HeHUb/SNFe7H4SgvDJuwQD8wDTDjC0DfJVp6JnGiOxW7lfyViktSdG98TNtIw8K0O6WYBcpnNsHZExzrV0AtxJtboMqcte8nFLYZ0BZvR5FQpDeFTuaoqYcwNR78taWvSK0Q3Ge9lXaUX6kYacAo4tPl94EQMjjkAibEABWZsWp4gZZLfipUFzE0gKdLPtujcDwqaPgMM39YiuhF2juAH4Yf3aOhHDeQpjUMmp6kWwqLlr4iQtrlzIaMQjDSlZLv/E7ZjBE0V9YzrisUckUk1bwDuHH5ER4TAwqDWsz0krnqoqbq22KVH6JUix+sh+je3FxEAwUTK3tRf3GPxgn2wd8IG9e2Ffme7Mk7SdRvaF9/14YvjvSe20hKQfZ6wut/x3+Y9u9MDzbh3WyGGYkNekRnV4UBr/imXE/DHuUvdOS3cXK5yIFO6hDZy6HjZ3Sx+uIysj0iDplKJhqkQpMfY2wWkzFI+DpYT4rfdN0ml1KSB4B6y46iErmRqqmv6N5r4hu90gYdduihfaolNko+aPry5PBmngq8/Wc1AgLDBWy6xPIJkuaNIwYMbk2qrs6j+hkzBPYstaNR+OeWpog5UKrlk5totZVHqYuNVl/CBvNGo2LaNFx+oBxmx+yLizqChqiYT62LKelKZ5sPzC6LvX5/fSdsEy+Sb/fv/S5umtBTTX9h/oNtfte1rPZY7oAAAAASUVORK5CYII=";const m=e=>((0,r.dD)("data-v-592f61a3"),e=e(),(0,r.Cn)(),e),_=m((()=>(0,r._)("ul",{class:"daohang"},[(0,r._)("li",null,[(0,r._)("h2",null,'"喵咪美食坊"欢迎您!')]),(0,r._)("div",{class:"cat-background"})],-1))),w={key:0,class:"login"},v={class:"input"},y=m((()=>(0,r._)("img",{src:h,alt:"账号",style:{height:"25px","vertical-align":"middle"}},null,-1))),b={class:"input"},k=m((()=>(0,r._)("img",{src:p,alt:"密码",style:{height:"25px","vertical-align":"middle"}},null,-1))),f={class:"image-buttons"},P=m((()=>(0,r._)("button",{class:"butt-1",type:"submit"},"登录",-1))),A={key:1,class:"else"},x={id:"b"},C={key:0,class:"error"};function U(e,t,s,o,n,l){const a=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)(r.HY,null,[_,l.isLoggedIn?((0,r.wg)(),(0,r.iD)("div",A,[(0,r.Uk)(" 您已登录，无需再登录!!! "),(0,r.Wm)(a,{to:l.adminRoute},{default:(0,r.w5)((()=>[(0,r.Uk)("返回")])),_:1},8,["to"])])):((0,r.wg)(),(0,r.iD)("div",w,[(0,r._)("form",{onSubmit:t[2]||(t[2]=(0,i.iM)(((...e)=>l.handleLogin&&l.handleLogin(...e)),["prevent"]))},[(0,r._)("div",v,[y,(0,r.wy)((0,r._)("input",{type:"text",name:"username",placeholder:"账号","onUpdate:modelValue":t[0]||(t[0]=e=>n.credentials.username=e)},null,512),[[i.nr,n.credentials.username]])]),(0,r._)("div",b,[k,(0,r.wy)((0,r._)("input",{type:"password",name:"password",placeholder:"密码","onUpdate:modelValue":t[1]||(t[1]=e=>n.credentials.password=e)},null,512),[[i.nr,n.credentials.password]])]),(0,r.Wm)(a,{to:"/forgot-password",class:"forgot-password"},{default:(0,r.w5)((()=>[(0,r.Uk)("忘记密码?")])),_:1}),(0,r._)("div",f,[P,(0,r.Wm)(a,{to:"/register",class:"butt-1"},{default:(0,r.w5)((()=>[(0,r.Uk)("注册")])),_:1}),(0,r.Wm)(a,{to:"/buyer",class:"butt-1"},{default:(0,r.w5)((()=>[(0,r.Uk)("游客访问")])),_:1})])],32)])),(0,r._)("div",x,[n.error?((0,r.wg)(),(0,r.iD)("div",C,(0,g.zw)(n.error),1)):(0,r.kq)("",!0)])],64)}s(560);var D=s(1076);D.Z.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded";var F={data(){return{credentials:{username:"",password:""},error:"",mockAdminData:null,currentUser:null}},created(){this.fetchUsrFromSession()},computed:{isLoggedIn(){return!!this.currentUser},isSeller(){return this.currentUser&&1===this.currentUser.power},isBuyer(){return this.currentUser&&0===this.currentUser.power},adminRoute(){return this.isSeller?"/seller":"/buyer"}},methods:{async fetchUsrFromSession(){try{const e=await D.Z.get("/now-usr"),t=e.data;return this.currentUser=t,!0}catch(e){return console.error("获取用户数据错误:",e),!1}},async handleLogin(){try{const e={username:this.credentials.username,password:this.credentials.password},t=await fetch("/usr/login-control",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}),s=await t.json();"/error"===s.page?this.$router.push({path:"/error",query:{err:s.msg,to:s.data}}):"/success"===s.page?this.$router.push({path:"/success",query:{message:s.msg,to:s.data}}):null===s.page?console.log("未知页面类型"):this.$router.push({path:s.page})}catch(e){console.error("登录错误:",e),this.error="登录失败"}},async handleLogout(){try{await D.Z.get("/logout-control"),this.$router.push("/")}catch(e){console.error("登出失败:",e)}}}};const I=(0,l.Z)(F,[["render",U],["__scopeId","data-v-592f61a3"]]);var O=I;const S=e=>((0,r.dD)("data-v-4709f63e"),e=e(),(0,r.Cn)(),e),M={class:"daohang"},B={class:"title-container"},T=S((()=>(0,r._)("h2",{class:"registration-title"},"请您注册！",-1))),z={class:"login",style:{top:"53%"}},q={key:0},N={key:1},V={class:"input"},L=S((()=>(0,r._)("label",{for:"newusername",style:{top:"-30px","font-size":"20px","font-weight":"bold"}},"用户名",-1))),Q={class:"input"},G=S((()=>(0,r._)("label",{for:"newpwd",style:{top:"-30px","font-size":"20px","font-weight":"bold"}},"密码",-1))),K={class:"input"},R=S((()=>(0,r._)("label",{for:"newquestion",style:{top:"-30px","font-size":"20px","font-weight":"bold"}},"设置密保问题",-1))),Z={class:"input"},Y=S((()=>(0,r._)("label",{for:"newanswer",style:{top:"-30px","font-size":"20px","font-weight":"bold"}},"设置答案",-1))),H={class:"input"},E=S((()=>(0,r._)("label",null,"我是：",-1))),j={key:0,class:"input"},$=S((()=>(0,r._)("label",{for:"newaddress",style:{top:"-30px","font-size":"20px","font-weight":"bold"}},"默认收货地址",-1))),W={key:1,class:"input"},J=S((()=>(0,r._)("label",{for:"newphone",style:{top:"-30px","font-size":"20px","font-weight":"bold"}},"联系电话",-1))),X={class:"image-buttons",style:{"margin-bottom":"25px"}},ee=["src"];function te(e,t,o,n,l,a){const d=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("ul",M,[(0,r._)("div",B,[T,(0,r.Wm)(d,{to:"/"},{default:(0,r.w5)((()=>[(0,r.Uk)("返回初始页面")])),_:1})])]),(0,r._)("div",z,[l.isSeller?((0,r.wg)(),(0,r.iD)("h2",q,"请您注册卖家账户！")):((0,r.wg)(),(0,r.iD)("h2",N,"请您注册买家账户！")),(0,r._)("form",{onSubmit:t[11]||(t[11]=(0,i.iM)(((...e)=>a.handleRegister&&a.handleRegister(...e)),["prevent"]))},[(0,r.wy)((0,r._)("input",{type:"hidden","onUpdate:modelValue":t[0]||(t[0]=e=>l.form.userType=e)},null,512),[[i.nr,l.form.userType]]),(0,r._)("div",V,[L,(0,r.wy)((0,r._)("input",{id:"newusername",type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>l.form.username=e),required:""},null,512),[[i.nr,l.form.username]])]),(0,r._)("div",Q,[G,(0,r.wy)((0,r._)("input",{id:"newpwd",type:"password","onUpdate:modelValue":t[2]||(t[2]=e=>l.form.password=e),required:""},null,512),[[i.nr,l.form.password]])]),(0,r._)("div",K,[R,(0,r.wy)((0,r._)("input",{id:"newquestion",type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>l.form.question=e),required:""},null,512),[[i.nr,l.form.question]])]),(0,r._)("div",Z,[Y,(0,r.wy)((0,r._)("input",{id:"newanswer",type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>l.form.answer=e),required:""},null,512),[[i.nr,l.form.answer]])]),(0,r._)("div",H,[E,(0,r._)("div",null,[(0,r.wy)((0,r._)("input",{type:"radio",id:"buyer",value:"0","onUpdate:modelValue":t[5]||(t[5]=e=>l.form.userType=e),onChange:t[6]||(t[6]=e=>a.updateUserType("0"))},null,544),[[i.G2,l.form.userType]]),(0,r.Uk)(" 买家 "),(0,r.wy)((0,r._)("input",{type:"radio",id:"seller",value:"1","onUpdate:modelValue":t[7]||(t[7]=e=>l.form.userType=e),onChange:t[8]||(t[8]=e=>a.updateUserType("1")),required:""},null,544),[[i.G2,l.form.userType]]),(0,r.Uk)(" 卖家 ")])]),l.isSeller?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",j,[$,(0,r.wy)((0,r._)("input",{id:"newaddress",type:"text","onUpdate:modelValue":t[9]||(t[9]=e=>l.form.address=e),required:""},null,512),[[i.nr,l.form.address]])])),l.isSeller?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",W,[J,(0,r.wy)((0,r._)("input",{id:"newphone",type:"text","onUpdate:modelValue":t[10]||(t[10]=e=>l.form.phone=e),required:""},null,512),[[i.nr,l.form.phone]])])),(0,r._)("div",X,[(0,r._)("input",{class:"input-image-button",type:"image",src:s(6129),alt:"登录",title:"登录",name:"action",value:"登录"},null,8,ee)])],32)])])}D.Z.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded";var se={data(){return{isSeller:!0,form:{power:"1",username:"user",phone:"1234567890",address:"测试地址",password:"user",question:"我的生日？",answer:"1月1日"}}},methods:{async handleRegister(){try{const e={username:this.form.username,password:this.form.password,question:this.form.question,answer:this.form.answer,power:this.form.userType,address:this.form.address,phone:this.form.phone},t=await fetch("/usr/register-control",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}),s=await t.json();"error"===s.msg?console.log(s.msg):"rename"===s.msg?alert(s.msg):"success"===s.msg&&(console.log("success"),console.log(s.msg),alert("Register Success!"),this.$router.push("/"))}catch(e){alert("Register fail!")}},updateUserType(e){this.isSeller="1"===e,this.form.userType=e}},created(){this.isSeller="1"===this.$route.query.registeruser}};const ie=(0,l.Z)(se,[["render",te],["__scopeId","data-v-4709f63e"]]);var re=ie;const oe=e=>((0,r.dD)("data-v-6b32fe48"),e=e(),(0,r.Cn)(),e),ne=oe((()=>(0,r._)("ul",{class:"daohang"},[(0,r._)("div",{class:"cat-background"})],-1))),le={class:"title-container",style:{"margin-bottom":"10000px"}},ae=oe((()=>(0,r._)("h2",{style:{"margin-left":"690px"}},"请您注册！",-1))),de={class:"login"},ce=oe((()=>(0,r._)("button",{class:"butt-1"},"我是买家",-1))),ue=oe((()=>(0,r._)("button",{class:"butt-1"},"我是卖家",-1))),ge={key:0,class:"error"};function he(e,t,s,i,o,n){const l=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",null,[ne,(0,r._)("div",le,[ae,(0,r.Wm)(l,{to:"/"},{default:(0,r.w5)((()=>[(0,r.Uk)("返回初始页面")])),_:1})]),(0,r._)("div",de,[(0,r.Wm)(l,{to:{path:"/register",query:{registeruser:"0"}}},{default:(0,r.w5)((()=>[ce])),_:1}),(0,r.Wm)(l,{to:{path:"/register",query:{registeruser:"1"}}},{default:(0,r.w5)((()=>[ue])),_:1})]),o.error?((0,r.wg)(),(0,r.iD)("div",ge,(0,g.zw)(o.error),1)):(0,r.kq)("",!0)])}var pe={data(){return{error:""}}};const me=(0,l.Z)(pe,[["render",he],["__scopeId","data-v-6b32fe48"]]);var _e=me,we=s.p+"img/head.png";const ve=e=>((0,r.dD)("data-v-589313ae"),e=e(),(0,r.Cn)(),e),ye={style:{margin:"0px"}},be={key:0},ke={class:"left"},fe={class:"daohang"},Pe=ve((()=>(0,r._)("img",{class:"head1",src:we,alt:""},null,-1))),Ae={class:"head2"},xe={class:"head4"},Ce={class:"head4"},Ue={class:"head4"},De={class:"head5"},Fe={class:"right"},Ie=ve((()=>(0,r._)("div",{class:"centered-container"},[(0,r._)("h2",null,"欢迎来到猫咪美食坊！")],-1))),Oe={class:"centered-container"},Se=ve((()=>(0,r._)("option",{value:"猫咪主粮"},"猫咪主粮",-1))),Me=ve((()=>(0,r._)("option",{value:"猫咪零食"},"猫咪零食",-1))),Be=ve((()=>(0,r._)("option",{value:"猫咪日用"},"猫咪日用",-1))),Te=[Se,Me,Be],ze=ve((()=>(0,r._)("br",null,null,-1))),qe=ve((()=>(0,r._)("br",null,null,-1))),Ne=ve((()=>(0,r._)("input",{type:"submit",value:"搜索",style:{width:"130px",cursor:"pointer"}},null,-1))),Ve=ve((()=>(0,r._)("div",{id:"search_list"},null,-1))),Le=ve((()=>(0,r._)("br",null,null,-1))),Qe={class:"goods"},Ge=["onClick"],Ke={class:"media-container"},Re=["src"],Ze=["src"],Ye={class:"media-navigation"},He=["onClick"],Ee=["onClick"],je=["onClick"],$e=ve((()=>(0,r._)("br",null,null,-1))),We={class:"pagination"},Je=["disabled"],Xe={id:"page-info"},et=["disabled"],tt={key:1},st={class:"else"},it={class:"left"},rt={class:"daohang"},ot=ve((()=>(0,r._)("img",{class:"head1",src:we,alt:""},null,-1))),nt=ve((()=>(0,r._)("tr",null,[(0,r._)("td",{class:"head2"},"游客")],-1))),lt=ve((()=>(0,r._)("tr",null,[(0,r._)("td",{class:"head4"},[(0,r._)("h3",{class:"head4-1"},"其他功能后登录使用")])],-1))),at={class:"head5"},dt={class:"right"},ct=ve((()=>(0,r._)("div",{class:"centered-container"},[(0,r._)("h2",null,"欢迎来到猫咪美食坊！")],-1))),ut={class:"centered-container"},gt=ve((()=>(0,r._)("option",{value:"猫咪主粮"},"猫咪主粮",-1))),ht=ve((()=>(0,r._)("option",{value:"猫咪零食"},"猫咪零食",-1))),pt=ve((()=>(0,r._)("option",{value:"猫咪日用"},"猫咪日用",-1))),mt=[gt,ht,pt],_t=ve((()=>(0,r._)("br",null,null,-1))),wt=ve((()=>(0,r._)("br",null,null,-1))),vt=ve((()=>(0,r._)("input",{type:"submit",value:"搜索",style:{width:"130px",cursor:"pointer"}},null,-1))),yt=ve((()=>(0,r._)("div",{id:"search_list"},null,-1))),bt=ve((()=>(0,r._)("br",null,null,-1))),kt={class:"goods"},ft=["onClick"],Pt={class:"media-container"},At=["src"],xt=["src"],Ct={class:"media-navigation"},Ut=["onClick"],Dt=["onClick"],Ft=["onClick"],It=ve((()=>(0,r._)("br",null,null,-1))),Ot={class:"pagination"},St=["disabled"],Mt={id:"page-info"},Bt=["disabled"];function Tt(e,t,s,o,n,l){return(0,r.wg)(),(0,r.iD)("body",ye,[l.isLoggedIn?((0,r.wg)(),(0,r.iD)("div",be,[(0,r._)("div",ke,[(0,r._)("table",fe,[Pe,(0,r._)("tr",null,[(0,r._)("td",Ae,(0,g.zw)(l.getUsername),1)]),(0,r._)("tr",null,[(0,r._)("td",xe,[(0,r._)("h3",{onClick:t[0]||(t[0]=e=>l.navigateTo("BuyerCart")),class:"head4-1",style:{cursor:"pointer"}},"我的购物车")])]),(0,r._)("tr",null,[(0,r._)("td",Ce,[(0,r._)("h3",{onClick:t[1]||(t[1]=e=>l.navigateTo("BuyerLikes")),class:"head4-1",style:{cursor:"pointer"}},"我的收藏")])]),(0,r._)("tr",null,[(0,r._)("td",Ue,[(0,r._)("h3",{onClick:t[2]||(t[2]=e=>l.navigateTo("buyerHistory")),class:"head4-1",style:{cursor:"pointer"}},"历史购买记录")])]),(0,r._)("tr",null,[(0,r._)("td",De,[(0,r._)("button",{onClick:t[3]||(t[3]=(...e)=>l.handleLogout&&l.handleLogout(...e)),class:"head5-1",style:{cursor:"pointer"}},"退出登录")])])])]),(0,r._)("div",Fe,[Ie,(0,r._)("div",Oe,[(0,r._)("form",{onSubmit:t[6]||(t[6]=(0,i.iM)(((...e)=>l.handleSearch&&l.handleSearch(...e)),["prevent"]))},[(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>n.searchQuery=e),class:"custom-input",placeholder:"搜索商品"},null,512),[[i.nr,n.searchQuery]]),(0,r.Uk)("    "),(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>n.selectedCategory=e)},Te,512),[[i.bM,n.selectedCategory]]),ze,qe,(0,r.Uk)("    "),Ne],32),Ve]),Le,(0,r._)("div",Qe,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.paginatedItems,(e=>((0,r.wg)(),(0,r.iD)("div",{class:"show-1",key:e.goodid},[(0,r._)("div",{onClick:t=>l.postToBuyerShop(e.goodid)},[(0,r._)("div",Ke,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.mediaFiles,((e,t)=>(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",{key:t},[l.isVideo(e)?(0,r.wy)(((0,r.wg)(),(0,r.iD)("video",{key:1,src:e.url,controls:""},null,8,Ze)),[[i.F8,e.isActive]]):(0,r.wy)(((0,r.wg)(),(0,r.iD)("img",{key:0,src:e.url,alt:"商品图片"},null,8,Re)),[[i.F8,e.isActive]])])),[[i.F8,e.isActive]]))),128))])],8,Ge),(0,r._)("div",Ye,[(0,r._)("button",{onClick:t=>l.showPrevMedia(e)},"＜",8,He),(0,r.Uk)("         "),(0,r._)("button",{onClick:t=>l.showNextMedia(e)},"＞",8,Ee)]),(0,r._)("div",{onClick:t=>l.postToBuyerShop(e.goodid)},[(0,r._)("p",null,[(0,r.Uk)("商品名："+(0,g.zw)(e.goodname),1),$e,(0,r.Uk)("超值价："+(0,g.zw)(e.price)+"元",1)])],8,je)])))),128))]),(0,r._)("div",We,[(0,r._)("button",{onClick:t[7]||(t[7]=(...e)=>l.goToPrevPage&&l.goToPrevPage(...e)),class:"prev",disabled:1===n.currentPage},"上一页",8,Je),(0,r._)("span",Xe,"第 "+(0,g.zw)(n.currentPage)+" / "+(0,g.zw)(l.totalPages)+" 页",1),(0,r._)("button",{onClick:t[8]||(t[8]=(...e)=>l.goToNextPage&&l.goToNextPage(...e)),class:"next",disabled:n.currentPage===l.totalPages},"下一页",8,et)])])])):((0,r.wg)(),(0,r.iD)("div",tt,[(0,r._)("div",st,[(0,r._)("div",it,[(0,r._)("table",rt,[ot,nt,lt,(0,r._)("tr",null,[(0,r._)("td",at,[(0,r._)("button",{onClick:t[9]||(t[9]=(...e)=>l.handleLogout&&l.handleLogout(...e)),class:"head5-1",style:{cursor:"pointer"}},"返回登录")])])])]),(0,r._)("div",dt,[ct,(0,r._)("div",ut,[(0,r._)("form",{onSubmit:t[12]||(t[12]=(0,i.iM)(((...e)=>l.handleSearch&&l.handleSearch(...e)),["prevent"]))},[(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":t[10]||(t[10]=e=>n.searchQuery=e),class:"custom-input",placeholder:"搜索商品"},null,512),[[i.nr,n.searchQuery]]),(0,r.Uk)("    "),(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":t[11]||(t[11]=e=>n.selectedCategory=e)},mt,512),[[i.bM,n.selectedCategory]]),_t,wt,(0,r.Uk)("    "),vt],32),yt]),bt,(0,r._)("div",kt,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.paginatedItems,(e=>((0,r.wg)(),(0,r.iD)("div",{class:"show-1",key:e.goodid},[(0,r._)("div",{onClick:t=>l.postToBuyerShop(e.goodid)},[(0,r._)("div",Pt,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.mediaFiles,((e,t)=>(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",{key:t},[l.isVideo(e)?(0,r.wy)(((0,r.wg)(),(0,r.iD)("video",{key:1,src:e.url,controls:""},null,8,xt)),[[i.F8,e.isActive]]):(0,r.wy)(((0,r.wg)(),(0,r.iD)("img",{key:0,src:e.url,alt:"商品图片"},null,8,At)),[[i.F8,e.isActive]])])),[[i.F8,e.isActive]]))),128))])],8,ft),(0,r._)("div",Ct,[(0,r._)("button",{onClick:t=>l.showPrevMedia(e)},"＜",8,Ut),(0,r.Uk)("         "),(0,r._)("button",{onClick:t=>l.showNextMedia(e)},"＞",8,Dt)]),(0,r._)("div",{onClick:t=>l.postToBuyerShop(e.goodid)},[(0,r._)("p",null,[(0,r.Uk)("商品名："+(0,g.zw)(e.goodname),1),It,(0,r.Uk)("超值价："+(0,g.zw)(e.price)+"元",1)])],8,Ft)])))),128))]),(0,r._)("div",Ot,[(0,r._)("button",{onClick:t[13]||(t[13]=(...e)=>l.goToPrevPage&&l.goToPrevPage(...e)),class:"prev",disabled:1===n.currentPage},"上一页",8,St),(0,r._)("span",Mt,"第 "+(0,g.zw)(n.currentPage)+" / "+(0,g.zw)(l.totalPages)+" 页",1),(0,r._)("button",{onClick:t[14]||(t[14]=(...e)=>l.goToNextPage&&l.goToNextPage(...e)),class:"next",disabled:n.currentPage===l.totalPages},"下一页",8,Bt)])])])]))])}var zt={data(){return{items:[],searchQuery:"",selectedCategory:"猫咪主粮",filteredItems:[],currentPage:1,itemsPerPage:2,search:{keyword:"",kind:"猫咪主粮"},currentUser:null}},created(){this.fetchUsrFromSession(),this.fetchgoodListSession()},async mounted(){console.log("BuyerMain 组件已挂载"),await this.fetchgoodListSession(),this.filteredItems=this.items},computed:{isLoggedIn(){return!!this.currentUser},isSeller(){return this.currentUser&&1===this.currentUser.power},isBuyer(){return this.currentUser&&0===this.currentUser.power},getUsername(){return this.currentUser?this.currentUser.username:"未登录"},paginatedItems(){const e=(this.currentPage-1)*this.itemsPerPage,t=this.currentPage*this.itemsPerPage;return this.filteredItems.slice(e,t)},totalPages(){return Math.ceil(this.filteredItems.length/this.itemsPerPage)}},methods:{async fetchUsrFromSession(){try{const e=await D.Z.get("/now-usr"),t=e.data;return this.currentUser=t,!0}catch(e){return console.error("获取用户数据错误:",e),!1}},async fetchgoodListSession(){try{const e=await D.Z.get("/good/buyer-all-good-list-control"),t=e.data.data;return this.items=t.map((e=>{const t=e.picture.trim(),s=t.split(","),i=s.map(((e,t)=>({url:e,isActive:0===t})));return{...e,mediaFiles:i,goodid:e.goodid,goodname:e.goodname.trim(),description:e.description.trim(),price:e.price,number:e.number,kind:e.kind,subkind:e.subkind,buyingid:e.buyingid,numbermax:e.numbermax,islike:e.islike}})),console.log("this.items:",this.items),!0}catch(e){return console.error("获取商品列表数据错误:",e),!1}},isVideo(e){return e.url.endsWith(".mp4")||e.url.endsWith(".avi")},async postToBuyerShop(e){const t=await fetch(`/good/buyer-show-good/${e}`,{method:"POST"});this.selectedFiles=[];const s=await t.json();"/error"===s.page?this.$router.push({path:"/error",query:{err:s.msg,to:s.data}}):"/success"===s.page?this.$router.push({path:"/success",query:{message:s.msg,to:s.data}}):null===s.page?console.log("未知页面类型"):this.$router.push({path:s.page})},async handleLogout(){try{await D.Z.get("/logout-control"),this.$router.push("/")}catch(e){console.error("登出失败:",e)}},navigateTo(e){this.$router.push({name:e})},beforeMount(){this.isLoggedIn||this.$router.push("/")},handleSearch(){this.filteredItems=this.items.filter((e=>{const t=!this.searchQuery||e.name.toLowerCase().includes(this.searchQuery.toLowerCase()),s=!this.selectedCategory||e.kind===this.selectedCategory;return console.log(`Item: ${e.name}, Keyword Match: ${t}, Category Match: ${s}`),t&&s})),console.log("Filtered items count:",this.filteredItems.length)},showPrevMedia(e){const t=e.mediaFiles.findIndex((e=>e.isActive));if(console.log("Current active index:",t),t>=0){const s=(t-1+e.mediaFiles.length)%e.mediaFiles.length;console.log("Previous index:",s),this.setActiveMedia(e,s)}},showNextMedia(e){const t=e.mediaFiles.findIndex((e=>e.isActive));if(console.log("Current active index:",t),t>=0){const s=(t+1)%e.mediaFiles.length;console.log("Next index:",s),this.setActiveMedia(e,s)}},setActiveMedia(e,t){e.mediaFiles.forEach(((e,s)=>{e.isActive=s===t,console.log(`Media at index ${s} active status: `,e.isActive)}))},goToPrevPage(){this.currentPage>1&&(this.currentPage--,console.log("Current page after prev:",this.currentPage))},goToNextPage(){this.currentPage<this.totalPages&&(this.currentPage++,console.log("Current page after next:",this.currentPage))},resetPage(){this.currentPage=1}},watch:{filteredItems(e,t){e!==t&&this.resetPage()}}};const qt=(0,l.Z)(zt,[["render",Tt],["__scopeId","data-v-589313ae"]]);var Nt=qt,Vt=s.p+"img/catbackground.png",Lt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQUAAAABAQMAAADtvilwAAAAA1BMVEX/8uHoZVjmAAAACklEQVR4nGMgCAAAIgAB2LoVhQAAAABJRU5ErkJggg==";const Qt=e=>((0,r.dD)("data-v-61bec969"),e=e(),(0,r.Cn)(),e),Gt={key:0},Kt={class:"daohang"},Rt=Qt((()=>(0,r._)("li",null,[(0,r._)("b",null,'欢迎进入"喵咪美食坊"!')],-1))),Zt={class:"content"},Yt={class:"content-left"},Ht={class:"nav"},Et={class:"nav-menu"},jt={class:"nav-info"},$t=Qt((()=>(0,r._)("div",{class:"user-image",style:{left:"-40px"}},[(0,r._)("img",{src:Vt,alt:"用户头像",style:{width:"50px",height:"50px",left:"8.9%",position:"absolute"}})],-1))),Wt={class:"username",style:{"margin-right":"100px"}},Jt=Qt((()=>(0,r._)("img",{src:Lt,alt:"分割线",class:"separator-line"},null,-1))),Xt={class:"nav-content"},es={class:"my"},ts={key:1},ss=Qt((()=>(0,r._)("div",{class:"else"},[(0,r.Uk)(" 您还未登录，请先"),(0,r._)("a",{href:"/"},"登录")],-1))),is=[ss];function rs(e,t,s,i,o,n){const l=(0,r.up)("router-view");return n.isLoggedIn?((0,r.wg)(),(0,r.iD)("div",Gt,[(0,r._)("ul",Kt,[Rt,(0,r._)("li",{style:{float:"right"},onClick:t[0]||(t[0]=(...e)=>n.handleLogout&&n.handleLogout(...e)),class:"logout-button"},"退出登录")]),(0,r._)("div",Zt,[(0,r._)("div",Yt,[(0,r._)("div",Ht,[(0,r._)("div",Et,[(0,r._)("div",jt,[$t,(0,r._)("div",Wt,(0,g.zw)(n.getUsername),1),Jt]),(0,r._)("div",Xt,[(0,r._)("h3",{onClick:t[1]||(t[1]=e=>n.navigateTo("UpdatePassword")),class:"black-text",style:{cursor:"pointer"}},"修改密码"),(0,r._)("h3",{onClick:t[2]||(t[2]=e=>n.navigateTo("UploadOneGood")),class:"black-text",style:{cursor:"pointer"}},"发布商品"),(0,r._)("h3",{onClick:t[3]||(t[3]=e=>n.navigateTo("ShowUserInfo")),class:"black-text",style:{cursor:"pointer"}},"查看意向订单"),(0,r._)("h3",{onClick:t[4]||(t[4]=e=>n.navigateTo("UploadMultipleGoods")),class:"black-text",style:{cursor:"pointer"}},"发布多个商品"),(0,r._)("h3",{onClick:t[5]||(t[5]=e=>n.navigateTo("ShowHistoryGoods")),class:"black-text",style:{cursor:"pointer"}},"查看历史商品"),(0,r._)("h3",{onClick:t[6]||(t[6]=e=>n.navigateTo("ShowGoods")),class:"black-text",style:{cursor:"pointer"}},"查看全部商品"),(0,r._)("h3",{onClick:t[7]||(t[7]=e=>n.navigateTo("ShowAllUsers")),class:"black-text",style:{cursor:"pointer"}},"查看客户信息")])])])]),(0,r._)("div",null,[(0,r._)("div",es,[(0,r.Wm)(l)])])])])):((0,r.wg)(),(0,r.iD)("div",ts,is))}var os={data(){return{currentUser:null}},created(){this.fetchUsrFromSession()},computed:{isLoggedIn(){return!!this.currentUser},isSeller(){return this.currentUser&&1===this.currentUser.power},isBuyer(){return this.currentUser&&0===this.currentUser.power},getUsername(){return this.currentUser?this.currentUser.username:"未登录"}},methods:{async fetchUsrFromSession(){try{const e=await D.Z.get("/now-usr"),t=e.data;return this.currentUser=t,this.isLoggedIn&&this.isSeller||this.$router.push("/"),!0}catch(e){return console.error("获取用户数据错误:",e),!1}},async handleLogout(){try{await D.Z.get("/logout-control"),this.$router.push("/")}catch(e){console.error("登出失败:",e)}},navigateTo(e){this.$router.push({name:e})}},mounted(){console.log("SellerMain 组件已挂载")}};const ns=(0,l.Z)(os,[["render",rs],["__scopeId","data-v-61bec969"]]);var ls=ns;const as=e=>((0,r.dD)("data-v-15b35c60"),e=e(),(0,r.Cn)(),e),ds={key:0},cs=as((()=>(0,r._)("div",{style:{"text-align":"center","margin-bottom":"0px","margin-top":"10px"}},[(0,r._)("img",{src:Vt,alt:"小猫",style:{width:"200px",height:"200px"}})],-1))),us={class:"main"},gs=as((()=>(0,r._)("h1",null,"修改密码",-1))),hs={class:"text-center"},ps=as((()=>(0,r._)("span",null,"旧 密 码: ",-1))),ms=as((()=>(0,r._)("br",null,null,-1))),_s={class:"text-center"},ws=as((()=>(0,r._)("span",null,"新 密 码: ",-1))),vs=as((()=>(0,r._)("br",null,null,-1))),ys={class:"text-center"},bs=as((()=>(0,r._)("span",null,"确认密码: ",-1))),ks=as((()=>(0,r._)("br",null,null,-1))),fs={class:"text-center"},Ps=as((()=>(0,r._)("input",{type:"submit",class:"button",value:"确认修改"},null,-1))),As={key:0,class:"alert-message",id:"b"},xs={key:1,class:"alert-error",id:"b"},Cs={key:1,class:"else"},Us=as((()=>(0,r._)("span",null,[(0,r.Uk)("您还未登录，请先"),(0,r._)("a",{href:"index.jsp"},"登录")],-1))),Ds=[Us];function Fs(e,t,s,o,n,l){return n.isLoggedIn?((0,r.wg)(),(0,r.iD)("div",ds,[cs,(0,r._)("div",us,[(0,r._)("form",{onSubmit:t[6]||(t[6]=(0,i.iM)(((...e)=>l.submitForm&&l.submitForm(...e)),["prevent"]))},[(0,r.wy)((0,r._)("input",{type:"hidden","onUpdate:modelValue":t[0]||(t[0]=t=>e.username=t)},null,512),[[i.nr,e.username]]),(0,r.wy)((0,r._)("input",{type:"hidden","onUpdate:modelValue":t[1]||(t[1]=t=>e.userpwd=t)},null,512),[[i.nr,e.userpwd]]),gs,(0,r._)("div",hs,[ps,(0,r.wy)((0,r._)("input",{type:"password","onUpdate:modelValue":t[2]||(t[2]=e=>n.oldpwd=e),required:""},null,512),[[i.nr,n.oldpwd]])]),ms,(0,r._)("div",_s,[ws,(0,r.wy)((0,r._)("input",{type:"password","onUpdate:modelValue":t[3]||(t[3]=e=>n.newpwd=e),required:""},null,512),[[i.nr,n.newpwd]])]),vs,(0,r._)("div",ys,[bs,(0,r.wy)((0,r._)("input",{type:"password","onUpdate:modelValue":t[4]||(t[4]=e=>n.newpwd1=e),required:""},null,512),[[i.nr,n.newpwd1]])]),ks,(0,r._)("div",fs,[Ps,(0,r.Uk)("         "),(0,r._)("button",{onClick:t[5]||(t[5]=(...e)=>l.cancelUpdate&&l.cancelUpdate(...e)),class:"button"},"取消修改")])],32)]),n.message?((0,r.wg)(),(0,r.iD)("div",As,[(0,r._)("p",null,(0,g.zw)(n.message),1)])):(0,r.kq)("",!0),n.error?((0,r.wg)(),(0,r.iD)("div",xs,[(0,r._)("p",null,(0,g.zw)(n.error),1)])):(0,r.kq)("",!0)])):((0,r.wg)(),(0,r.iD)("div",Cs,Ds))}var Is={data(){return{isLoggedIn:!0,oldpwd:"",newpwd:"",newpwd1:"",credentials:{newpwd:"",newpwd1:""},message:null,error:null}},methods:{validateForm(){return this.newpwd.length>15?(alert("密码不能超过15个字符！"),!1):(this.error=null,!0)},async submitForm(){const e=this.validateForm();if(e)try{const e={oldpwd:this.oldpwd,newpwd:this.newpwd,newpwd1:this.newpwd1},t=await fetch("/usr/changedpwd-control",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}),s=await t.json();("/update-password"===s.page||"/seller"===s.page)&&console.log(s.msg)}catch(t){console.error("修改密码失败:",t),this.error="密码修改失败，请稍后再试。"}},cancelUpdate(){this.oldpwd="",this.newpwd="",this.newpwd1="",this.error=null,this.message=null}}};const Os=(0,l.Z)(Is,[["render",Fs],["__scopeId","data-v-15b35c60"]]);var Ss=Os;const Ms=e=>((0,r.dD)("data-v-44269e00"),e=e(),(0,r.Cn)(),e),Bs={key:0},Ts={key:0,class:"modal",style:{position:"fixed","z-index":"1",left:"0",top:"0",width:"100%",height:"100%",overflow:"auto","background-color":"rgba(0,0,0,0.4)"}},zs=["src"],qs=["src"],Ns={id:"a"},Vs={class:"container"},Ls=Ms((()=>(0,r._)("div",{class:"centered-container"},[(0,r._)("h2",null,"全部商品信息"),(0,r._)("br")],-1))),Qs={class:"centered-container"},Gs={class:"search-bar"},Ks=Ms((()=>(0,r._)("option",{value:"猫咪主粮"},"猫咪主粮",-1))),Rs=Ms((()=>(0,r._)("option",{value:"猫咪零食"},"猫咪零食",-1))),Zs=Ms((()=>(0,r._)("option",{value:"猫咪日用"},"猫咪日用",-1))),Ys=[Ks,Rs,Zs],Hs={border:"1px",align:"center",cellspacing:"0"},Es=Ms((()=>(0,r._)("tr",null,[(0,r._)("th",null,"ID"),(0,r._)("th",null,"名称"),(0,r._)("th",null,"描述"),(0,r._)("th",null,"库存"),(0,r._)("th",null,"单价"),(0,r._)("th",null,"展示内容"),(0,r._)("th",null,"状态"),(0,r._)("th",null,"操作")],-1))),js={class:"media-container"},$s=["src"],Ws=["src"],Js=["onClick"],Xs=["onClick"],ei=["onClick"],ti=["onClick"],si={class:"pagination"},ii=["disabled"],ri={id:"page-info"},oi=["disabled"],ni={key:1,class:"else"};function li(e,t,s,o,n,l){const a=(0,r.up)("PriceModal"),d=(0,r.up)("router-link");return l.isLoggedIn?((0,r.wg)(),(0,r.iD)("div",Bs,[n.showModal?((0,r.wg)(),(0,r.iD)("div",Ts,[(0,r._)("span",{class:"close-button",onClick:t[0]||(t[0]=(...t)=>e.closeModal&&e.closeModal(...t)),style:{position:"absolute",top:"20px",right:"30px",color:"#f1f1f1","font-size":"35px","font-weight":"bold",cursor:"pointer"}},"×"),"image"===e.modalContentType?((0,r.wg)(),(0,r.iD)("img",{key:0,src:e.modalContentSrc,style:{margin:"auto",display:"none",width:"80%","max-width":"700px"}},null,8,zs)):(0,r.kq)("",!0),"video"===e.modalContentType?((0,r.wg)(),(0,r.iD)("video",{key:1,src:e.modalContentSrc,controls:"",style:{margin:"auto",display:"none",width:"80%","max-width":"700px"}},null,8,qs)):(0,r.kq)("",!0)])):(0,r.kq)("",!0),(0,r._)("div",Ns,[(0,r._)("div",Vs,[Ls,(0,r._)("div",Qs,[(0,r._)("div",Gs,[(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>n.searchQuery=e),class:"custom-input",placeholder:"搜索商品"},null,512),[[i.nr,n.searchQuery]]),(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>n.selectedCategory=e),id:"search_kind"},Ys,512),[[i.bM,n.selectedCategory]]),(0,r._)("button",{onClick:t[3]||(t[3]=(...e)=>l.searchGoods&&l.searchGoods(...e)),style:{width:"130px"},class:"custom-button"},"搜索")])]),(0,r._)("table",Hs,[Es,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.paginatedGoods,(e=>((0,r.wg)(),(0,r.iD)("tr",{key:e.goodid},[(0,r._)("td",null,(0,g.zw)(e.goodid),1),(0,r._)("td",null,(0,g.zw)(e.goodname),1),(0,r._)("td",null,(0,g.zw)(e.description),1),(0,r._)("td",{class:(0,g.C_)({"low-stock":e.number<5})},(0,g.zw)(e.number),3),(0,r._)("td",null,(0,g.zw)(e.price),1),(0,r._)("td",null,[(0,r._)("div",js,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.mediaFiles,((e,t)=>(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",{key:t},[l.isVideo(e)?(0,r.kq)("",!0):(0,r.wy)(((0,r.wg)(),(0,r.iD)("img",{key:0,src:e.url,alt:"商品图片"},null,8,$s)),[[i.F8,e.isActive]]),l.isVideo(e)?(0,r.wy)(((0,r.wg)(),(0,r.iD)("video",{key:1,src:e.url,controls:""},null,8,Ws)),[[i.F8,e.isActive]]):(0,r.kq)("",!0)])),[[i.F8,e.isActive]]))),128))]),(0,r._)("div",null,[(0,r._)("button",{onClick:t=>l.showPrevMedia(e)},"＜",8,Js),(0,r.Uk)("         "),(0,r._)("button",{onClick:t=>l.showNextMedia(e)},"＞",8,Xs)])]),(0,r._)("td",null,(0,g.zw)(l.stateText(e.state)),1),(0,r._)("td",null,[(0,r._)("button",{onClick:t=>l.confirmDelete(e.goodid)},"下架",8,ei),(0,r.Uk)(" | "),(0,r._)("button",{onClick:t=>l.openPriceModal(e)},"修改价格",8,ti)])])))),128))]),(0,r._)("div",si,[(0,r._)("button",{onClick:t[4]||(t[4]=(...e)=>l.goToPrevPage&&l.goToPrevPage(...e)),class:"prev",disabled:1===n.currentPage},"上一页",8,ii),(0,r._)("span",ri,"第 "+(0,g.zw)(n.currentPage)+" / "+(0,g.zw)(l.totalPages)+" 页",1),(0,r._)("button",{onClick:t[5]||(t[5]=(...e)=>l.goToNextPage&&l.goToNextPage(...e)),class:"next",disabled:n.currentPage===l.totalPages},"下一页",8,oi)]),(0,r.Wm)(a,{good:n.selectedGood,isVisible:n.showPriceModal,onClose:t[6]||(t[6]=e=>n.showPriceModal=!1),onUpdate:l.handleUpdatePrice},null,8,["good","isVisible","onUpdate"])])])])):((0,r.wg)(),(0,r.iD)("div",ni,[(0,r._)("span",null,[(0,r.Uk)("您还未登录，请先 "),(0,r.Wm)(d,{to:"/"},{default:(0,r.w5)((()=>[(0,r.Uk)("登录")])),_:1})])]))}const ai=e=>((0,r.dD)("data-v-bf176ba0"),e=e(),(0,r.Cn)(),e),di={key:0,class:"modal"},ci={class:"modal-content price-modal-content"},ui=ai((()=>(0,r._)("h2",null,[(0,r._)("strong",null,"修改商品价格")],-1))),gi={class:"product-info"},hi=ai((()=>(0,r._)("strong",null,"商品ID:",-1))),pi=ai((()=>(0,r._)("strong",null,"商品名称:",-1))),mi=ai((()=>(0,r._)("strong",null,"原价格:",-1))),_i=ai((()=>(0,r._)("label",{for:"newPrice"},[(0,r._)("strong",null,"修改后价格:")],-1)));function wi(e,t,s,o,n,l){return s.isVisible?((0,r.wg)(),(0,r.iD)("div",di,[(0,r._)("div",ci,[(0,r._)("span",{class:"close",onClick:t[0]||(t[0]=(...e)=>l.closeModal&&l.closeModal(...e))},"×"),ui,(0,r._)("div",gi,[(0,r._)("p",null,[hi,(0,r.Uk)(" "+(0,g.zw)(s.good.goodid),1)]),(0,r._)("p",null,[pi,(0,r.Uk)(" "+(0,g.zw)(s.good.goodname),1)]),(0,r._)("p",null,[mi,(0,r.Uk)(" "+(0,g.zw)(s.good.price),1)])]),(0,r._)("div",null,[_i,(0,r.wy)((0,r._)("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=e=>n.newPrice=e),placeholder:"输入新价格"},null,512),[[i.nr,n.newPrice]])]),(0,r._)("button",{onClick:t[2]||(t[2]=(...e)=>l.updatePrice&&l.updatePrice(...e))},"确认修改")])])):(0,r.kq)("",!0)}var vi={props:{good:Object,isVisible:Boolean},data(){return{newPrice:""}},methods:{closeModal(){this.$emit("close")},updatePrice(){this.$emit("update",{goodId:this.good.goodid,newPrice:this.newPrice})}}};const yi=(0,l.Z)(vi,[["render",wi],["__scopeId","data-v-bf176ba0"]]);var bi=yi,ki={components:{PriceModal:bi},data(){return{searchQuery:"",showPriceModal:!1,selectedGood:null,showModal:!1,selectedCategory:"猫咪主粮",currentPage:1,pageSize:6,filteredGoods:[],isHistory:0,showSuccessMessage:!1,successMessage:"",goods:[],currentUser:null}},created(){this.fetchUsrFromSession(),this.fetchgoodListSession()},computed:{isLoggedIn(){return!!this.currentUser},paginatedGoods(){const e=(this.currentPage-1)*this.pageSize,t=e+this.pageSize;return this.filteredGoods.slice(e,t)},totalPages(){return Math.ceil(this.filteredGoods.length/this.pageSize)}},async mounted(){console.log("ShowGoods 组件已挂载"),await this.fetchgoodListSession(),this.filteredGoods=this.goods,console.log("this.filteredGoods:",this.filteredGoods),this.showSuccessModal("价格修改成功！")},methods:{async fetchUsrFromSession(){try{const e=await D.Z.get("/now-usr"),t=e.data;return this.currentUser=t,!0}catch(e){return console.error("获取用户数据错误:",e),!1}},async fetchgoodListSession(){try{const e=await D.Z.get("/good/seller-all-good-list-control"),t=e.data.data;return this.goods=t.map((e=>{const t=e.picture.trim(),s=t.split(","),i=s.map(((e,t)=>({url:e,isActive:0===t})));return{...e,mediaFiles:i,goodname:e.goodname.trim(),description:e.description.trim(),price:e.price,number:e.number,kind:e.kind,subkind:e.subkind}})),console.log("this.goods:",this.goods),!0}catch(e){return console.error("获取商品列表数据错误:",e),!1}},showPrevMedia(e){const t=e.mediaFiles.findIndex((e=>e.isActive));if(console.log("Current active index:",t),t>=0){const s=(t-1+e.mediaFiles.length)%e.mediaFiles.length;console.log("Previous index:",s),this.setActiveMedia(e,s)}},showNextMedia(e){const t=e.mediaFiles.findIndex((e=>e.isActive));if(console.log("Current active index:",t),t>=0){const s=(t+1)%e.mediaFiles.length;console.log("Next index:",s),this.setActiveMedia(e,s)}},setActiveMedia(e,t){e.mediaFiles.forEach(((e,s)=>{e.isActive=s===t,console.log(`Media at index ${s} active status: `,e.isActive)}))},isVideo(e){const t=e.url.endsWith(".mp4");return console.log(`Is media a video: ${t}`),t},showSuccessModal(e){this.successMessage=e,this.showSuccessMessage=!0},searchGoods(){console.log("搜索已执行"),this.filteredGoods=this.goods.filter((e=>{const t=!this.searchQuery||e.goodname.toLowerCase().includes(this.searchQuery.toLowerCase()),s=!this.selectedCategory||e.kind===this.selectedCategory;return this.resetPage(),t&&s}))},closeSuccessModal(){this.showSuccessMessage=!1},confirmDelete(e){confirm("确定要删除这个商品吗？")&&this.deleteGood(e)},async deleteGood(e){console.log("删除商品，商品ID:",e);try{const t=await fetch(`/good/delete-good/${e}`,{method:"DELETE"}),s=await t.json();"/error"===s.page?this.$router.push({path:"/error",query:{err:s.msg,to:s.data}}):"/success"===s.page?this.$router.push({path:"/success",query:{message:s.msg,to:s.data}}):null===s.page?console.log("未知页面类型"):this.$router.push({path:s.page})}catch(t){console.error("删除失败",t)}},openPriceModal(e){console.log("打开价格修改窗口!"),this.selectedGood=e,this.showPriceModal=!0},async handleUpdatePrice({goodId:e,newPrice:t}){const s={goodId:e,newPrice:t},i=await fetch("/good/modify-price",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),r=await i.json();"/error"===r.page?this.$router.push({path:"/error",query:{err:r.msg,to:r.data}}):"/success"===r.page?this.$router.push({path:"/success",query:{message:r.msg,to:r.data}}):null===r.page?console.log("未知页面类型"):this.$router.push({path:r.page})},goToPrevPage(){this.currentPage>1&&this.currentPage--},goToNextPage(){this.currentPage<this.totalPages&&this.currentPage++},resetPage(){this.currentPage=1},stateText(e){const t={0:"上架",1:"冻结",2:"售出"};return t[e]||"未知"}},watch:{filteredGoods(e,t){e!==t&&this.resetPage()}}};const fi=(0,l.Z)(ki,[["render",li],["__scopeId","data-v-44269e00"]]);var Pi=fi;const Ai=e=>((0,r.dD)("data-v-7ddba90a"),e=e(),(0,r.Cn)(),e),xi={key:0},Ci={id:"a"},Ui={class:"container"},Di=Ai((()=>(0,r._)("div",{class:"form-group"},[(0,r._)("h2",null,"当前意向订单")],-1))),Fi={border:"1px",align:"center",cellspacing:"0"},Ii=Ai((()=>(0,r._)("tr",null,[(0,r._)("th",null,"ID"),(0,r._)("th",null,"地址"),(0,r._)("th",null,"电话"),(0,r._)("th",null,"购买人姓名"),(0,r._)("th",null,"商品ID"),(0,r._)("th",null,"操作"),(0,r._)("th",null,"订单状态")],-1))),Oi=["onClick"],Si=["onClick"],Mi={key:2},Bi={class:"pagination"},Ti=["disabled"],zi=["disabled"],qi={key:1,class:"else"},Ni=Ai((()=>(0,r._)("a",{href:"login"},"登录",-1)));function Vi(e,t,s,i,o,n){return o.isLoggedIn?((0,r.wg)(),(0,r.iD)("div",xi,[(0,r._)("div",Ci,[(0,r._)("div",Ui,[Di,(0,r._)("table",Fi,[Ii,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.paginatedItems,((e,t)=>((0,r.wg)(),(0,r.iD)("tr",{key:t},[(0,r._)("td",null,(0,g.zw)(e.orderid),1),(0,r._)("td",null,(0,g.zw)(e.address),1),(0,r._)("td",null,(0,g.zw)(e.telephone),1),(0,r._)("td",null,(0,g.zw)(e.buyername),1),(0,r._)("td",null,(0,g.zw)(e.goodid),1),(0,r._)("td",null,[e.orderstate<4&&e.orderstate>0?((0,r.wg)(),(0,r.iD)("button",{key:0,onClick:t=>n.confirmOrder(e.orderid),class:"green-btn"},"确认完成",8,Oi)):(0,r.kq)("",!0),e.orderstate<=4&&e.orderstate>0?((0,r.wg)(),(0,r.iD)("button",{key:1,onClick:t=>n.cancelOrder(e.orderid),class:"red-btn"},"取消订单",8,Si)):(0,r.kq)("",!0),e.orderstate<0||e.orderstate>4?((0,r.wg)(),(0,r.iD)("span",Mi,"无法操作订单")):(0,r.kq)("",!0)]),(0,r._)("td",null,(0,g.zw)(n.getOrderStatus(e.orderstate)),1)])))),128))]),(0,r._)("div",Bi,[(0,r._)("button",{onClick:t[0]||(t[0]=(...e)=>n.goToPrevPage&&n.goToPrevPage(...e)),disabled:n.isPrevDisabled,class:"prev"},"上一页",8,Ti),(0,r._)("span",null,"第"+(0,g.zw)(o.currentPage)+"/"+(0,g.zw)(n.totalPages)+"页",1),(0,r._)("button",{onClick:t[1]||(t[1]=(...e)=>n.goToNextPage&&n.goToNextPage(...e)),disabled:n.isNextDisabled,class:"next"},"下一页",8,zi)])])])])):((0,r.wg)(),(0,r.iD)("div",qi,[(0,r.Uk)(" 您还未登录，请先"),Ni]))}var Li={data(){return{isLoggedIn:!0,orders:[{orderid:1,address:"地址1",telephone:"1234567890",buyername:"买家A",goodid:101,orderstate:-1},{orderid:2,address:"地址2",telephone:"0987654321",buyername:"买家B",goodid:102,orderstate:1},{orderid:3,address:"地址3",telephone:"1122334455",buyername:"买家C",goodid:103,orderstate:2},{orderid:4,address:"地址4",telephone:"5566778899",buyername:"买家D",goodid:104,orderstate:3},{orderid:5,address:"地址5",telephone:"1231231234",buyername:"买家E",goodid:105,orderstate:4},{orderid:6,address:"地址6",telephone:"3344556677",buyername:"买家F",goodid:106,orderstate:5}],currentPage:1,itemsPerPage:5,totalItems:6}},methods:{getOrderStatus(e){const t={0:"等待客户下单",1:"客户已确认，商家待确认",2:"商家已确认，等待商家备货",3:"备货已完成，等待商家发货",4:"发货已完成，等待买家确认交易完成",5:"交易已完成"};return t[e]||"订单被取消"},handleOrderAction(e,t){switch(t){case"wait":break;case"confirm":this.confirmOrder(e);break;case"prepare":break;case"ship":break;case"cancel":this.cancelOrder(e);break}},confirmOrder(e){const t=this.orders.find((t=>t.orderid===e));t&&(t.orderstate+=1),alert("该订单阶段确认成功！"),console.log("确认订单",e)},cancelOrder(e){const t=this.orders.find((t=>t.orderid===e));t&&(t.orderstate=-1),alert("该订单已取消！"),console.log("取消订单",e)},goToPrevPage(){this.currentPage>1&&(this.currentPage--,this.fetchOrders())},goToNextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchOrders())},fetchOrders(){}},computed:{totalPages(){return Math.ceil(this.totalItems/this.itemsPerPage)},isPrevDisabled(){return this.currentPage<=1},isNextDisabled(){return this.currentPage>=this.totalPages},filteredOrders(){return this.orders.filter((e=>-2!==e.orderstate))},paginatedItems(){const e=(this.currentPage-1)*this.itemsPerPage,t=this.currentPage*this.itemsPerPage;return this.orders.slice(e,t)}},created(){this.fetchOrders()}};const Qi=(0,l.Z)(Li,[["render",Vi],["__scopeId","data-v-7ddba90a"]]);var Gi=Qi;const Ki=e=>((0,r.dD)("data-v-66eb6798"),e=e(),(0,r.Cn)(),e),Ri={key:0},Zi={id:"a"},Yi={class:"container"},Hi=Ki((()=>(0,r._)("div",{class:"centered-container"},[(0,r._)("h2",null,"历史商品信息"),(0,r._)("br")],-1))),Ei={class:"centered-container"},ji={class:"search-bar"},$i=Ki((()=>(0,r._)("option",{value:"猫咪主粮"},"猫咪主粮",-1))),Wi=Ki((()=>(0,r._)("option",{value:"猫咪零食"},"猫咪零食",-1))),Ji=Ki((()=>(0,r._)("option",{value:"猫咪日用"},"猫咪日用",-1))),Xi=[$i,Wi,Ji],er={border:"1px",align:"center",cellspacing:"0"},tr=Ki((()=>(0,r._)("tr",null,[(0,r._)("th",null,"ID"),(0,r._)("th",null,"名称"),(0,r._)("th",null,"描述"),(0,r._)("th",null,"单价"),(0,r._)("th",null,"展示内容"),(0,r._)("th",null,"类别"),(0,r._)("th",null,"子类别"),(0,r._)("th",null,"创建日期")],-1))),sr={class:"media-container"},ir=["src"],rr=["src"],or=["onClick"],nr=["onClick"],lr={class:"pagination"},ar=["disabled"],dr={id:"page-info"},cr=["disabled"],ur={key:1,class:"else"},gr=Ki((()=>(0,r._)("a",{href:"/login"},"登录",-1)));function hr(e,t,s,o,n,l){return l.isLoggedIn?((0,r.wg)(),(0,r.iD)("div",Ri,[(0,r._)("div",Zi,[(0,r._)("div",Yi,[Hi,(0,r._)("div",Ei,[(0,r._)("div",ji,[(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.searchQuery=t),class:"custom-input",placeholder:"搜索商品"},null,512),[[i.nr,e.searchQuery]]),(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.selectedCategory=e),id:"search_kind"},Xi,512),[[i.bM,n.selectedCategory]]),(0,r._)("button",{onClick:t[2]||(t[2]=(...e)=>l.searchGoods&&l.searchGoods(...e)),style:{width:"130px"},class:"custom-button"},"搜索")])]),(0,r._)("table",er,[tr,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.paginatedGoods,(e=>((0,r.wg)(),(0,r.iD)("tr",{key:e.goodid},[(0,r._)("td",null,(0,g.zw)(e.goodid),1),(0,r._)("td",null,(0,g.zw)(e.goodname),1),(0,r._)("td",null,(0,g.zw)(e.description),1),(0,r._)("td",null,(0,g.zw)(e.price),1),(0,r._)("td",null,[(0,r._)("div",sr,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.mediaFiles,((e,t)=>(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",{key:t},[l.isVideo(e)?(0,r.kq)("",!0):(0,r.wy)(((0,r.wg)(),(0,r.iD)("img",{key:0,src:e.url,alt:"商品图片"},null,8,ir)),[[i.F8,e.isActive]]),l.isVideo(e)?(0,r.wy)(((0,r.wg)(),(0,r.iD)("video",{key:1,src:e.url,controls:""},null,8,rr)),[[i.F8,e.isActive]]):(0,r.kq)("",!0)])),[[i.F8,e.isActive]]))),128))]),(0,r._)("div",null,[(0,r._)("button",{onClick:t=>l.showPrevMedia(e)},"＜",8,or),(0,r.Uk)("         "),(0,r._)("button",{onClick:t=>l.showNextMedia(e)},"＞",8,nr)])]),(0,r._)("td",null,(0,g.zw)(e.kind),1),(0,r._)("td",null,(0,g.zw)(e.subkind),1),(0,r._)("td",null,(0,g.zw)(e.createdate),1)])))),128))]),(0,r._)("div",lr,[(0,r._)("button",{onClick:t[3]||(t[3]=(...e)=>l.goToPrevPage&&l.goToPrevPage(...e)),class:"prev",disabled:1===n.currentPage},"上一页",8,ar),(0,r._)("span",dr,"第 "+(0,g.zw)(n.currentPage)+" / "+(0,g.zw)(l.totalPages)+" 页",1),(0,r._)("button",{onClick:t[4]||(t[4]=(...e)=>l.goToNextPage&&l.goToNextPage(...e)),class:"next",disabled:n.currentPage===l.totalPages},"下一页",8,cr)])])])])):((0,r.wg)(),(0,r.iD)("div",ur,[(0,r.Uk)(" 您还未登录，请先"),gr]))}var pr={data(){return{products:[],selectedGood:null,selectedCategory:"猫咪主粮",currentPage:1,pageSize:6,goods:[],filteredGoods:[],currentUser:null,isHistory:1}},created(){this.fetchUsrFromSession(),this.fetchgoodListSession()},computed:{isLoggedIn(){return!!this.currentUser},paginatedGoods(){const e=(this.currentPage-1)*this.pageSize,t=e+this.pageSize;return this.filteredGoods.slice(e,t)},totalPages(){return Math.ceil(this.filteredGoods.length/this.pageSize)}},async mounted(){console.log("ShowHistoryGoods 组件已挂载"),await this.fetchgoodListSession(),this.filteredGoods=this.goods,console.log("this.filteredGoods:",this.filteredGoods)},methods:{async fetchUsrFromSession(){try{const e=await D.Z.get("/now-usr"),t=e.data;return this.currentUser=t,!0}catch(e){return console.error("获取用户数据错误:",e),!1}},async fetchgoodListSession(){try{const e=await D.Z.get("/good/seller-all-historygood-list-control"),t=e.data.data;return this.goods=t.map((e=>{const t=e.picture.trim(),s=t.split(","),i=s.map(((e,t)=>({url:e,isActive:0===t})));return{...e,mediaFiles:i,goodname:e.goodname.trim(),description:e.description.trim(),price:e.price,number:e.number,kind:e.kind,subkind:e.subkind,createdate:e.createdate}})),console.log("this.goods:",this.goods),!0}catch(e){return console.error("获取商品列表数据错误:",e),!1}},showPrevMedia(e){const t=e.mediaFiles.findIndex((e=>e.isActive));if(console.log("Current active index:",t),t>=0){const s=(t-1+e.mediaFiles.length)%e.mediaFiles.length;console.log("Previous index:",s),this.setActiveMedia(e,s)}},showNextMedia(e){const t=e.mediaFiles.findIndex((e=>e.isActive));if(console.log("Current active index:",t),t>=0){const s=(t+1)%e.mediaFiles.length;console.log("Next index:",s),this.setActiveMedia(e,s)}},isVideo(e){const t=e.url.endsWith(".mp4");return console.log(`Is media a video: ${t}`),t},searchGoods(){console.log("搜索已执行"),this.filteredGoods=this.goods.filter((e=>{const t=!this.searchQuery||e.goodname.toLowerCase().includes(this.searchQuery.toLowerCase()),s=!this.selectedCategory||e.kind===this.selectedCategory;return this.resetPage(),t&&s}))},goToPrevPage(){this.currentPage>1&&this.currentPage--},goToNextPage(){this.currentPage<this.totalPages&&this.currentPage++},resetPage(){this.currentPage=1},fetchProducts(){}},watch:{filteredGoods(e,t){e!==t&&this.resetPage()}}};const mr=(0,l.Z)(pr,[["render",hr],["__scopeId","data-v-66eb6798"]]);var _r=mr;const wr=e=>((0,r.dD)("data-v-c536af52"),e=e(),(0,r.Cn)(),e),vr={key:0},yr={id:"a"},br={class:"container"},kr=wr((()=>(0,r._)("div",{class:"centered-container"},[(0,r._)("h2",null,"用户信息列表")],-1))),fr=wr((()=>(0,r._)("div",{id:"search_list"},null,-1))),Pr={border:"1px",align:"center",cellspacing:"0"},Ar=wr((()=>(0,r._)("tr",null,[(0,r._)("th",null,"ID"),(0,r._)("th",null,"用户名"),(0,r._)("th",null,"操作")],-1))),xr={class:"pagination"},Cr={id:"page-info"},Ur={key:1,class:"else"},Dr=wr((()=>(0,r._)("span",null,[(0,r.Uk)("您还未登录，请先"),(0,r._)("a",{href:"/login"},"登录")],-1))),Fr=[Dr];function Ir(e,t,s,i,o,n){const l=(0,r.up)("router-link");return o.isLoggedIn?((0,r.wg)(),(0,r.iD)("div",vr,[(0,r._)("div",yr,[(0,r._)("div",br,[kr,fr,(0,r._)("table",Pr,[Ar,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.paginatedUsers,(e=>((0,r.wg)(),(0,r.iD)("tr",{key:e.userid},[(0,r._)("td",null,(0,g.zw)(e.userid),1),(0,r._)("td",null,(0,g.zw)(e.username),1),(0,r._)("td",null,[(0,r.Wm)(l,{to:{name:"UserOrderHistory",props:[e.userid]}},{default:(0,r.w5)((()=>[(0,r.Uk)(" 查看购买历史 ")])),_:2},1032,["to"])])])))),128))]),(0,r._)("div",xr,[(0,r._)("button",{onClick:t[0]||(t[0]=(...e)=>n.goToPrevPage&&n.goToPrevPage(...e)),class:"prev"},"上一页"),(0,r._)("span",Cr,"第 "+(0,g.zw)(o.currentPage)+" 页",1),(0,r._)("button",{onClick:t[1]||(t[1]=(...e)=>n.goToNextPage&&n.goToNextPage(...e)),class:"next"},"下一页")])])])])):((0,r.wg)(),(0,r.iD)("div",Ur,Fr))}var Or={data(){return{isLoggedIn:!0,currentPage:1,users:[{userid:1,username:"user1"},{userid:2,username:"user2"},{userid:3,username:"user3"},{userid:4,username:"user4"},{userid:5,username:"user5"},{userid:6,username:"user6"},{userid:7,username:"user7"},{userid:8,username:"user8"},{userid:9,username:"user9"},{userid:10,username:"user10"},{userid:11,username:"user11"},{userid:12,username:"user12"},{userid:13,username:"user13"},{userid:14,username:"user14"},{userid:15,username:"user15"}],pageSize:5,filteredUsers:[]}},computed:{paginatedUsers(){const e=(this.currentPage-1)*this.pageSize,t=e+this.pageSize;return this.filteredUsers.slice(e,t)},totalPages(){return Math.ceil(this.filteredUsers.length/this.pageSize)}},methods:{goToPrevPage(){this.currentPage>1&&this.currentPage--},goToNextPage(){this.currentPage<this.totalPages&&this.currentPage++},fetchUsers(){}},mounted(){this.filteredUsers=this.users,this.fetchUsers()}};const Sr=(0,l.Z)(Or,[["render",Ir],["__scopeId","data-v-c536af52"]]);var Mr=Sr;const Br=e=>((0,r.dD)("data-v-7b6e63c8"),e=e(),(0,r.Cn)(),e),Tr={key:0,class:"container"},zr=Br((()=>(0,r._)("h1",null,"上传多个商品",-1))),qr={class:"form-group"},Nr=Br((()=>(0,r._)("label",{for:"goodName"},"商品名称：",-1))),Vr={key:0,class:"error"},Lr={class:"form-group"},Qr=Br((()=>(0,r._)("label",{for:"price"},"商品价格：",-1))),Gr={key:0,class:"error"},Kr={class:"form-group"},Rr=Br((()=>(0,r._)("label",{for:"stock"},"商品数量：",-1))),Zr={key:0,class:"error"},Yr={class:"form-group"},Hr=Br((()=>(0,r._)("label",{for:"description"},"商品描述：",-1))),Er={key:0,class:"error"},jr={class:"form-group"},$r=Br((()=>(0,r._)("label",{for:"kind"},"商品大类：",-1))),Wr=["value"],Jr={class:"form-group"},Xr=Br((()=>(0,r._)("label",{for:"subkind"},"商品子类：",-1))),eo=["value"],to=Br((()=>(0,r._)("label",{for:"kind"},"商品图片：",-1))),so={id:"preview"},io={key:0},ro=["src"],oo=["src"],no=["onClick"],lo={key:1},ao=["disabled"],co={key:0,class:"error"},uo=Br((()=>(0,r._)("br",null,null,-1))),go=Br((()=>(0,r._)("thead",null,[(0,r._)("tr",null,[(0,r._)("th",null,"商品名称"),(0,r._)("th",null,"价格"),(0,r._)("th",null,"数量"),(0,r._)("th",null,"描述"),(0,r._)("th",null,"展示内容"),(0,r._)("th",null,"商品类别"),(0,r._)("th",null,"子类别")])],-1))),ho=["src"],po=["src"],mo={key:1},_o=Br((()=>(0,r._)("a",{href:"/login"},"登录",-1)));function wo(e,t,s,o,n,l){return l.isLoggedIn?((0,r.wg)(),(0,r.iD)("div",Tr,[zr,(0,r._)("div",null,[(0,r._)("div",qr,[Nr,(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>n.goodName=e),placeholder:"请输入商品名称",required:""},null,512),[[i.nr,n.goodName]]),n.errors.goodName?((0,r.wg)(),(0,r.iD)("span",Vr,(0,g.zw)(n.errors.goodName),1)):(0,r.kq)("",!0)]),(0,r._)("div",Lr,[Qr,(0,r.wy)((0,r._)("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=e=>n.price=e),placeholder:"请输入商品价格",required:""},null,512),[[i.nr,n.price]]),n.errors.price?((0,r.wg)(),(0,r.iD)("span",Gr,(0,g.zw)(n.errors.price),1)):(0,r.kq)("",!0)]),(0,r._)("div",Kr,[Rr,(0,r.wy)((0,r._)("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=e=>n.stock=e),placeholder:"请输入商品库存",required:""},null,512),[[i.nr,n.stock]]),n.errors.stock?((0,r.wg)(),(0,r.iD)("span",Zr,(0,g.zw)(n.errors.stock),1)):(0,r.kq)("",!0)]),(0,r._)("div",Yr,[Hr,(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>n.description=e),placeholder:"请输入商品描述",required:""},null,512),[[i.nr,n.description]]),n.errors.description?((0,r.wg)(),(0,r.iD)("span",Er,(0,g.zw)(n.errors.description),1)):(0,r.kq)("",!0)]),(0,r._)("div",jr,[$r,(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>n.selectedKind=e),onChange:t[5]||(t[5]=(...e)=>l.updateSubcategories&&l.updateSubcategories(...e))},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.kinds,(e=>((0,r.wg)(),(0,r.iD)("option",{key:e.value,value:e.value},(0,g.zw)(e.text),9,Wr)))),128))],544),[[i.bM,n.selectedKind]])]),(0,r._)("div",Jr,[Xr,(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>n.selectedSubkind=e)},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.subkinds,(e=>((0,r.wg)(),(0,r.iD)("option",{key:e,value:e},(0,g.zw)(e),9,eo)))),128))],512),[[i.bM,n.selectedSubkind]])]),to,(0,r._)("div",so,[n.selectedFiles.length>0?((0,r.wg)(),(0,r.iD)("div",io,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.selectedFiles,((e,t)=>(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",{key:t},[l.isImage(e)?((0,r.wg)(),(0,r.iD)("img",{key:0,src:l.getURL(e),alt:"预览图"},null,8,ro)):((0,r.wg)(),(0,r.iD)("video",{key:1,controls:"",src:l.getURL(e)},null,8,oo)),(0,r._)("button",{onClick:e=>l.removeFile(t)},"X",8,no)])),[[i.F8,t===n.currentPreviewIndex]]))),128))])):((0,r.wg)(),(0,r.iD)("div",lo," 没有选择文件 "))]),(0,r._)("button",{type:"button",onClick:t[7]||(t[7]=(...e)=>l.prevImage&&l.prevImage(...e))},"＜"),(0,r.Uk)("  "),(0,r._)("button",{type:"button",onClick:t[8]||(t[8]=(...e)=>l.nextImage&&l.nextImage(...e))},"＞"),(0,r._)("input",{type:"file",disabled:l.isFileInputDisabled,ref:"fileInput",onChange:t[9]||(t[9]=(...e)=>l.handleFileChange&&l.handleFileChange(...e)),accept:"image/png, image/jpeg, video/mp4",multiple:"",style:{display:"none"}},null,40,ao),(0,r._)("button",{type:"button",onClick:t[10]||(t[10]=(...e)=>l.triggerFileInput&&l.triggerFileInput(...e))},"上传图片/视频"),n.errors.pictureError?((0,r.wg)(),(0,r.iD)("span",co,(0,g.zw)(n.errors.pictureError),1)):(0,r.kq)("",!0),uo,(0,r._)("button",{onClick:t[11]||(t[11]=(...e)=>l.addProduct&&l.addProduct(...e))},"添加商品")]),(0,r._)("table",null,[go,(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.productList,((e,t)=>((0,r.wg)(),(0,r.iD)("tr",{key:t},[(0,r._)("td",null,(0,g.zw)(e.goodname),1),(0,r._)("td",null,(0,g.zw)(e.price),1),(0,r._)("td",null,(0,g.zw)(e.number),1),(0,r._)("td",null,(0,g.zw)(e.description),1),(0,r._)("td",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.mediaFiles,((e,t)=>((0,r.wg)(),(0,r.iD)("div",{key:t},[l.isImage(e)?((0,r.wg)(),(0,r.iD)("img",{key:0,src:l.getURL(e),alt:"Image view",style:{"max-width":"100px","max-height":"100px","object-fit":"contain"}},null,8,ho)):((0,r.wg)(),(0,r.iD)("video",{key:1,controls:"",src:l.getURL(e),style:{"max-width":"100px","max-height":"100px"}},null,8,po))])))),128))]),(0,r._)("td",null,(0,g.zw)(e.kind),1),(0,r._)("td",null,(0,g.zw)(e.subkind),1)])))),128))])]),(0,r._)("button",{onClick:t[12]||(t[12]=(...e)=>l.PredUploadProducts&&l.PredUploadProducts(...e))},"确认发布所有商品")])):((0,r.wg)(),(0,r.iD)("div",mo,[(0,r.Uk)(" 您还未登录，请先"),_o]))}s(8858),s(1318),s(3228);var vo={data(){return{products:[],goodName:"",price:"",stock:"",description:"",selectedFiles:[],selectedKind:"猫咪主粮",selectedSubkind:"",currentPreviewIndex:0,kinds:[{value:"猫咪主粮",text:"猫咪主粮"},{value:"猫咪零食",text:"猫咪零食"},{value:"猫咪日用",text:"猫咪日用"}],subkinds:[],productList:[],errors:{pictureError:"",goodName:"",price:"",stock:"",description:""},currentUser:null,FilesList:new Map}},created(){this.fetchUsrFromSession()},mounted(){this.updateSubcategories()},computed:{isLoggedIn(){return!!this.currentUser},currentFile(){return this.selectedFiles[this.currentPreviewIndex]},isFileInputDisabled(){return this.selectedFiles.length>=3}},methods:{async fetchUsrFromSession(){try{const e=await D.Z.get("/now-usr"),t=e.data;return this.currentUser=t,!0}catch(e){return console.error("获取用户数据错误:",e),!1}},addProduct(){if(this.goodName.length>20)return void alert("商品名称不能超过20个字符");if(isNaN(this.price))return void alert("价格需要输入数字");if(isNaN(this.stock))return void(this.errors.stock="库存需要输入数字");if(this.description.length>100)return void alert("商品描述不能超过100个字符");if(0===this.selectedFiles.length)return void alert("请上传至少一个文件");const e={goodname:this.goodName,price:this.price,number:this.stock,description:this.description,kind:this.selectedKind,subkind:this.selectedSubkind,mediaFiles:this.selectedFiles};this.productList.push(e),this.selectedFiles.forEach((e=>{this.FilesList.set(this.goodName,e)})),this.goodName="",this.price="",this.stock="",this.description="",this.selectedFiles=[],console.log(this.selectedFiles),alert("商品已添加")},isImage(e){return e&&e.type&&e.type.startsWith("image/")},getURL(e){return URL.createObjectURL(e)},updateSubcategories(){"猫咪主粮"===this.selectedKind?this.subkinds=["猫干粮","猫湿粮"]:"猫咪零食"===this.selectedKind?this.subkinds=["饼干","罐头","猫条"]:"猫咪日用"===this.selectedKind&&(this.subkinds=["猫砂盆","猫小窝","猫沙发","清洁除味"]),this.subkinds.length>0?this.selectedSubkind=this.subkinds[0]:this.selectedSubkind=""},handleFileChange(e){const t=Array.from(e.target.files),s=["image/png","image/jpeg","video/mp4"],i=t.filter((e=>s.includes(e.type)));if(i.length<t.length)return void alert("不支持的文件格式。请上传png、jpg或mp4格式的文件。");const r=3-this.selectedFiles.length,o=i.slice(0,r),n=3,l=10485760;if(t.length>n)return void alert(`您只能上传最多 ${n} 个文件。`);const a=t.some((e=>e.size>l));a?alert("所有文件必须小于10MB，请重新选择文件。"):this.selectedFiles.length+o.length>3?alert("最多只能上传3个文件。"):(this.selectedFiles=[...this.selectedFiles,...i],3===this.selectedFiles.length?e.target.disabled=!0:(e.target.disabled=!1,e.target.value=""),this.$refs.fileInput&&(this.$refs.fileInput.value=""),this.selectedFiles.length<3&&(e.target.disabled=!1))},removeFile(e){URL.revokeObjectURL(this.selectedFiles[e]),this.selectedFiles.splice(e,1),this.selectedFiles.length<3&&this.$refs.fileInput&&(this.$refs.fileInput.disabled=!1),this.$refs.fileInput&&(this.$refs.fileInput.value="")},triggerFileInput(){this.$refs.fileInput?this.$refs.fileInput.click():console.error("未找到文件输入框。")},async PredUploadProducts(){const e=this.productList.map((e=>e.goodname)),t=await fetch("/good/upload-multiple-goods",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({goodnames:e})}),s=await t.json();"/error"===s.page?this.$router.push({path:"/error",query:{err:s.msg,to:s.data}}):"/success"===s.page?await this.submitProducts():null===s.page?console.log("未知页面类型"):this.$router.push({path:s.page})},async submitProducts(){for(const e of this.productList){const t=new FormData;t.append("goodname",e.goodname),t.append("price",e.price),t.append("number",e.number),t.append("description",e.description),t.append("kind",e.kind),t.append("subkind",e.subkind);for(const[r,o]of this.FilesList.entries())r===e.goodname&&t.append("mediaFiles",o);const s=await fetch("/good/upload-good",{method:"POST",body:t}),i=await s.json();"/error"===i.page?this.$router.push({path:"/error",query:{err:i.msg,to:i.data}}):"/success"===i.page?this.$router.push({path:"/success",query:{message:i.msg,to:i.data}}):null===i.page?console.log("未知页面类型"):this.$router.push({path:i.page})}},prevImage(){this.selectedFiles.length>0&&(this.currentPreviewIndex=(this.currentPreviewIndex-1+this.selectedFiles.length)%this.selectedFiles.length)},nextImage(){this.selectedFiles.length>0&&(this.currentPreviewIndex=(this.currentPreviewIndex+1)%this.selectedFiles.length)}}};const yo=(0,l.Z)(vo,[["render",wo],["__scopeId","data-v-7b6e63c8"]]);var bo=yo;const ko=e=>((0,r.dD)("data-v-694a5802"),e=e(),(0,r.Cn)(),e),fo={class:"daohang"},Po={class:"title-container"},Ao=ko((()=>(0,r._)("h2",null,"请填写账号",-1))),xo=ko((()=>(0,r._)("div",{class:"cat-background"},null,-1))),Co={class:"login"},Uo={class:"input"},Do=ko((()=>(0,r._)("h3",null,"找回账号",-1))),Fo=ko((()=>(0,r._)("input",{class:"button",type:"submit",value:"找回密码"},null,-1))),Io={key:0,class:"error-message",id:"b"};function Oo(e,t,s,o,n,l){const a=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("ul",fo,[(0,r._)("div",Po,[Ao,(0,r.Wm)(a,{to:"/"},{default:(0,r.w5)((()=>[(0,r.Uk)("返回初始页面")])),_:1})]),xo]),(0,r._)("div",Co,[(0,r._)("form",{onSubmit:t[1]||(t[1]=(0,i.iM)(((...e)=>l.submitForgetPassword&&l.submitForgetPassword(...e)),["prevent"]))},[(0,r._)("div",Uo,[Do,(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>n.forgetName=e),placeholder:"请输入账号"},null,512),[[i.nr,n.forgetName]]),Fo])],32)]),n.error?((0,r.wg)(),(0,r.iD)("div",Io,(0,g.zw)(n.error),1)):(0,r.kq)("",!0)],64)}var So={data(){return{forgetName:"",error:null}},methods:{async submitForgetPassword(){try{const e={username:this.forgetName},t=await D.Z.post("/usr/forgetPwd-control",e,{headers:{"Content-Type":"application/json"}}),s=await t;"answer"===s.data.msg?(alert("找到用户！"),console.log(t.data.data),sessionStorage.setItem("forgetUsr",JSON.stringify(t.data.data)),this.$router.push({name:"SecretQuestion"})):"noName"===s.data.msg?alert("找不到该用户！"):alert("System Wrong!")}catch(e){console.log(e),this.error="找回密码时出错"}}}};const Mo=(0,l.Z)(So,[["render",Oo],["__scopeId","data-v-694a5802"]]);var Bo=Mo;const To=e=>((0,r.dD)("data-v-ee0f3110"),e=e(),(0,r.Cn)(),e),zo=To((()=>(0,r._)("h1",null,"游客访问页面",-1))),qo=[zo];function No(e,t,s,i,o,n){return(0,r.wg)(),(0,r.iD)("div",null,qo)}var Vo={name:"GuestComponent"};const Lo=(0,l.Z)(Vo,[["render",No],["__scopeId","data-v-ee0f3110"]]);var Qo=Lo;const Go=e=>((0,r.dD)("data-v-2201c346"),e=e(),(0,r.Cn)(),e),Ko={style:{margin:"0px"}},Ro={key:0},Zo={class:"container"},Yo={class:"centered-container"},Ho={style:{"border-collapse":"collapse",width:"80%","box-shadow":"0 2px 4px rgba(0,0,0,0.1)"},border:"1",align:"center",cellpadding:"10"},Eo=Go((()=>(0,r._)("tr",null,[(0,r._)("th",null,"ID"),(0,r._)("th",null,"地址"),(0,r._)("th",null,"电话"),(0,r._)("th",null,"购买人姓名"),(0,r._)("th",null,"商品ID"),(0,r._)("th",null,"订单状态")],-1))),jo={class:"pagination"},$o=["disabled"],Wo=["disabled"],Jo={key:1},Xo=Go((()=>(0,r._)("span",null,[(0,r.Uk)("您还未登录，请先"),(0,r._)("a",{href:"/login"},"登录")],-1))),en=[Xo];function tn(e,t,s,i,o,n){const l=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",Ko,[o.isLoggedIn?((0,r.wg)(),(0,r.iD)("div",Ro,[(0,r._)("div",Zo,[(0,r.Wm)(l,{to:{name:"ShowAllUsers"}},{default:(0,r.w5)((()=>[(0,r.Uk)(" 返回 ")])),_:1}),(0,r._)("div",Yo,[(0,r._)("h2",null,"用户 "+(0,g.zw)(s.userId)+" 的购买历史",1)]),(0,r._)("table",Ho,[Eo,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.paginatedOrders,(e=>((0,r.wg)(),(0,r.iD)("tr",{key:e.orderid},[(0,r._)("td",null,(0,g.zw)(e.orderid),1),(0,r._)("td",null,(0,g.zw)(e.address),1),(0,r._)("td",null,(0,g.zw)(e.telephone),1),(0,r._)("td",null,(0,g.zw)(e.buyername),1),(0,r._)("td",null,(0,g.zw)(e.goodid),1),(0,r._)("td",null,(0,g.zw)(n.getOrderStatus(e.orderstate)),1)])))),128))]),(0,r._)("div",jo,[(0,r._)("button",{onClick:t[0]||(t[0]=(...e)=>n.goToPrevPage&&n.goToPrevPage(...e)),disabled:n.isPrevDisabled},"上一页",8,$o),(0,r._)("span",null,(0,g.zw)(o.currentPage)+" / "+(0,g.zw)(n.totalPages),1),(0,r._)("button",{onClick:t[1]||(t[1]=(...e)=>n.goToNextPage&&n.goToNextPage(...e)),disabled:n.isNextDisabled},"下一页",8,Wo)])])])):((0,r.wg)(),(0,r.iD)("div",Jo,en))])}var sn=s(65),rn={props:["userId"],data(){return{isLoggedIn:!0,orders:[{orderid:1,address:"地址1",telephone:"1234567890",buyername:"user1",goodid:101,orderstate:4},{orderid:2,address:"地址2",telephone:"1234567891",buyername:"user1",goodid:102,orderstate:3},{orderid:3,address:"地址3",telephone:"1234567892",buyername:"user1",goodid:103,orderstate:2},{orderid:4,address:"地址4",telephone:"1234567893",buyername:"user1",goodid:104,orderstate:1},{orderid:5,address:"地址5",telephone:"1234567894",buyername:"user1",goodid:105,orderstate:0},{orderid:6,address:"地址6",telephone:"1234567895",buyername:"user1",goodid:106,orderstate:-1},{orderid:7,address:"地址7",telephone:"1234567896",buyername:"user1",goodid:107,orderstate:5},{orderid:8,address:"地址8",telephone:"1234567897",buyername:"user1",goodid:108,orderstate:4}],currentPage:1,pageSize:5}},computed:{...(0,sn.Se)(["isSeller","isBuyer"]),totalPages(){return 1>Math.ceil(this.orders.length/this.pageSize)?1:Math.ceil(this.orders.length/this.pageSize)},paginatedOrders(){const e=(this.currentPage-1)*this.pageSize,t=e+this.pageSize;return this.orders.slice(e,t)},isSeller(){return this.$store.getters.isSeller},isPrevDisabled(){return 1===this.currentPage},isNextDisabled(){return this.currentPage===this.totalPages}},methods:{goBack(){this.$router.push({name:"ShowAllUsers"})},fetchOrders(){},getOrderStatus(e){const t={"-1":"交易取消",0:"等待客户下单",1:"等待商家确认",2:"等待备货确认",3:"等待发货确认",4:"商家已发货，等待交易确认",5:"交易成功"};return t[e]||"未知状态"},goToPrevPage(){this.currentPage>1&&this.currentPage--},goToNextPage(){this.currentPage<this.totalPages&&this.currentPage++}},mounted(){this.fetchOrders(),this.filteredUsers=this.orders}};const on=(0,l.Z)(rn,[["render",tn],["__scopeId","data-v-2201c346"]]);var nn=on;const ln={class:"success-page"},an=(0,r._)("h2",null,"成功界面",-1),dn={key:0},cn={key:1};function un(e,t,s,i,o,n){const l=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",ln,[an,o.message?((0,r.wg)(),(0,r.iD)("div",dn,(0,g.zw)(o.message),1)):(0,r.kq)("",!0),o.redirectTo?((0,r.wg)(),(0,r.iD)("div",cn,[(0,r.Wm)(l,{to:o.redirectTo},{default:(0,r.w5)((()=>[(0,r.Uk)("返回页面")])),_:1},8,["to"])])):(0,r.kq)("",!0)])}var gn={data(){return{message:"",redirectTo:null}},created(){this.message=this.$route.query.message||"操作成功",this.redirectTo=this.$route.query.to||"/"}};const hn=(0,l.Z)(gn,[["render",un]]);var pn=hn;const mn=e=>((0,r.dD)("data-v-485aa2c7"),e=e(),(0,r.Cn)(),e),_n={class:"daohang"},wn={class:"title-container"},vn=mn((()=>(0,r._)("h2",null,"请回答密保问题",-1))),yn=mn((()=>(0,r._)("div",{class:"cat-background"},null,-1))),bn={class:"login"},kn={class:"input"},fn=mn((()=>(0,r._)("input",{class:"button",type:"submit",value:"找回密码"},null,-1))),Pn={key:0,class:"error-message",id:"b"};function An(e,t,s,o,n,l){const a=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("ul",_n,[(0,r._)("div",wn,[vn,(0,r.Wm)(a,{to:"/"},{default:(0,r.w5)((()=>[(0,r.Uk)("返回初始页面")])),_:1})]),yn]),(0,r._)("div",bn,[(0,r._)("form",{onSubmit:t[1]||(t[1]=(0,i.iM)(((...e)=>l.submitSecretAnswer&&l.submitSecretAnswer(...e)),["prevent"]))},[(0,r._)("div",kn,[(0,r._)("h3",null,"用户"+(0,g.zw)(n.storedUsr.username)+"，请您回答密保问题",1),(0,r._)("h3",null,(0,g.zw)(n.storedUsr.question),1),(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>n.secretAnswer=e),placeholder:"请输入答案"},null,512),[[i.nr,n.secretAnswer]]),fn])],32)]),n.error?((0,r.wg)(),(0,r.iD)("div",Pn,(0,g.zw)(n.error),1)):(0,r.kq)("",!0)],64)}var xn={data(){return{storedUsr:JSON.parse(sessionStorage.getItem("forgetUsr")||"{}"),secretAnswer:"",error:""}},methods:{async submitSecretAnswer(){try{const e={answer:this.secretAnswer},t=await D.Z.post("/usr/answer-control",e,{headers:{"Content-Type":"application/json"}}),s=await t;"rightAnswer"===s.data.msg?(alert(`答案正确！您的密码是：${this.storedUsr.pwd}`),this.$router.push("/")):"badAnswer"===s.data.msg?alert("答案错误！请重新输入密保答案！"):alert("System Wrong!")}catch(e){this.error="回答密保问题时出错"}}}};const Cn=(0,l.Z)(xn,[["render",An],["__scopeId","data-v-485aa2c7"]]);var Un=Cn;const Dn=e=>((0,r.dD)("data-v-685c1d4e"),e=e(),(0,r.Cn)(),e),Fn={style:{margin:"0px"}},In={key:0},On={class:"left"},Sn={class:"daohang"},Mn=Dn((()=>(0,r._)("img",{class:"head1",src:we,alt:""},null,-1))),Bn={class:"head2"},Tn={class:"head4"},zn={class:"head4"},qn={class:"head4"},Nn={class:"head4"},Vn={class:"head5"},Ln={class:"right",style:{width:"75%"}},Qn={class:"container"},Gn=Dn((()=>(0,r._)("div",{class:"centered-container"},[(0,r._)("h2",null,"历史下单记录")],-1))),Kn={style:{"border-collapse":"collapse",width:"100%","box-shadow":"0 2px 4px rgba(0,0,0,0.1)"},border:"1",align:"center",cellpadding:"10"},Rn=Dn((()=>(0,r._)("tr",null,[(0,r._)("th",null,"ID"),(0,r._)("th",null,"地址"),(0,r._)("th",null,"电话"),(0,r._)("th",null,"购买人姓名"),(0,r._)("th",null,"商品ID"),(0,r._)("th",null,"操作"),(0,r._)("th",null,"订单状态")],-1))),Zn=["onClick"],Yn=["onClick"],Hn={key:2},En={class:"pagination"},jn=["disabled"],$n=["disabled"],Wn={key:1},Jn=Dn((()=>(0,r._)("div",{class:"else"},[(0,r.Uk)(" 您还未登录，请先"),(0,r._)("a",{href:"/"},"登录")],-1))),Xn=[Jn];function el(e,t,s,i,o,n){const l=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("body",Fn,[o.isLoggedIn?((0,r.wg)(),(0,r.iD)("div",In,[(0,r._)("div",On,[(0,r._)("table",Sn,[Mn,(0,r._)("tr",null,[(0,r._)("td",Bn,(0,g.zw)(n.username),1)]),(0,r._)("tr",null,[(0,r._)("td",Tn,[(0,r._)("h3",{onClick:t[0]||(t[0]=e=>n.navigateTo("BuyerCart")),class:"head4-1",style:{cursor:"pointer"}},"我的购物车")])]),(0,r._)("tr",null,[(0,r._)("td",zn,[(0,r._)("h3",{onClick:t[1]||(t[1]=e=>n.navigateTo("BuyerLikes")),class:"head4-1",style:{cursor:"pointer"}},"我的收藏")])]),(0,r._)("tr",null,[(0,r._)("td",qn,[(0,r._)("h3",{onClick:t[2]||(t[2]=e=>n.navigateTo("buyerHistory")),class:"head4-1",style:{cursor:"pointer"}},"历史购买记录")])]),(0,r._)("tr",null,[(0,r._)("td",Nn,[(0,r._)("h3",{onClick:t[3]||(t[3]=e=>n.navigateTo("BuyerMain")),class:"head4-1",style:{cursor:"pointer"}},"返回主页")])]),(0,r._)("tr",null,[(0,r._)("td",Vn,[(0,r._)("button",{onClick:t[4]||(t[4]=(...e)=>n.handleLogout&&n.handleLogout(...e)),class:"head5-1",style:{cursor:"pointer"}},"退出登录")])])])]),(0,r._)("div",Ln,[(0,r._)("div",Qn,[(0,r.Wm)(l,{to:{name:"BuyerMain"}},{default:(0,r.w5)((()=>[(0,r.Uk)(" 返回 ")])),_:1}),Gn,(0,r._)("table",Kn,[Rn,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.paginatedOrders,(e=>((0,r.wg)(),(0,r.iD)("tr",{key:e.orderid},[(0,r._)("td",null,(0,g.zw)(e.orderid),1),(0,r._)("td",null,(0,g.zw)(e.address),1),(0,r._)("td",null,(0,g.zw)(e.telephone),1),(0,r._)("td",null,(0,g.zw)(e.buyername),1),(0,r._)("td",null,(0,g.zw)(e.goodid),1),(0,r._)("td",null,[4===e.orderstate?((0,r.wg)(),(0,r.iD)("button",{key:0,class:"green-btn",onClick:t=>n.handleOrderAction(e.orderid,"confirmCompletion"),style:{"background-color":"transparent",color:"#f44336",border:"2px solid #f44336",padding:"5px 10px","border-radius":"4px",cursor:"pointer"}},"确认交易完成",8,Zn)):(0,r.kq)("",!0),e.orderstate>=0&&e.orderstate<4?((0,r.wg)(),(0,r.iD)("button",{key:1,class:"red-btn",onClick:t=>n.handleOrderAction(e.orderid,"cancel"),style:{"background-color":"transparent",color:"#f44336",border:"2px solid #f44336",padding:"5px 10px","border-radius":"4px",cursor:"pointer"}},"取消订单",8,Yn)):(0,r.kq)("",!0),e.orderstate>4||-1===e.orderstate?((0,r.wg)(),(0,r.iD)("span",Hn,"无法操作订单")):(0,r.kq)("",!0)]),(0,r._)("td",null,(0,g.zw)(n.getOrderStatus(e.orderstate)),1)])))),128))]),(0,r._)("div",En,[(0,r._)("button",{onClick:t[5]||(t[5]=(...e)=>n.goToPrevPage&&n.goToPrevPage(...e)),disabled:n.isPrevDisabled,class:"prev"},"上一页",8,jn),(0,r._)("span",null,(0,g.zw)(o.currentPage)+" / "+(0,g.zw)(n.totalPages),1),(0,r._)("button",{onClick:t[6]||(t[6]=(...e)=>n.goToNextPage&&n.goToNextPage(...e)),disabled:n.isNextDisabled,class:"next"},"下一页",8,$n)])])])])):((0,r.wg)(),(0,r.iD)("div",Wn,Xn))])}var tl={props:["userId"],data(){return{isLoggedIn:!0,orders:[{orderid:1,address:"地址1",telephone:"1234567890",buyername:"user1",goodid:101,orderstate:4},{orderid:2,address:"地址2",telephone:"1234567891",buyername:"user2",goodid:102,orderstate:3},{orderid:3,address:"地址3",telephone:"1234567892",buyername:"user3",goodid:103,orderstate:2},{orderid:4,address:"地址4",telephone:"1234567893",buyername:"user4",goodid:104,orderstate:1},{orderid:6,address:"地址6",telephone:"1234567895",buyername:"user6",goodid:106,orderstate:-1},{orderid:7,address:"地址7",telephone:"1234567896",buyername:"user7",goodid:107,orderstate:5},{orderid:8,address:"地址8",telephone:"1234567897",buyername:"user8",goodid:108,orderstate:4}],currentPage:1,pageSize:5,totalItems:8}},methods:{...(0,sn.nv)(["logout"]),handleLogout(){this.logout(),this.$router.push("/")},navigateTo(e){this.$router.push({name:e})},beforeMount(){this.isLoggedIn||this.$router.push("/")},goBack(){this.$router.push({name:"ShowAllUsers"})},getOrderStatus(e){const t={"-1":"交易取消",0:"等待客户下单",1:"等待商家确认",2:"等待备货确认",3:"等待发货确认",4:"商家已发货，等待交易确认",5:"交易成功"};return t[e]||"未知状态"},handleOrderAction(e,t){switch(t){case"confirmCompletion":this.confirmOrder(e);break;case"cancel":this.cancelOrder(e);break;default:console.log("无效的操作")}},confirmOrder(e){const t=this.orders.find((t=>t.orderid===e));t&&(t.orderstate+=1),alert("该订单阶段确认成功！"),console.log("确认订单",e)},cancelOrder(e){const t=this.orders.find((t=>t.orderid===e));t&&(t.orderstate=-1),alert("该订单已取消！"),console.log("取消订单",e)},goToPrevPage(){this.currentPage>1&&(this.currentPage--,this.fetchOrders())},goToNextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchOrders())},fetchOrders(){}},computed:{...(0,sn.Se)(["isSeller","isBuyer"]),username(){return this.$store.state.admin?this.$store.state.admin.username:"未登录"},totalPages(){return 1>Math.ceil(this.orders.length/this.pageSize)?1:Math.ceil(this.orders.length/this.pageSize)},paginatedOrders(){const e=(this.currentPage-1)*this.pageSize,t=e+this.pageSize;return this.orders.slice(e,t)},isSeller(){return this.$store.getters.isSeller},isPrevDisabled(){return 1===this.currentPage},isNextDisabled(){return this.currentPage===this.totalPages}},mounted(){this.fetchOrders(),this.filteredUsers=this.orders}};const sl=(0,l.Z)(tl,[["render",el],["__scopeId","data-v-685c1d4e"]]);var il=sl;const rl=e=>((0,r.dD)("data-v-40b18359"),e=e(),(0,r.Cn)(),e),ol={style:{margin:"0px"}},nl={key:0},ll={class:"left"},al={class:"daohang"},dl=rl((()=>(0,r._)("img",{class:"head1",src:we,alt:""},null,-1))),cl={class:"head2"},ul={class:"head4"},gl={class:"head4"},hl={class:"head4"},pl={class:"head4"},ml={class:"head5"},_l={class:"right",style:{width:"50%"}},wl={class:"container"},vl=rl((()=>(0,r._)("div",{class:"centered-container"},[(0,r._)("h2",null,"我的收藏")],-1))),yl={border:"1px",align:"center",cellspacing:"0",style:{width:"90%"}},bl=rl((()=>(0,r._)("tr",null,[(0,r._)("th",null,"展示内容"),(0,r._)("th",null,"名称"),(0,r._)("th",null,"描述"),(0,r._)("th",null,"操作")],-1))),kl={style:{display:"flex","justify-content":"center","align-items":"center"}},fl={style:{"text-align":"center"}},Pl=["src"],Al=["src"],xl={class:"media-navigation"},Cl=["onClick"],Ul=["onClick"],Dl={key:0,class:"overlay"},Fl={class:"centered-container"},Il={class:"centered-container"},Ol={class:"centered-container"},Sl=["onClick"],Ml={class:"pagination"},Bl=["disabled"],Tl={id:"page-info"},zl=["disabled"],ql={key:1,class:"else"},Nl=rl((()=>(0,r._)("a",{href:"login"},"登录",-1)));function Vl(e,t,s,o,n,l){return(0,r.wg)(),(0,r.iD)("body",ol,[e.isLoggedIn?((0,r.wg)(),(0,r.iD)("div",nl,[(0,r._)("div",ll,[(0,r._)("table",al,[dl,(0,r._)("tr",null,[(0,r._)("td",cl,(0,g.zw)(l.username),1)]),(0,r._)("tr",null,[(0,r._)("td",ul,[(0,r._)("h3",{onClick:t[0]||(t[0]=e=>l.navigateTo("BuyerCart")),class:"head4-1",style:{cursor:"pointer"}},"我的购物车")])]),(0,r._)("tr",null,[(0,r._)("td",gl,[(0,r._)("h3",{onClick:t[1]||(t[1]=e=>l.navigateTo("BuyerLikes")),class:"head4-1",style:{cursor:"pointer"}},"我的收藏")])]),(0,r._)("tr",null,[(0,r._)("td",hl,[(0,r._)("h3",{onClick:t[2]||(t[2]=e=>l.navigateTo("buyerHistory")),class:"head4-1",style:{cursor:"pointer"}},"历史购买记录")])]),(0,r._)("tr",null,[(0,r._)("td",pl,[(0,r._)("h3",{onClick:t[3]||(t[3]=e=>l.navigateTo("BuyerMain")),class:"head4-1",style:{cursor:"pointer"}},"返回主页")])]),(0,r._)("tr",null,[(0,r._)("td",ml,[(0,r._)("button",{onClick:t[4]||(t[4]=(...e)=>l.handleLogout&&l.handleLogout(...e)),class:"head5-1",style:{cursor:"pointer"}},"退出登录")])])])]),(0,r._)("div",_l,[(0,r._)("div",wl,[vl,(0,r._)("table",yl,[bl,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.paginatedItems,(e=>((0,r.wg)(),(0,r.iD)("tr",{key:e.id},[(0,r._)("td",null,[(0,r._)("div",kl,[(0,r._)("div",fl,[(0,r._)("div",{class:(0,g.C_)(["media-container",{"sold-out":0!==e.state}])},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.mediaFiles,((e,t)=>(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",{key:t},[e.isVideo?(0,r.kq)("",!0):(0,r.wy)(((0,r.wg)(),(0,r.iD)("img",{key:0,src:e.url,alt:"商品图片"},null,8,Pl)),[[i.F8,e.isActive]]),e.isVideo?(0,r.wy)(((0,r.wg)(),(0,r.iD)("video",{key:1,src:e.url,controls:""},null,8,Al)),[[i.F8,e.isActive]]):(0,r.kq)("",!0)])),[[i.F8,e.isActive]]))),128))],2),(0,r._)("div",xl,[(0,r._)("button",{onClick:t=>l.showPrevMedia(e)},"＜",8,Cl),(0,r.Uk)("         "),(0,r._)("button",{onClick:t=>l.showNextMedia(e)},"＞",8,Ul)]),0!==e.state?((0,r.wg)(),(0,r.iD)("div",Dl,"商品不可购买")):(0,r.kq)("",!0)])])]),(0,r._)("td",null,[(0,r._)("div",Fl,(0,g.zw)(e.name),1)]),(0,r._)("td",null,[(0,r._)("div",Il,(0,g.zw)(e.description),1)]),(0,r._)("td",null,[(0,r._)("div",Ol,[(0,r._)("button",{class:"delete-button",onClick:t=>l.dislike(e.id)},"取消收藏",8,Sl)])])])))),128))]),(0,r._)("div",Ml,[(0,r._)("button",{onClick:t[5]||(t[5]=(...e)=>l.goToPrevPage&&l.goToPrevPage(...e)),class:"prev",disabled:1===n.currentPage},"上一页",8,Bl),(0,r._)("span",Tl,"第 "+(0,g.zw)(n.currentPage)+" / "+(0,g.zw)(l.totalPages)+" 页",1),(0,r._)("button",{onClick:t[6]||(t[6]=(...e)=>l.goToNextPage&&l.goToNextPage(...e)),class:"next",disabled:n.currentPage===l.totalPages},"下一页",8,zl)])])])])):((0,r.wg)(),(0,r.iD)("div",ql,[(0,r.Uk)(" 您还未登录，请先"),Nl]))])}var Ll={data(){return{items:[{id:1,name:"猫咪粮食",price:"99",description:"高营养猫粮",kind:"猫咪主粮",mediaFiles:[{url:s(7112),isActive:!0,isVideo:!1},{url:s(453),isActive:!1,isVideo:!1}]},{id:2,name:"猫咪玩具",price:"49",description:"好玩的猫咪玩具",kind:"猫咪日用",mediaFiles:[{url:s(453),isActive:!0,isVideo:!1},{url:s(7112),isActive:!1,isVideo:!1}]},{id:3,name:"猫咪窝",price:"299",description:"舒适的猫咪小窝",kind:"猫咪主粮",mediaFiles:[{url:s(7112),isActive:!0,isVideo:!1},{url:s(453),isActive:!1,isVideo:!1}]}],searchQuery:"",selectedCategory:"猫咪主粮",filteredItems:[],currentPage:1,itemsPerPage:2,search:{keyword:"",kind:"猫咪主粮"}}},computed:{...(0,sn.Se)(["isLoggedIn","isSeller","isBuyer"]),username(){return this.$store.state.admin?this.$store.state.admin.username:"未登录"},paginatedItems(){const e=(this.currentPage-1)*this.itemsPerPage,t=this.currentPage*this.itemsPerPage;return this.filteredItems.slice(e,t)},totalPages(){return Math.ceil(this.filteredItems.length/this.itemsPerPage)}},methods:{...(0,sn.nv)(["logout"]),dislike(e){this.filteredItems=this.filteredItems.filter((t=>t.id!==e)),console.log("已取消收藏的商品ID:",e)},handleLogout(){this.logout(),this.$router.push("/")},navigateTo(e){this.$router.push({name:e})},beforeMount(){this.isLoggedIn||this.$router.push("/")},handleSearch(){this.filteredItems=this.items.filter((e=>{const t=!this.searchQuery||e.name.toLowerCase().includes(this.searchQuery.toLowerCase()),s=!this.selectedCategory||e.kind===this.selectedCategory;return console.log(`Item: ${e.name}, Keyword Match: ${t}, Category Match: ${s}`),t&&s})),console.log("Filtered items count:",this.filteredItems.length)},showPrevMedia(e){const t=e.mediaFiles.findIndex((e=>e.isActive));if(console.log("Current active index:",t),t>=0){const s=(t-1+e.mediaFiles.length)%e.mediaFiles.length;console.log("Previous index:",s),this.setActiveMedia(e,s)}},showNextMedia(e){const t=e.mediaFiles.findIndex((e=>e.isActive));if(console.log("Current active index:",t),t>=0){const s=(t+1)%e.mediaFiles.length;console.log("Next index:",s),this.setActiveMedia(e,s)}},setActiveMedia(e,t){e.mediaFiles.forEach(((e,s)=>{e.isActive=s===t,console.log(`Media at index ${s} active status: `,e.isActive)}))},goToPrevPage(){this.currentPage>1&&(this.currentPage--,console.log("Current page after prev:",this.currentPage))},goToNextPage(){this.currentPage<this.totalPages&&(this.currentPage++,console.log("Current page after next:",this.currentPage))},resetPage(){this.currentPage=1}},watch:{filteredItems(e,t){e!==t&&this.resetPage()}},mounted(){this.filteredItems=this.items}};const Ql=(0,l.Z)(Ll,[["render",Vl],["__scopeId","data-v-40b18359"]]);var Gl=Ql;const Kl=e=>((0,r.dD)("data-v-4738da98"),e=e(),(0,r.Cn)(),e),Rl={style:{margin:"0px"}},Zl={key:0},Yl={class:"left"},Hl={class:"daohang"},El=Kl((()=>(0,r._)("img",{class:"head1",src:we,alt:""},null,-1))),jl={class:"head2"},$l={class:"head4"},Wl={class:"head4"},Jl={class:"head4"},Xl={class:"head4"},ea={class:"head5"},ta={class:"right",style:{width:"60%",margin:"0px"}},sa={class:"container"},ia=Kl((()=>(0,r._)("div",{class:"centered-container"},[(0,r._)("h2",null,"我的购物车")],-1))),ra={border:"1px",align:"center",cellspacing:"0",style:{width:"100%"}},oa=Kl((()=>(0,r._)("tr",null,[(0,r._)("th",{class:"table-column"},"展示内容"),(0,r._)("th",{class:"table-column"},"名称"),(0,r._)("th",{class:"table-column"},"购买数量"),(0,r._)("th",{class:"table-column"},"小计"),(0,r._)("th",{class:"table-column"},"操作"),(0,r._)("th",{class:"table-column"},"选择")],-1))),na={class:"table-column"},la={style:{display:"flex","justify-content":"center","align-items":"center"}},aa={style:{"text-align":"center"}},da=["src"],ca=["src"],ua={class:"media-navigation"},ga=["onClick"],ha=["onClick"],pa={key:0,class:"overlay"},ma={class:"table-column"},_a={class:"centered-container"},wa={class:"table-column"},va={class:"centered-container"},ya=["onClick"],ba=["onUpdate:modelValue","disabled"],ka=["onClick"],fa={class:"table-column"},Pa={class:"centered-container"},Aa={class:"table-column"},xa={class:"centered-container"},Ca=["onClick"],Ua=["onClick"],Da={class:"table-column"},Fa={class:"centered-container"},Ia=["onUpdate:modelValue"],Oa={class:"pagination"},Sa=["disabled"],Ma=["disabled"],Ba={key:1,class:"else"},Ta=Kl((()=>(0,r._)("a",{href:"login"},"登录",-1)));function za(e,t,s,o,n,l){return(0,r.wg)(),(0,r.iD)("body",Rl,[n.isLoggedIn?((0,r.wg)(),(0,r.iD)("div",Zl,[(0,r._)("div",Yl,[(0,r._)("table",Hl,[El,(0,r._)("tr",null,[(0,r._)("td",jl,(0,g.zw)(l.username),1)]),(0,r._)("tr",null,[(0,r._)("td",$l,[(0,r._)("h3",{onClick:t[0]||(t[0]=e=>l.navigateTo("BuyerCart")),class:"head4-1",style:{cursor:"pointer"}},"我的购物车")])]),(0,r._)("tr",null,[(0,r._)("td",Wl,[(0,r._)("h3",{onClick:t[1]||(t[1]=e=>l.navigateTo("BuyerLikes")),class:"head4-1",style:{cursor:"pointer"}},"我的收藏")])]),(0,r._)("tr",null,[(0,r._)("td",Jl,[(0,r._)("h3",{onClick:t[2]||(t[2]=e=>l.navigateTo("buyerHistory")),class:"head4-1",style:{cursor:"pointer"}},"历史购买记录")])]),(0,r._)("tr",null,[(0,r._)("td",Xl,[(0,r._)("h3",{onClick:t[3]||(t[3]=e=>l.navigateTo("BuyerMain")),class:"head4-1",style:{cursor:"pointer"}},"返回主页")])]),(0,r._)("tr",null,[(0,r._)("td",ea,[(0,r._)("button",{onClick:t[4]||(t[4]=(...e)=>l.handleLogout&&l.handleLogout(...e)),class:"head5-1",style:{cursor:"pointer"}},"退出登录")])])])]),(0,r._)("div",ta,[(0,r._)("div",sa,[ia,(0,r._)("button",{id:"editall-button",onClick:t[5]||(t[5]=(...e)=>l.toggleEdit&&l.toggleEdit(...e))},(0,g.zw)(l.editButtonText),1),(0,r._)("table",ra,[oa,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.visibleItems,(e=>((0,r.wg)(),(0,r.iD)("tr",{key:e.id},[(0,r._)("td",na,[(0,r._)("div",la,[(0,r._)("div",aa,[(0,r._)("div",{class:(0,g.C_)(["media-container",{"sold-out":0!==e.state}])},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.mediaFiles,((e,t)=>(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",{key:t},[e.isVideo?(0,r.kq)("",!0):(0,r.wy)(((0,r.wg)(),(0,r.iD)("img",{key:0,src:e.url,alt:"商品图片"},null,8,da)),[[i.F8,e.isActive]]),e.isVideo?(0,r.wy)(((0,r.wg)(),(0,r.iD)("video",{key:1,src:e.url,controls:""},null,8,ca)),[[i.F8,e.isActive]]):(0,r.kq)("",!0)])),[[i.F8,e.isActive]]))),128))],2),(0,r._)("div",ua,[(0,r._)("button",{onClick:t=>l.showPrevMedia(e)},"＜",8,ga),(0,r.Uk)("         "),(0,r._)("button",{onClick:t=>l.showNextMedia(e)},"＞",8,ha)]),0!==e.state?((0,r.wg)(),(0,r.iD)("div",pa,"商品不可购买")):(0,r.kq)("",!0)])])]),(0,r._)("td",ma,[(0,r._)("div",_a,(0,g.zw)(e.name),1)]),(0,r._)("td",wa,[(0,r._)("div",va,[n.isEditing?((0,r.wg)(),(0,r.iD)("button",{key:0,onClick:t=>l.decrementQuantity(e)},"-",8,ya)):(0,r.kq)("",!0),(0,r.wy)((0,r._)("input",{type:"number","onUpdate:modelValue":t=>e.quantity=t,disabled:!n.isEditing,style:{width:"64.6px"}},null,8,ba),[[i.nr,e.quantity,void 0,{number:!0}]]),n.isEditing?((0,r.wg)(),(0,r.iD)("button",{key:1,onClick:t=>l.incrementQuantity(e)},"+",8,ka)):(0,r.kq)("",!0)])]),(0,r._)("td",fa,[(0,r._)("div",Pa,(0,g.zw)(e.price*e.quantity),1)]),(0,r._)("td",Aa,[(0,r._)("div",xa,[(0,r._)("button",{onClick:t=>l.addToFavorites(e.id)},"收藏",8,Ca),n.isEditing?((0,r.wg)(),(0,r.iD)("button",{key:0,onClick:t=>l.removeFromCart(e.id)},"删除",8,Ua)):(0,r.kq)("",!0)])]),(0,r._)("td",Da,[(0,r._)("div",Fa,[(0,r.wy)((0,r._)("input",{type:"checkbox","onUpdate:modelValue":t=>n.selectedItems[e.id]=t},null,8,Ia),[[i.e8,n.selectedItems[e.id]]])])])])))),128))]),(0,r._)("div",null,[(0,r._)("h3",null,"总计: "+(0,g.zw)(l.selectedTotalPrice),1),(0,r._)("button",{onClick:t[6]||(t[6]=(...e)=>l.submitSelectedOrders&&l.submitSelectedOrders(...e))},"提交选中的订单"),(0,r._)("button",{onClick:t[7]||(t[7]=(...e)=>l.addToFavoritesSelectedItems&&l.addToFavoritesSelectedItems(...e))},"一键收藏选中商品")]),(0,r._)("div",Oa,[(0,r._)("button",{onClick:t[8]||(t[8]=(...e)=>l.goToPrevPage&&l.goToPrevPage(...e)),disabled:e.isPrevDisabled,class:"prev"},"上一页",8,Sa),(0,r._)("span",null,(0,g.zw)(n.currentPage)+" / "+(0,g.zw)(l.totalPages),1),(0,r._)("button",{onClick:t[9]||(t[9]=(...e)=>l.goToNextPage&&l.goToNextPage(...e)),disabled:e.isNextDisabled,class:"next"},"下一页",8,Ma)])])])])):((0,r.wg)(),(0,r.iD)("div",Ba,[(0,r.Uk)(" 您还未登录，请先"),Ta]))])}var qa={data(){return{items:[{id:1,name:"猫咪粮食",price:99,quantity:2,maxQuantity:10,state:0,mediaFiles:[{url:s(7112),isActive:!0,isVideo:!1},{url:s(453),isActive:!1,isVideo:!1}]},{id:2,name:"猫咪玩具",price:49,quantity:3,maxQuantity:15,state:0,mediaFiles:[{url:s(453),isActive:!0,isVideo:!1},{url:s(7112),isActive:!1,isVideo:!1}]},{id:3,name:"猫咪窝",price:299,quantity:1,maxQuantity:5,state:0,mediaFiles:[{url:s(7112),isActive:!0,isVideo:!1},{url:s(453),isActive:!1,isVideo:!1}]}],favorites:[],searchQuery:"",selectedCategory:"猫咪主粮",search:{keyword:"",kind:"猫咪主粮"},isLoggedIn:!0,selectedItems:{},currentPage:1,itemsPerPage:2,isEditing:!1}},computed:{...(0,sn.Se)(["isLoggedIn","isSeller","isBuyer"]),visibleItems(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;return this.items.slice(e,t)},username(){return this.$store.state.admin?this.$store.state.admin.username:"未登录"},paginatedItems(){const e=(this.currentPage-1)*this.itemsPerPage,t=this.currentPage*this.itemsPerPage;return this.filteredItems.slice(e,t)},totalPages(){return Math.ceil(this.filteredItems.length/this.itemsPerPage)},selectedTotalPrice(){return Object.keys(this.selectedItems).reduce(((e,t)=>{const s=this.cartItems.find((e=>e.id===Number(t)));return s&&this.selectedItems[t]?e+s.price*s.quantity:e}),0)},editButtonText(){return this.isEditing?"查看":"编辑"}},methods:{...(0,sn.nv)(["logout"]),isItemVisible(e){const t=(this.currentPage-1)*this.itemsPerPage,s=t+this.itemsPerPage;return e>=t&&e<s},handleLogout(){this.logout(),this.$router.push("/")},navigateTo(e){this.$router.push({name:e})},beforeMount(){this.isLoggedIn||this.$router.push("/")},fetchCartItems(){},toggleEdit(){this.isEditing=!this.isEditing,this.isEditing||this.updateCart()},incrementQuantity(e){e.quantity<e.maxQuantity&&e.quantity++},decrementQuantity(e){e.quantity>1&&e.quantity--},removeFromCart(e){this.items=this.items.filter((t=>t.id!==e)),alert("选中的订单已删除！")},addToFavorites(e){const t=this.items.find((t=>t.id===e));t&&(this.favorites.some((t=>t.id===e))?alert("商品已在收藏夹中！"):(this.favorites.push(t),alert("商品已添加到收藏夹！")))},submitSelectedOrders(){this.items=this.items.filter((e=>!this.selectedItems[e.id])),this.selectedItems={},alert("选中的订单已提交！")},addToFavoritesSelectedItems(){alert("选中的商品已收藏！"),this.selectedItems={}},changePage(e){this.currentPage=e},updateCart(){},showPrevMedia(e){const t=e.mediaFiles.findIndex((e=>e.isActive));if(console.log("Current active index:",t),t>=0){const s=(t-1+e.mediaFiles.length)%e.mediaFiles.length;console.log("Previous index:",s),this.setActiveMedia(e,s)}},showNextMedia(e){const t=e.mediaFiles.findIndex((e=>e.isActive));if(console.log("Current active index:",t),t>=0){const s=(t+1)%e.mediaFiles.length;console.log("Next index:",s),this.setActiveMedia(e,s)}},setActiveMedia(e,t){e.mediaFiles.forEach(((e,s)=>{e.isActive=s===t,console.log(`Media at index ${s} active status: `,e.isActive)}))},goToPrevPage(){this.currentPage>1&&(this.currentPage--,console.log("Current page after prev:",this.currentPage))},goToNextPage(){this.currentPage<this.totalPages&&(this.currentPage++,console.log("Current page after next:",this.currentPage))},resetPage(){this.currentPage=1}},created(){this.cartItems=this.items,this.filteredItems=this.cartItems,this.fetchCartItems(),this.fetchCartItems()},watch:{filteredItems(e,t){e!==t&&this.resetPage()}},mounted(){this.filteredItems=this.items}};const Na=(0,l.Z)(qa,[["render",za],["__scopeId","data-v-4738da98"]]);var Va=Na,La="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFEAAABRBAMAAABYoVcFAAAAG1BMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACUUeIgAAAACXRSTlMA/99/v0Agn2B4dSdqAAAAe0lEQVR4nO3WwQ1AUBCE4U1oYDlwFAl3HRANUIU6dC6jgv8iSGbOk++9vWw2nD9n6jdWLDNH1lwya0pmQ8lsKZkzJStMdiZNmnySPCkZmLybbL9poAE1d/0ToYWeZ+hk1KjR91B22whlt41QdtsIZaZQtvcijhUWna/kAmZUH+sovcNdAAAAAElFTkSuQmCC";const Qa=e=>((0,r.dD)("data-v-7f550ab6"),e=e(),(0,r.Cn)(),e),Ga={style:{"background-color":"#FFF9F1"}},Ka=Qa((()=>(0,r._)("hr",{class:"cline",color:"#BBBBBB",width:"1",size:"900"},null,-1))),Ra={class:"left"},Za=Qa((()=>(0,r._)("a",{href:"/buyer-shop"},[(0,r._)("img",{src:La,alt:"",width:"40",title:"返回商品界面"})],-1))),Ya={class:"good-2"},Ha={colspan:"2",class:"goodname"},Ea={colspan:"2",class:"description"},ja=Qa((()=>(0,r._)("br",null,null,-1))),$a=Qa((()=>(0,r._)("td",{class:"price"},"总价：",-1))),Wa={class:"price"},Ja=Qa((()=>(0,r._)("td",{class:"price"},"剩余库存量：",-1))),Xa={class:"price"},ed={class:"right"},td={class:"username"},sd={class:"form-group"},id=Qa((()=>(0,r._)("label",null,"购买数量：",-1))),rd=["max"],od={class:"form-group"},nd=Qa((()=>(0,r._)("label",null,"姓名：",-1))),ld=Qa((()=>(0,r._)("br",null,null,-1))),ad={class:"form-group"},dd=Qa((()=>(0,r._)("label",null,"电话：",-1))),cd=Qa((()=>(0,r._)("br",null,null,-1))),ud={class:"form-group"},gd=Qa((()=>(0,r._)("label",null,"交易地点：",-1))),hd=Qa((()=>(0,r._)("br",null,null,-1))),pd=Qa((()=>(0,r._)("button",{type:"submit",class:"butt-2"},"确认购买",-1)));function md(e,t,s,o,n,l){return(0,r.wg)(),(0,r.iD)("body",Ga,[Ka,(0,r._)("div",Ra,[Za,(0,r._)("table",Ya,[(0,r._)("tr",null,[(0,r._)("td",Ha,(0,g.zw)(n.selectedProduct.name),1)]),(0,r._)("tr",null,[(0,r._)("td",Ea,[ja,(0,r.Uk)((0,g.zw)(n.selectedProduct.description),1)])]),(0,r._)("tr",null,[$a,(0,r._)("td",Wa,(0,g.zw)(n.selectedProduct.price),1)]),(0,r._)("tr",null,[Ja,(0,r._)("td",Xa,(0,g.zw)(n.selectedProduct.stock),1)])]),(0,r._)("button",{onClick:t[0]||(t[0]=(...e)=>l.cancelPurchase&&l.cancelPurchase(...e)),class:"butt-2"},"取消购买")]),(0,r._)("div",ed,[(0,r._)("form",{onSubmit:t[5]||(t[5]=(0,i.iM)(((...e)=>l.confirmPurchase&&l.confirmPurchase(...e)),["prevent"])),class:"buy-imf"},[(0,r._)("label",td,[(0,r._)("div",sd,[id,(0,r.wy)((0,r._)("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=e=>n.purchase.number=e),min:"1",max:n.selectedProduct.stock,required:"",style:{width:"200px",height:"66.4px"}},null,8,rd),[[i.nr,n.purchase.number,void 0,{number:!0}]])]),(0,r._)("div",od,[nd,(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>n.purchase.buyerName=e),required:""},null,512),[[i.nr,n.purchase.buyerName]])]),ld,(0,r._)("div",ad,[dd,(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>n.purchase.telephone=e),required:""},null,512),[[i.nr,n.purchase.telephone]])]),cd,(0,r._)("div",ud,[gd,(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>n.purchase.address=e),required:""},null,512),[[i.nr,n.purchase.address]])]),hd]),pd],32)])])}var _d={data(){return{selectedProduct:[],purchase:{quantity:1,buyerName:"buyer",telephone:"12345678901",address:"`123`"}}},methods:{async fetchUsrFromSession(){try{const e=await D.Z.get("/now-usr"),t=e.data;return this.currentUser=t,!0}catch(e){return console.error("获取用户数据错误:",e),!1}},async fetchGoodFromSession(){try{const e=await D.Z.get("/now-good"),t=e.data,s=t.picture.trim(),i=s.split(","),r=i.map(((e,t)=>({url:e,isActive:0===t})));return this.selectedProduct={...t,mediaFiles:r,goodid:t.goodid,goodname:t.goodname.trim(),description:t.description.trim(),price:t.price,number:t.number,kind:t.kind,subkind:t.subkind,buyingid:t.buyingid,numbermax:t.numbermax,islike:t.islike},console.log("this.selectedProduct:",this.selectedProduct),!0}catch(e){return console.error("获取用户数据错误:",e),!1}},cancelPurchase(){this.$router.push("/buyer")},confirmPurchase(){this.validateForm()&&(alert("成功创建订单！"),this.$router.push("/buyer"))},validateForm(){const e=/^[0-9]{11}$/;return e.test(this.purchase.telephone)?this.purchase.buyerName.length>10?(alert("用户名不能超过10个字符！"),!1):!(this.purchase.address.length>99)||(alert("地址不能超过99个字符！"),!1):(alert("电话号码需要是11位数字！"),!1)}}};const wd=(0,l.Z)(_d,[["render",md],["__scopeId","data-v-7f550ab6"]]);var vd=wd;const yd=e=>((0,r.dD)("data-v-43aecdda"),e=e(),(0,r.Cn)(),e),bd={style:{margin:"0px"}},kd={key:0},fd={class:"left"},Pd={class:"daohang"},Ad=yd((()=>(0,r._)("img",{class:"head1",src:we,alt:""},null,-1))),xd={class:"head2"},Cd={class:"head4"},Ud={class:"head4"},Dd={class:"head4"},Fd={class:"head4"},Id={class:"head5"},Od={class:"right",style:{width:"100%"}},Sd=yd((()=>(0,r._)("a",{href:"/#/buyer"},[(0,r._)("img",{src:La,alt:"",width:"40",title:"返回商品界面"})],-1))),Md={class:"picture-k"},Bd=["src"],Td=["src"],zd={class:"media-navigation"},qd={class:"good-2"},Nd={colspan:"2",class:"goodname"},Vd={colspan:"2",class:"description"},Ld=yd((()=>(0,r._)("td",{class:"price"},"价格：",-1))),Qd={class:"price"},Gd=yd((()=>(0,r._)("td",{class:"price"},"剩余库存量：",-1))),Kd={class:"price"},Rd={class:"centered-container"},Zd={key:1},Yd={class:"else"},Hd={class:"left"},Ed={class:"daohang"},jd=yd((()=>(0,r._)("img",{class:"head1",src:we,alt:""},null,-1))),$d=yd((()=>(0,r._)("tr",null,[(0,r._)("td",{class:"head2"},"游客")],-1))),Wd=yd((()=>(0,r._)("tr",null,[(0,r._)("td",{class:"head4"},[(0,r._)("h3",{class:"head4-1"},"其他功能后登录使用")])],-1))),Jd={class:"head5"},Xd={class:"right",style:{width:"100%"}},ec=yd((()=>(0,r._)("a",{href:"/buyer"},[(0,r._)("img",{src:La,alt:"",width:"40",title:"返回商品界面"})],-1))),tc={class:"picture-k"},sc=["src"],ic=["src"],rc={class:"media-navigation"},oc={class:"good-2"},nc={colspan:"2",class:"goodname"},lc={colspan:"2",class:"description"},ac=yd((()=>(0,r._)("td",{class:"price"},"价格：",-1))),dc={class:"price"},cc=yd((()=>(0,r._)("td",{class:"price"},"剩余库存量：",-1))),uc={class:"price"},gc={class:"centered-container"};function hc(e,t,s,o,n,l){return(0,r.wg)(),(0,r.iD)("body",bd,[l.isLoggedIn?((0,r.wg)(),(0,r.iD)("div",kd,[(0,r._)("div",fd,[(0,r._)("table",Pd,[Ad,(0,r._)("tr",null,[(0,r._)("td",xd,(0,g.zw)(e.username),1)]),(0,r._)("tr",null,[(0,r._)("td",Cd,[(0,r._)("h3",{onClick:t[0]||(t[0]=e=>l.navigateTo("BuyerCart")),class:"head4-1",style:{cursor:"pointer"}},"我的购物车")])]),(0,r._)("tr",null,[(0,r._)("td",Ud,[(0,r._)("h3",{onClick:t[1]||(t[1]=e=>l.navigateTo("BuyerLikes")),class:"head4-1",style:{cursor:"pointer"}},"我的收藏")])]),(0,r._)("tr",null,[(0,r._)("td",Dd,[(0,r._)("h3",{onClick:t[2]||(t[2]=e=>l.navigateTo("buyerHistory")),class:"head4-1",style:{cursor:"pointer"}},"历史购买记录")])]),(0,r._)("tr",null,[(0,r._)("td",Fd,[(0,r._)("h3",{onClick:t[3]||(t[3]=e=>l.navigateTo("BuyerMain")),class:"head4-1",style:{cursor:"pointer"}},"返回主页")])]),(0,r._)("tr",null,[(0,r._)("td",Id,[(0,r._)("button",{onClick:t[4]||(t[4]=(...e)=>l.handleLogout&&l.handleLogout(...e)),class:"head5-1",style:{cursor:"pointer"}},"退出登录")])])])]),(0,r._)("div",Od,[Sd,(0,r._)("div",Md,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.selectedProduct.mediaFiles,((e,s)=>(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",{class:"media-container",key:s},[e.isVideo?((0,r.wg)(),(0,r.iD)("video",{key:1,src:e.url,controls:"",class:"product-video",style:{width:"200px"}},null,8,Td)):((0,r.wg)(),(0,r.iD)("img",{key:0,src:e.url,alt:"商品图片",class:"product-image",style:{width:"415.8px",height:"504.9px"}},null,8,Bd)),(0,r._)("div",zd,[(0,r._)("button",{class:"media-navigation-button prev-button",onClick:t[5]||(t[5]=e=>l.showPrevMedia(n.selectedProduct))},"＜"),(0,r._)("button",{class:"media-navigation-button next-button",onClick:t[6]||(t[6]=e=>l.showNextMedia(n.selectedProduct))},"＞")])])),[[i.F8,e.isActive]]))),128))]),(0,r._)("table",qd,[(0,r._)("tr",null,[(0,r._)("td",Nd,(0,g.zw)(n.selectedProduct.name),1)]),(0,r._)("tr",null,[(0,r._)("td",Vd,(0,g.zw)(n.selectedProduct.description),1)]),(0,r._)("tr",null,[Ld,(0,r._)("td",Qd,(0,g.zw)(n.selectedProduct.price),1)]),(0,r._)("tr",null,[Gd,(0,r._)("td",Kd,(0,g.zw)(n.selectedProduct.number),1)])]),(0,r._)("div",Rd,[(0,r._)("button",{onClick:t[7]||(t[7]=e=>l.buyProduct(n.selectedProduct.id)),class:"butt-1",style:{cursor:"pointer"}},"购买该商品"),(0,r.Uk)("   "),(0,r._)("button",{onClick:t[8]||(t[8]=e=>l.addToCart(n.selectedProduct.id)),class:"butt-1",style:{cursor:"pointer"}},"加入购物车"),(0,r.Uk)("   "),(0,r._)("button",{onClick:t[9]||(t[9]=e=>l.addToFavorites(n.selectedProduct.id)),class:"butt-1",style:{cursor:"pointer"}},"收藏商品")])])])):((0,r.wg)(),(0,r.iD)("div",Zd,[(0,r._)("div",Yd,[(0,r._)("div",Hd,[(0,r._)("table",Ed,[jd,$d,Wd,(0,r._)("tr",null,[(0,r._)("td",Jd,[(0,r._)("button",{onClick:t[10]||(t[10]=(...e)=>l.handleLogout&&l.handleLogout(...e)),class:"head5-1",style:{cursor:"pointer"}},"返回登录")])])])]),(0,r._)("div",Xd,[ec,(0,r._)("div",tc,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.selectedProduct.mediaFiles,((e,s)=>(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",{class:"media-container",key:s},[e.isVideo?((0,r.wg)(),(0,r.iD)("video",{key:1,src:e.url,controls:"",class:"product-video",style:{width:"200px"}},null,8,ic)):((0,r.wg)(),(0,r.iD)("img",{key:0,src:e.url,alt:"商品图片",class:"product-image",style:{width:"415.8px",height:"504.9px"}},null,8,sc)),(0,r._)("div",rc,[(0,r._)("button",{class:"media-navigation-button prev-button",onClick:t[11]||(t[11]=e=>l.showPrevMedia(n.selectedProduct))},"＜"),(0,r._)("button",{class:"media-navigation-button next-button",onClick:t[12]||(t[12]=e=>l.showNextMedia(n.selectedProduct))},"＞")])])),[[i.F8,e.isActive]]))),128))]),(0,r._)("table",oc,[(0,r._)("tr",null,[(0,r._)("td",nc,(0,g.zw)(n.selectedProduct.goodname),1)]),(0,r._)("tr",null,[(0,r._)("td",lc,(0,g.zw)(n.selectedProduct.description),1)]),(0,r._)("tr",null,[ac,(0,r._)("td",dc,(0,g.zw)(n.selectedProduct.price),1)]),(0,r._)("tr",null,[cc,(0,r._)("td",uc,(0,g.zw)(n.selectedProduct.number),1)])]),(0,r._)("div",gc,[(0,r._)("button",{onClick:t[13]||(t[13]=e=>l.buyProduct(n.selectedProduct.goodid)),class:"butt-1",style:{cursor:"pointer"}},"购买该商品"),(0,r.Uk)("   "),(0,r._)("button",{onClick:t[14]||(t[14]=e=>l.addToCart(n.selectedProduct.goodid)),class:"butt-1",style:{cursor:"pointer"}},"加入购物车"),(0,r.Uk)("   "),(0,r._)("button",{onClick:t[15]||(t[15]=e=>l.addToFavorites(n.selectedProduct.goodid)),class:"butt-1",style:{cursor:"pointer"}},"收藏商品")])])])]))])}var pc={data(){return{items:[],searchQuery:"",selectedProduct:[],currentUser:"",selectedCategory:"猫咪主粮",filteredItems:[],currentPage:1,itemsPerPage:2,search:{keyword:"",kind:"猫咪主粮"}}},created(){this.fetchUsrFromSession(),this.fetchGoodFromSession()},computed:{isLoggedIn(){return!!this.currentUser},isSeller(){return this.currentUser&&1===this.currentUser.power},isBuyer(){return this.currentUser&&0===this.currentUser.power},paginatedItems(){const e=(this.currentPage-1)*this.itemsPerPage,t=this.currentPage*this.itemsPerPage;return this.filteredItems.slice(e,t)},totalPages(){return Math.ceil(this.filteredItems.length/this.itemsPerPage)}},methods:{...(0,sn.nv)(["logout"]),async fetchUsrFromSession(){try{const e=await D.Z.get("/now-usr"),t=e.data;return this.currentUser=t,!0}catch(e){return console.error("获取用户数据错误:",e),!1}},async fetchGoodFromSession(){try{const e=await D.Z.get("/now-good"),t=e.data,s=t.picture.trim(),i=s.split(","),r=i.map(((e,t)=>({url:e,isActive:0===t})));return this.selectedProduct={...t,mediaFiles:r,goodid:t.goodid,goodname:t.goodname.trim(),description:t.description.trim(),price:t.price,number:t.number,kind:t.kind,subkind:t.subkind,buyingid:t.buyingid,numbermax:t.numbermax,islike:t.islike},console.log("this.selectedProduct:",this.selectedProduct),!0}catch(e){return console.error("获取用户数据错误:",e),!1}},handleLogout(){this.logout(),this.$router.push("/")},navigateTo(e){this.$router.push({name:e})},beforeMount(){this.isLoggedIn||this.$router.push("/")},showPrevMedia(e){const t=e.mediaFiles.findIndex((e=>e.isActive));if(console.log("Current active index:",t),t>=0){const s=(t-1+e.mediaFiles.length)%e.mediaFiles.length;console.log("Previous index:",s),this.setActiveMedia(e,s)}},showNextMedia(e){const t=e.mediaFiles.findIndex((e=>e.isActive));if(console.log("Current active index:",t),t>=0){const s=(t+1)%e.mediaFiles.length;console.log("Next index:",s),this.setActiveMedia(e,s)}},setActiveMedia(e,t){e.mediaFiles.forEach(((e,s)=>{e.isActive=s===t,console.log(`Media at index ${s} active status: `,e.isActive)}))},buyProduct(e){this.$router.push({name:"BuyerFillInfo",params:{productId:e}})},addToCart(){alert("该商品加入购物车成功！")},addToFavorites(){alert("该商品收藏成功！")}},mounted(){this.filteredItems=this.items}};const mc=(0,l.Z)(pc,[["render",hc],["__scopeId","data-v-43aecdda"]]);var _c=mc;const wc=(0,r._)("h2",null,"错误界面",-1),vc={key:0},yc={key:1};function bc(e,t,s,i,o,n){const l=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",null,[wc,o.errorMessage?((0,r.wg)(),(0,r.iD)("div",vc,(0,g.zw)(o.errorMessage),1)):(0,r.kq)("",!0),o.redirectTo?((0,r.wg)(),(0,r.iD)("div",yc,[(0,r.Wm)(l,{to:o.redirectTo},{default:(0,r.w5)((()=>[(0,r.Uk)("返回页面")])),_:1},8,["to"])])):(0,r.kq)("",!0)])}var kc={data(){return{errorMessage:"",redirectTo:null}},created(){this.errorMessage=this.$route.query.err||"",this.redirectTo=this.$route.query.to||"/"}};const fc=(0,l.Z)(kc,[["render",bc]]);var Pc=fc;const Ac=e=>((0,r.dD)("data-v-7dc072f4"),e=e(),(0,r.Cn)(),e),xc={key:0},Cc={key:0,class:"modal",style:{position:"fixed","z-index":"1",left:"0",top:"0",width:"100%",height:"100%",overflow:"auto","background-color":"rgba(0,0,0,0.4)"}},Uc=["src"],Dc=["src"],Fc={id:"a"},Ic={class:"container"},Oc=Ac((()=>(0,r._)("div",{class:"centered-container"},[(0,r._)("h2",null,"搜索商品信息"),(0,r._)("br")],-1))),Sc={class:"centered-container"},Mc={class:"search-bar"},Bc=Ac((()=>(0,r._)("option",{value:"猫咪主粮"},"猫咪主粮",-1))),Tc=Ac((()=>(0,r._)("option",{value:"猫咪零食"},"猫咪零食",-1))),zc=Ac((()=>(0,r._)("option",{value:"猫咪日用"},"猫咪日用",-1))),qc=[Bc,Tc,zc],Nc={border:"1px",align:"center",cellspacing:"0"},Vc=Ac((()=>(0,r._)("tr",null,[(0,r._)("th",null,"ID"),(0,r._)("th",null,"名称"),(0,r._)("th",null,"描述"),(0,r._)("th",null,"库存"),(0,r._)("th",null,"单价"),(0,r._)("th",null,"展示内容"),(0,r._)("th",null,"状态"),(0,r._)("th",null,"操作")],-1))),Lc={class:"media-container"},Qc=["src"],Gc=["src"],Kc={class:"media-navigation"},Rc=["onClick"],Zc=["onClick"],Yc=["onClick"],Hc=["onClick"],Ec={class:"pagination"},jc=["disabled"],$c={id:"page-info"},Wc=["disabled"],Jc={key:1,class:"else"};function Xc(e,t,s,o,n,l){const a=(0,r.up)("PriceModal"),d=(0,r.up)("router-link");return l.isLoggedIn?((0,r.wg)(),(0,r.iD)("div",xc,[n.showModal?((0,r.wg)(),(0,r.iD)("div",Cc,[(0,r._)("span",{class:"close-button",onClick:t[0]||(t[0]=(...t)=>e.closeModal&&e.closeModal(...t)),style:{position:"absolute",top:"20px",right:"30px",color:"#f1f1f1","font-size":"35px","font-weight":"bold",cursor:"pointer"}},"×"),"image"===e.modalContentType?((0,r.wg)(),(0,r.iD)("img",{key:0,src:e.modalContentSrc,style:{margin:"auto",display:"none",width:"80%","max-width":"700px"}},null,8,Uc)):(0,r.kq)("",!0),"video"===e.modalContentType?((0,r.wg)(),(0,r.iD)("video",{key:1,src:e.modalContentSrc,controls:"",style:{margin:"auto",display:"none",width:"80%","max-width":"700px"}},null,8,Dc)):(0,r.kq)("",!0)])):(0,r.kq)("",!0),(0,r._)("div",Fc,[(0,r._)("div",Ic,[Oc,(0,r._)("div",Sc,[(0,r._)("div",Mc,[(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>n.searchQuery=e),class:"custom-input",placeholder:"搜索商品"},null,512),[[i.nr,n.searchQuery]]),(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>n.selectedCategory=e),id:"search_kind"},qc,512),[[i.bM,n.selectedCategory]]),(0,r._)("button",{onClick:t[3]||(t[3]=(...e)=>l.searchGoods&&l.searchGoods(...e)),style:{width:"130px"},class:"custom-button"},"搜索")])]),(0,r._)("table",Nc,[Vc,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.paginatedGoods,(e=>((0,r.wg)(),(0,r.iD)("tr",{key:e.goodid},[(0,r._)("td",null,(0,g.zw)(e.goodid),1),(0,r._)("td",null,(0,g.zw)(e.goodname),1),(0,r._)("td",null,(0,g.zw)(e.description),1),(0,r._)("td",{class:(0,g.C_)({"low-stock":e.number<5})},(0,g.zw)(e.number),3),(0,r._)("td",null,(0,g.zw)(e.price),1),(0,r._)("td",null,[(0,r._)("div",Lc,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.mediaFiles,((e,t)=>(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",{key:t},[l.isVideo(e)?(0,r.kq)("",!0):(0,r.wy)(((0,r.wg)(),(0,r.iD)("img",{key:0,src:e.url,alt:"商品图片"},null,8,Qc)),[[i.F8,e.isActive]]),l.isVideo(e)?(0,r.wy)(((0,r.wg)(),(0,r.iD)("video",{key:1,src:e.url,controls:""},null,8,Gc)),[[i.F8,e.isActive]]):(0,r.kq)("",!0)])),[[i.F8,e.isActive]]))),128))]),(0,r._)("div",Kc,[(0,r._)("button",{onClick:t=>l.showPrevMedia(e)},"＜",8,Rc),(0,r.Uk)("         "),(0,r._)("button",{onClick:t=>l.showNextMedia(e)},"＞",8,Zc)])]),(0,r._)("td",null,(0,g.zw)(l.stateText(e.state)),1),(0,r._)("td",null,[(0,r._)("button",{onClick:t=>l.confirmDelete(e.goodid)},"下架",8,Yc),(0,r.Uk)(" | "),(0,r._)("button",{onClick:t=>l.openPriceModal(e)},"修改价格",8,Hc)])])))),128))]),(0,r._)("div",Ec,[(0,r._)("button",{onClick:t[4]||(t[4]=(...e)=>l.goToPrevPage&&l.goToPrevPage(...e)),class:"prev",disabled:1===n.currentPage},"上一页",8,jc),(0,r._)("span",$c,"第 "+(0,g.zw)(n.currentPage)+" / "+(0,g.zw)(l.totalPages)+" 页",1),(0,r._)("button",{onClick:t[5]||(t[5]=(...e)=>l.goToNextPage&&l.goToNextPage(...e)),class:"next",disabled:n.currentPage===l.totalPages},"下一页",8,Wc)]),(0,r.Wm)(a,{good:n.selectedGood,isVisible:n.showPriceModal,onClose:t[6]||(t[6]=e=>n.showPriceModal=!1),onUpdate:l.handleUpdatePrice},null,8,["good","isVisible","onUpdate"])])])])):((0,r.wg)(),(0,r.iD)("div",Jc,[(0,r._)("span",null,[(0,r.Uk)("您还未登录，请先 "),(0,r.Wm)(d,{to:"/"},{default:(0,r.w5)((()=>[(0,r.Uk)("登录")])),_:1})])]))}var eu={components:{PriceModal:bi},data(){return{searchQuery:"",showPriceModal:!1,selectedGood:null,showModal:!1,selectedCategory:"猫咪主粮",currentPage:1,pageSize:6,filteredGoods:[],isHistory:0,showSuccessMessage:!1,successMessage:"",goods:[],currentUser:null}},created(){this.fetchUsrFromSession(),this.fetchgoodListSession()},computed:{isLoggedIn(){return!!this.currentUser},paginatedGoods(){const e=(this.currentPage-1)*this.pageSize,t=e+this.pageSize;return this.filteredGoods.slice(e,t)},totalPages(){return Math.ceil(this.filteredGoods.length/this.pageSize)}},async mounted(){console.log("ShowGoods 组件已挂载"),await this.fetchgoodListSession(),this.filteredGoods=this.goods,console.log("this.filteredGoods:",this.filteredGoods),this.showSuccessModal("价格修改成功！")},methods:{async fetchUsrFromSession(){try{const e=await D.Z.get("/now-usr"),t=e.data;return this.currentUser=t,!0}catch(e){return console.error("获取用户数据错误:",e),!1}},async fetchgoodListSession(){try{const e=await D.Z.get("/searchList"),t=e.data.data;return this.goods=t.map((e=>{const t=e.picture.trim(),s=t.split(","),i=s.map(((e,t)=>({url:e,isActive:0===t})));return{...e,mediaFiles:i,goodname:e.goodname.trim(),description:e.description.trim(),price:e.price,number:e.number,kind:e.kind,subkind:e.subkind}})),console.log("this.goods:",this.goods),!0}catch(e){return console.error("获取商品列表数据错误:",e),!1}},showPrevMedia(e){const t=e.mediaFiles.findIndex((e=>e.isActive));if(console.log("Current active index:",t),t>=0){const s=(t-1+e.mediaFiles.length)%e.mediaFiles.length;console.log("Previous index:",s),this.setActiveMedia(e,s)}},showNextMedia(e){const t=e.mediaFiles.findIndex((e=>e.isActive));if(console.log("Current active index:",t),t>=0){const s=(t+1)%e.mediaFiles.length;console.log("Next index:",s),this.setActiveMedia(e,s)}},setActiveMedia(e,t){e.mediaFiles.forEach(((e,s)=>{e.isActive=s===t,console.log(`Media at index ${s} active status: `,e.isActive)}))},isVideo(e){const t=e.url.endsWith(".mp4");return console.log(`Is media a video: ${t}`),t},showSuccessModal(e){this.successMessage=e,this.showSuccessMessage=!0},searchGoods(){console.log("搜索已执行"),this.filteredGoods=this.goods.filter((e=>{const t=!this.searchQuery||e.goodname.toLowerCase().includes(this.searchQuery.toLowerCase()),s=!this.selectedCategory||e.kind===this.selectedCategory;return this.resetPage(),t&&s}))},closeSuccessModal(){this.showSuccessMessage=!1},confirmDelete(e){confirm("确定要删除这个商品吗？")&&this.deleteGood(e)},deleteGood(e){console.log("删除商品，商品ID:",e),this.filteredGoods=this.filteredGoods.filter((t=>t.goodid!==e)),alert("商品删除成功")},openPriceModal(e){console.log("打开价格修改窗口!"),this.selectedGood=e,this.showPriceModal=!0},handleUpdatePrice({goodId:e,newPrice:t}){const s=this.goods.find((t=>t.goodid===e));s&&(s.price=t),this.showPriceModal=!1},goToPrevPage(){this.currentPage>1&&this.currentPage--},goToNextPage(){this.currentPage<this.totalPages&&this.currentPage++},resetPage(){this.currentPage=1},stateText(e){const t={0:"上架",1:"冻结",2:"售出"};return t[e]||"未知"}},watch:{filteredGoods(e,t){e!==t&&this.resetPage()}}};const tu=(0,l.Z)(eu,[["render",Xc],["__scopeId","data-v-7dc072f4"]]);var su=tu;const iu=e=>((0,r.dD)("data-v-5d4d8043"),e=e(),(0,r.Cn)(),e),ru={key:0},ou={id:"a"},nu={class:"container"},lu=iu((()=>(0,r._)("div",{class:"centered-container"},[(0,r._)("h2",null,"搜索商品信息"),(0,r._)("br")],-1))),au={class:"centered-container"},du={class:"search-bar"},cu=iu((()=>(0,r._)("option",{value:"猫咪主粮"},"猫咪主粮",-1))),uu=iu((()=>(0,r._)("option",{value:"猫咪零食"},"猫咪零食",-1))),gu=iu((()=>(0,r._)("option",{value:"猫咪日用"},"猫咪日用",-1))),hu=[cu,uu,gu],pu={border:"1px",align:"center",cellspacing:"0"},mu=iu((()=>(0,r._)("tr",null,[(0,r._)("th",null,"ID"),(0,r._)("th",null,"名称"),(0,r._)("th",null,"描述"),(0,r._)("th",null,"单价"),(0,r._)("th",null,"展示内容"),(0,r._)("th",null,"类别"),(0,r._)("th",null,"子类别"),(0,r._)("th",null,"创建日期")],-1))),_u={class:"media-container"},wu=["src"],vu=["src"],yu={class:"media-navigation"},bu=["onClick"],ku=["onClick"],fu={class:"pagination"},Pu=["disabled"],Au={id:"page-info"},xu=["disabled"],Cu={key:1,class:"else"},Uu=iu((()=>(0,r._)("a",{href:"/login"},"登录",-1)));function Du(e,t,s,o,n,l){return l.isLoggedIn?((0,r.wg)(),(0,r.iD)("div",ru,[(0,r._)("div",ou,[(0,r._)("div",nu,[lu,(0,r._)("div",au,[(0,r._)("div",du,[(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.searchQuery=t),class:"custom-input",placeholder:"搜索商品"},null,512),[[i.nr,e.searchQuery]]),(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.selectedCategory=e),id:"search_kind"},hu,512),[[i.bM,n.selectedCategory]]),(0,r._)("button",{onClick:t[2]||(t[2]=(...e)=>l.searchGoods&&l.searchGoods(...e)),style:{width:"130px"},class:"custom-button"},"搜索")])]),(0,r._)("table",pu,[mu,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.paginatedGoods,(e=>((0,r.wg)(),(0,r.iD)("tr",{key:e.goodid},[(0,r._)("td",null,(0,g.zw)(e.goodid),1),(0,r._)("td",null,(0,g.zw)(e.goodname),1),(0,r._)("td",null,(0,g.zw)(e.description),1),(0,r._)("td",null,(0,g.zw)(e.price),1),(0,r._)("td",null,[(0,r._)("div",_u,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.mediaFiles,((e,t)=>(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",{key:t},[l.isVideo(e)?(0,r.kq)("",!0):(0,r.wy)(((0,r.wg)(),(0,r.iD)("img",{key:0,src:e.url,alt:"商品图片"},null,8,wu)),[[i.F8,e.isActive]]),l.isVideo(e)?(0,r.wy)(((0,r.wg)(),(0,r.iD)("video",{key:1,src:e.url,controls:""},null,8,vu)),[[i.F8,e.isActive]]):(0,r.kq)("",!0)])),[[i.F8,e.isActive]]))),128))]),(0,r._)("div",yu,[(0,r._)("button",{onClick:t=>l.showPrevMedia(e)},"＜",8,bu),(0,r.Uk)("         "),(0,r._)("button",{onClick:t=>l.showNextMedia(e)},"＞",8,ku)])]),(0,r._)("td",null,(0,g.zw)(e.kind),1),(0,r._)("td",null,(0,g.zw)(e.subkind),1),(0,r._)("td",null,(0,g.zw)(e.createdate),1)])))),128))]),(0,r._)("div",fu,[(0,r._)("button",{onClick:t[3]||(t[3]=(...e)=>l.goToPrevPage&&l.goToPrevPage(...e)),class:"prev",disabled:1===n.currentPage},"上一页",8,Pu),(0,r._)("span",Au,"第 "+(0,g.zw)(n.currentPage)+" / "+(0,g.zw)(l.totalPages)+" 页",1),(0,r._)("button",{onClick:t[4]||(t[4]=(...e)=>l.goToNextPage&&l.goToNextPage(...e)),class:"next",disabled:n.currentPage===l.totalPages},"下一页",8,xu)])])])])):((0,r.wg)(),(0,r.iD)("div",Cu,[(0,r.Uk)(" 您还未登录，请先"),Uu]))}var Fu={data(){return{products:[],selectedGood:null,selectedCategory:"猫咪主粮",currentPage:1,pageSize:6,goods:[],filteredGoods:[],currentUser:null,isHistory:1}},created(){this.fetchUsrFromSession(),this.fetchgoodListSession()},computed:{isLoggedIn(){return!!this.currentUser},paginatedGoods(){const e=(this.currentPage-1)*this.pageSize,t=e+this.pageSize;return this.filteredGoods.slice(e,t)},totalPages(){return Math.ceil(this.filteredGoods.length/this.pageSize)}},async mounted(){console.log("ShowHistoryGoods 组件已挂载"),await this.fetchgoodListSession(),this.filteredGoods=this.goods,console.log("this.filteredGoods:",this.filteredGoods)},methods:{async fetchUsrFromSession(){try{const e=await D.Z.get("/now-usr"),t=e.data;return this.currentUser=t,!0}catch(e){return console.error("获取用户数据错误:",e),!1}},async fetchgoodListSession(){try{const e=await D.Z.get("/searchList"),t=e.data.data;return this.goods=t.map((e=>{const t=e.picture.trim(),s=t.split(","),i=s.map(((e,t)=>({url:e,isActive:0===t})));return{...e,mediaFiles:i,goodname:e.goodname.trim(),description:e.description.trim(),price:e.price,number:e.number,kind:e.kind,subkind:e.subkind,createdate:e.createdate}})),console.log("this.goods:",this.goods),!0}catch(e){return console.error("获取商品列表数据错误:",e),!1}},showPrevMedia(e){const t=e.mediaFiles.findIndex((e=>e.isActive));if(console.log("Current active index:",t),t>=0){const s=(t-1+e.mediaFiles.length)%e.mediaFiles.length;console.log("Previous index:",s),this.setActiveMedia(e,s)}},showNextMedia(e){const t=e.mediaFiles.findIndex((e=>e.isActive));if(console.log("Current active index:",t),t>=0){const s=(t+1)%e.mediaFiles.length;console.log("Next index:",s),this.setActiveMedia(e,s)}},isVideo(e){const t=e.url.endsWith(".mp4");return console.log(`Is media a video: ${t}`),t},searchGoods(){console.log("搜索已执行"),this.filteredGoods=this.goods.filter((e=>{const t=!this.searchQuery||e.goodname.toLowerCase().includes(this.searchQuery.toLowerCase()),s=!this.selectedCategory||e.kind===this.selectedCategory;return this.resetPage(),t&&s}))},goToPrevPage(){this.currentPage>1&&this.currentPage--},goToNextPage(){this.currentPage<this.totalPages&&this.currentPage++},resetPage(){this.currentPage=1},fetchProducts(){}},watch:{filteredGoods(e,t){e!==t&&this.resetPage()}}};const Iu=(0,l.Z)(Fu,[["render",Du],["__scopeId","data-v-5d4d8043"]]);var Ou=Iu;const Su=e=>((0,r.dD)("data-v-c2f5a0fe"),e=e(),(0,r.Cn)(),e),Mu={style:{margin:"0px"}},Bu={key:0},Tu={class:"left"},zu={class:"daohang"},qu=Su((()=>(0,r._)("img",{class:"head1",src:we,alt:""},null,-1))),Nu={class:"head2"},Vu={class:"head4"},Lu={class:"head4"},Qu={class:"head4"},Gu={class:"head5"},Ku={class:"right"},Ru=Su((()=>(0,r._)("div",{class:"centered-container"},[(0,r._)("h2",null,"搜索结果")],-1))),Zu={class:"centered-container"},Yu=Su((()=>(0,r._)("option",{value:"猫咪主粮"},"猫咪主粮",-1))),Hu=Su((()=>(0,r._)("option",{value:"猫咪零食"},"猫咪零食",-1))),Eu=Su((()=>(0,r._)("option",{value:"猫咪日用"},"猫咪日用",-1))),ju=[Yu,Hu,Eu],$u=Su((()=>(0,r._)("br",null,null,-1))),Wu=Su((()=>(0,r._)("br",null,null,-1))),Ju=Su((()=>(0,r._)("input",{type:"submit",value:"搜索",style:{width:"130px",cursor:"pointer"}},null,-1))),Xu=Su((()=>(0,r._)("div",{id:"search_list"},null,-1))),eg=Su((()=>(0,r._)("br",null,null,-1))),tg={class:"goods"},sg={class:"media-container"},ig=["src"],rg=["src"],og={class:"media-navigation"},ng=["onClick"],lg=["onClick"],ag={href:"/buyer-shop"},dg=Su((()=>(0,r._)("br",null,null,-1))),cg={class:"pagination"},ug=["disabled"],gg={id:"page-info"},hg=["disabled"],pg={key:1},mg={class:"else"},_g={class:"left"},wg={class:"daohang"},vg=Su((()=>(0,r._)("img",{class:"head1",src:we,alt:""},null,-1))),yg=Su((()=>(0,r._)("tr",null,[(0,r._)("td",{class:"head2"},"游客")],-1))),bg=Su((()=>(0,r._)("tr",null,[(0,r._)("td",{class:"head4"},[(0,r._)("h3",{class:"head4-1"},"其他功能后登录使用")])],-1))),kg={class:"head5"},fg={class:"right"},Pg=Su((()=>(0,r._)("div",{class:"centered-container"},[(0,r._)("h2",null,"搜索结果")],-1))),Ag={class:"centered-container"},xg=Su((()=>(0,r._)("option",{value:"猫咪主粮"},"猫咪主粮",-1))),Cg=Su((()=>(0,r._)("option",{value:"猫咪零食"},"猫咪零食",-1))),Ug=Su((()=>(0,r._)("option",{value:"猫咪日用"},"猫咪日用",-1))),Dg=[xg,Cg,Ug],Fg=Su((()=>(0,r._)("br",null,null,-1))),Ig=Su((()=>(0,r._)("br",null,null,-1))),Og=Su((()=>(0,r._)("input",{type:"submit",value:"搜索",style:{width:"130px",cursor:"pointer"}},null,-1))),Sg=Su((()=>(0,r._)("div",{id:"search_list"},null,-1))),Mg=Su((()=>(0,r._)("br",null,null,-1))),Bg={class:"goods"},Tg={class:"media-container"},zg=["src"],qg=["src"],Ng={class:"media-navigation"},Vg=["onClick"],Lg=["onClick"],Qg={href:"/buyer-shop"},Gg=Su((()=>(0,r._)("br",null,null,-1))),Kg={class:"pagination"},Rg=["disabled"],Zg={id:"page-info"},Yg=["disabled"];function Hg(e,t,s,o,n,l){const a=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("body",Mu,[l.isLoggedIn?((0,r.wg)(),(0,r.iD)("div",Bu,[(0,r._)("div",Tu,[(0,r._)("table",zu,[qu,(0,r._)("tr",null,[(0,r._)("td",Nu,(0,g.zw)(l.getUsername),1)]),(0,r._)("tr",null,[(0,r._)("td",Vu,[(0,r._)("h3",{onClick:t[0]||(t[0]=e=>l.navigateTo("BuyerCart")),class:"head4-1",style:{cursor:"pointer"}},"我的购物车")])]),(0,r._)("tr",null,[(0,r._)("td",Lu,[(0,r._)("h3",{onClick:t[1]||(t[1]=e=>l.navigateTo("BuyerLikes")),class:"head4-1",style:{cursor:"pointer"}},"我的收藏")])]),(0,r._)("tr",null,[(0,r._)("td",Qu,[(0,r._)("h3",{onClick:t[2]||(t[2]=e=>l.navigateTo("buyerHistory")),class:"head4-1",style:{cursor:"pointer"}},"历史购买记录")])]),(0,r._)("tr",null,[(0,r._)("td",Gu,[(0,r._)("button",{onClick:t[3]||(t[3]=(...e)=>l.handleLogout&&l.handleLogout(...e)),class:"head5-1",style:{cursor:"pointer"}},"退出登录")])])])]),(0,r._)("div",Ku,[Ru,(0,r.Wm)(a,{to:{name:"BuyerMain"}},{default:(0,r.w5)((()=>[(0,r.Uk)(" 返回 ")])),_:1}),(0,r._)("div",Zu,[(0,r._)("form",{onSubmit:t[6]||(t[6]=(0,i.iM)(((...e)=>l.handleSearch&&l.handleSearch(...e)),["prevent"]))},[(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>n.searchQuery=e),class:"custom-input",placeholder:"搜索商品"},null,512),[[i.nr,n.searchQuery]]),(0,r.Uk)("    "),(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>n.selectedCategory=e)},ju,512),[[i.bM,n.selectedCategory]]),$u,Wu,(0,r.Uk)("    "),Ju],32),Xu]),eg,(0,r._)("div",tg,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.paginatedItems,(e=>((0,r.wg)(),(0,r.iD)("div",{class:"show-1",key:e.id},[(0,r._)("div",sg,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.mediaFiles,((e,t)=>(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",{key:t},[e.isVideo?(0,r.kq)("",!0):(0,r.wy)(((0,r.wg)(),(0,r.iD)("img",{key:0,src:e.url,alt:"商品图片"},null,8,ig)),[[i.F8,e.isActive]]),e.isVideo?(0,r.wy)(((0,r.wg)(),(0,r.iD)("video",{key:1,src:e.url,controls:""},null,8,rg)),[[i.F8,e.isActive]]):(0,r.kq)("",!0)])),[[i.F8,e.isActive]]))),128))]),(0,r._)("div",og,[(0,r._)("button",{onClick:t=>l.showPrevMedia(e)},"＜",8,ng),(0,r.Uk)("         "),(0,r._)("button",{onClick:t=>l.showNextMedia(e)},"＞",8,lg)]),(0,r._)("a",ag,[(0,r._)("p",null,[(0,r.Uk)("商品名："+(0,g.zw)(e.name),1),dg,(0,r.Uk)("超值价："+(0,g.zw)(e.price)+"元",1)])])])))),128))]),(0,r._)("div",cg,[(0,r._)("button",{onClick:t[7]||(t[7]=(...e)=>l.goToPrevPage&&l.goToPrevPage(...e)),class:"prev",disabled:1===n.currentPage},"上一页",8,ug),(0,r._)("span",gg,"第 "+(0,g.zw)(n.currentPage)+" / "+(0,g.zw)(l.totalPages)+" 页",1),(0,r._)("button",{onClick:t[8]||(t[8]=(...e)=>l.goToNextPage&&l.goToNextPage(...e)),class:"next",disabled:n.currentPage===l.totalPages},"下一页",8,hg)])])])):((0,r.wg)(),(0,r.iD)("div",pg,[(0,r._)("div",mg,[(0,r._)("div",_g,[(0,r._)("table",wg,[vg,yg,bg,(0,r._)("tr",null,[(0,r._)("td",kg,[(0,r._)("button",{onClick:t[9]||(t[9]=(...e)=>l.handleLogout&&l.handleLogout(...e)),class:"head5-1",style:{cursor:"pointer"}},"返回登录")])])])]),(0,r._)("div",fg,[Pg,(0,r.Wm)(a,{to:{name:"BuyerMain"}},{default:(0,r.w5)((()=>[(0,r.Uk)(" 返回 ")])),_:1}),(0,r._)("div",Ag,[(0,r._)("form",{onSubmit:t[12]||(t[12]=(0,i.iM)(((...e)=>l.handleSearch&&l.handleSearch(...e)),["prevent"]))},[(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":t[10]||(t[10]=e=>n.searchQuery=e),class:"custom-input",placeholder:"搜索商品"},null,512),[[i.nr,n.searchQuery]]),(0,r.Uk)("    "),(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":t[11]||(t[11]=e=>n.selectedCategory=e)},Dg,512),[[i.bM,n.selectedCategory]]),Fg,Ig,(0,r.Uk)("    "),Og],32),Sg]),Mg,(0,r._)("div",Bg,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.paginatedItems,(e=>((0,r.wg)(),(0,r.iD)("div",{class:"show-1",key:e.id},[(0,r._)("div",Tg,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.mediaFiles,((e,t)=>(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",{key:t},[e.isVideo?(0,r.kq)("",!0):(0,r.wy)(((0,r.wg)(),(0,r.iD)("img",{key:0,src:e.url,alt:"商品图片"},null,8,zg)),[[i.F8,e.isActive]]),e.isVideo?(0,r.wy)(((0,r.wg)(),(0,r.iD)("video",{key:1,src:e.url,controls:""},null,8,qg)),[[i.F8,e.isActive]]):(0,r.kq)("",!0)])),[[i.F8,e.isActive]]))),128))]),(0,r._)("div",Ng,[(0,r._)("button",{onClick:t=>l.showPrevMedia(e)},"＜",8,Vg),(0,r.Uk)("         "),(0,r._)("button",{onClick:t=>l.showNextMedia(e)},"＞",8,Lg)]),(0,r._)("a",Qg,[(0,r._)("p",null,[(0,r.Uk)("商品名："+(0,g.zw)(e.name),1),Gg,(0,r.Uk)("超值价："+(0,g.zw)(e.price)+"元",1)])])])))),128))]),(0,r._)("div",Kg,[(0,r._)("button",{onClick:t[13]||(t[13]=(...e)=>l.goToPrevPage&&l.goToPrevPage(...e)),class:"prev",disabled:1===n.currentPage},"上一页",8,Rg),(0,r._)("span",Zg,"第 "+(0,g.zw)(n.currentPage)+" / "+(0,g.zw)(l.totalPages)+" 页",1),(0,r._)("button",{onClick:t[14]||(t[14]=(...e)=>l.goToNextPage&&l.goToNextPage(...e)),class:"next",disabled:n.currentPage===l.totalPages},"下一页",8,Yg)])])])]))])}var Eg={data(){return{items:[{id:1,name:"猫咪粮食",price:"99",description:"高营养猫粮",kind:"猫咪主粮",mediaFiles:[{url:s(7112),isActive:!0,isVideo:!1},{url:s(453),isActive:!1,isVideo:!1}]},{id:2,name:"猫咪玩具",price:"49",description:"好玩的猫咪玩具",kind:"猫咪日用",mediaFiles:[{url:s(453),isActive:!0,isVideo:!1},{url:s(7112),isActive:!1,isVideo:!1}]},{id:3,name:"猫咪窝",price:"299",description:"舒适的猫咪小窝",kind:"猫咪主粮",mediaFiles:[{url:s(7112),isActive:!0,isVideo:!1},{url:s(453),isActive:!1,isVideo:!1}]}],searchQuery:"",selectedCategory:"猫咪主粮",filteredItems:[],currentPage:1,itemsPerPage:2,search:{keyword:"",kind:"猫咪主粮"},currentUser:null}},created(){this.fetchUsrFromSession()},computed:{isLoggedIn(){return!!this.currentUser},isSeller(){return this.currentUser&&1===this.currentUser.power},isBuyer(){return this.currentUser&&0===this.currentUser.power},getUsername(){return this.currentUser?this.currentUser.username:"未登录"},paginatedItems(){const e=(this.currentPage-1)*this.itemsPerPage,t=this.currentPage*this.itemsPerPage;return this.filteredItems.slice(e,t)},totalPages(){return Math.ceil(this.filteredItems.length/this.itemsPerPage)}},methods:{async fetchUsrFromSession(){try{const e=await D.Z.get("/now-usr"),t=e.data;return this.currentUser=t,!0}catch(e){return console.error("获取用户数据错误:",e),!1}},async handleLogout(){try{await D.Z.get("/logout-control"),this.$router.push("/")}catch(e){console.error("登出失败:",e)}},navigateTo(e){this.$router.push({name:e})},beforeMount(){this.isLoggedIn||this.$router.push("/")},handleSearch(){this.filteredItems=this.items.filter((e=>{const t=!this.searchQuery||e.name.toLowerCase().includes(this.searchQuery.toLowerCase()),s=!this.selectedCategory||e.kind===this.selectedCategory;return console.log(`Item: ${e.name}, Keyword Match: ${t}, Category Match: ${s}`),t&&s})),console.log("Filtered items count:",this.filteredItems.length)},showPrevMedia(e){const t=e.mediaFiles.findIndex((e=>e.isActive));if(console.log("Current active index:",t),t>=0){const s=(t-1+e.mediaFiles.length)%e.mediaFiles.length;console.log("Previous index:",s),this.setActiveMedia(e,s)}},showNextMedia(e){const t=e.mediaFiles.findIndex((e=>e.isActive));if(console.log("Current active index:",t),t>=0){const s=(t+1)%e.mediaFiles.length;console.log("Next index:",s),this.setActiveMedia(e,s)}},setActiveMedia(e,t){e.mediaFiles.forEach(((e,s)=>{e.isActive=s===t,console.log(`Media at index ${s} active status: `,e.isActive)}))},goToPrevPage(){this.currentPage>1&&(this.currentPage--,console.log("Current page after prev:",this.currentPage))},goToNextPage(){this.currentPage<this.totalPages&&(this.currentPage++,console.log("Current page after next:",this.currentPage))},resetPage(){this.currentPage=1}},watch:{filteredItems(e,t){e!==t&&this.resetPage()}},mounted(){this.filteredItems=this.items}};const jg=(0,l.Z)(Eg,[["render",Hg],["__scopeId","data-v-c2f5a0fe"]]);var $g=jg;const Wg=e=>((0,r.dD)("data-v-96ee6556"),e=e(),(0,r.Cn)(),e),Jg={key:0},Xg={class:"main"},eh=Wg((()=>(0,r._)("h1",null,"请发布商品",-1))),th={class:"container"},sh={class:"left-div",style:{height:"300px"}},ih={id:"preview"},rh={key:0},oh=["src"],nh=["src"],lh=["onClick"],ah={key:1},dh=Wg((()=>(0,r._)("br",null,null,-1))),ch=["disabled"],uh={class:"right-div"},gh={class:"form-group"},hh=Wg((()=>(0,r._)("label",{for:"kind"},"商品大类：",-1))),ph=["value"],mh=Wg((()=>(0,r._)("br",null,null,-1))),_h=Wg((()=>(0,r._)("br",null,null,-1))),wh={class:"form-group"},vh=Wg((()=>(0,r._)("label",{for:"subkind"},"商品子类：",-1))),yh=["value"],bh=Wg((()=>(0,r._)("br",null,null,-1))),kh=Wg((()=>(0,r._)("br",null,null,-1))),fh={class:"form-group"},Ph=Wg((()=>(0,r._)("label",{for:"goodName"},"商品名称：",-1))),Ah=Wg((()=>(0,r._)("br",null,null,-1))),xh=Wg((()=>(0,r._)("br",null,null,-1))),Ch={key:0,class:"error"},Uh={class:"form-group"},Dh=Wg((()=>(0,r._)("label",{for:"price"},"商品价格：",-1))),Fh=Wg((()=>(0,r._)("br",null,null,-1))),Ih=Wg((()=>(0,r._)("br",null,null,-1))),Oh={key:0,class:"error"},Sh={class:"form-group"},Mh=Wg((()=>(0,r._)("label",{for:"stock"},"商品库存：",-1))),Bh=Wg((()=>(0,r._)("br",null,null,-1))),Th=Wg((()=>(0,r._)("br",null,null,-1))),zh={key:0,class:"error"},qh={class:"form-group"},Nh=Wg((()=>(0,r._)("label",{for:"description"},"商品描述：",-1))),Vh=Wg((()=>(0,r._)("br",null,null,-1))),Lh=Wg((()=>(0,r._)("br",null,null,-1))),Qh={key:0,class:"error"},Gh=Wg((()=>(0,r._)("div",{class:"form-group"},[(0,r._)("button",{type:"submit",class:"submit-button-container"},"确认发布")],-1))),Kh={key:1,class:"else"},Rh=Wg((()=>(0,r._)("a",{href:"login"},"登录",-1)));function Zh(e,t,s,o,n,l){return n.isLoggedIn?((0,r.wg)(),(0,r.iD)("div",Jg,[(0,r._)("div",Xg,[eh,(0,r._)("form",{onSubmit:t[12]||(t[12]=(0,i.iM)(((...e)=>l.submitForm&&l.submitForm(...e)),["prevent"]))},[(0,r._)("div",th,[(0,r._)("div",sh,[(0,r._)("button",{type:"button",onClick:t[0]||(t[0]=(...e)=>l.goBack&&l.goBack(...e))},"返回"),(0,r._)("div",ih,[n.selectedFiles.length>0?((0,r.wg)(),(0,r.iD)("div",rh,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.selectedFiles,((e,t)=>(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",{key:t},[l.isImage(e)?((0,r.wg)(),(0,r.iD)("img",{key:0,src:l.getURL(e),alt:"预览图"},null,8,oh)):((0,r.wg)(),(0,r.iD)("video",{key:1,controls:"",src:l.getURL(e)},null,8,nh)),(0,r._)("button",{onClick:e=>l.removeFile(t)},"X",8,lh)])),[[i.F8,t===n.currentPreviewIndex]]))),128))])):((0,r.wg)(),(0,r.iD)("div",ah," 没有选择文件 "))]),(0,r._)("button",{type:"button",onClick:t[1]||(t[1]=(...e)=>l.prevImage&&l.prevImage(...e))},"＜"),(0,r.Uk)("  "),(0,r._)("button",{type:"button",onClick:t[2]||(t[2]=(...e)=>l.nextImage&&l.nextImage(...e))},"＞"),dh,(0,r._)("input",{type:"file",disabled:l.isFileInputDisabled,ref:"fileInput",onChange:t[3]||(t[3]=(...e)=>l.handleFileChange&&l.handleFileChange(...e)),accept:"image/png, image/jpeg, video/mp4",multiple:"",style:{display:"none"}},null,40,ch),(0,r._)("button",{type:"button",onClick:t[4]||(t[4]=(...e)=>l.triggerFileInput&&l.triggerFileInput(...e))},"上传图片/视频")]),(0,r._)("div",uh,[(0,r._)("div",gh,[hh,(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>n.selectedKind=e),onChange:t[6]||(t[6]=(...e)=>l.updateSubcategories&&l.updateSubcategories(...e))},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.kinds,(e=>((0,r.wg)(),(0,r.iD)("option",{key:e.value,value:e.value},(0,g.zw)(e.text),9,ph)))),128))],544),[[i.bM,n.selectedKind]]),mh,_h]),(0,r._)("div",wh,[vh,(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>n.selectedSubkind=e)},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.subkinds,(e=>((0,r.wg)(),(0,r.iD)("option",{key:e,value:e},(0,g.zw)(e),9,yh)))),128))],512),[[i.bM,n.selectedSubkind]]),bh,kh]),(0,r._)("div",fh,[Ph,(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":t[8]||(t[8]=e=>n.goodName=e),placeholder:"请输入商品名称",required:""},null,512),[[i.nr,n.goodName]]),Ah,xh,n.errors.goodName?((0,r.wg)(),(0,r.iD)("span",Ch,(0,g.zw)(n.errors.goodName),1)):(0,r.kq)("",!0)]),(0,r._)("div",Uh,[Dh,(0,r.wy)((0,r._)("input",{type:"number","onUpdate:modelValue":t[9]||(t[9]=e=>n.price=e),placeholder:"请输入商品价格",required:""},null,512),[[i.nr,n.price]]),Fh,Ih,n.errors.price?((0,r.wg)(),(0,r.iD)("span",Oh,(0,g.zw)(n.errors.price),1)):(0,r.kq)("",!0)]),(0,r._)("div",Sh,[Mh,(0,r.wy)((0,r._)("input",{type:"number","onUpdate:modelValue":t[10]||(t[10]=e=>n.stock=e),placeholder:"请输入商品库存",required:""},null,512),[[i.nr,n.stock]]),Bh,Th,n.errors.stock?((0,r.wg)(),(0,r.iD)("span",zh,(0,g.zw)(n.errors.stock),1)):(0,r.kq)("",!0)]),(0,r._)("div",qh,[Nh,(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":t[11]||(t[11]=e=>n.description=e),placeholder:"请输入商品描述",required:""},null,512),[[i.nr,n.description]]),Vh,Lh,n.errors.description?((0,r.wg)(),(0,r.iD)("span",Qh,(0,g.zw)(n.errors.description),1)):(0,r.kq)("",!0)]),Gh])])],32)])])):((0,r.wg)(),(0,r.iD)("div",Kh,[(0,r.Uk)(" 您还未登录，请先"),Rh]))}var Yh={data(){return{products:[],isLoggedIn:!0,goodName:"",price:"",stock:"",description:"",selectedFiles:[],selectedKind:"猫咪主粮",selectedSubkind:"",currentPreviewIndex:0,kinds:[{value:"猫咪主粮",text:"猫咪主粮"},{value:"猫咪零食",text:"猫咪零食"},{value:"猫咪日用",text:"猫咪日用"}],subkinds:[],errors:{goodName:null,price:null,stock:null,description:null},currentUser:null}},methods:{updateSubcategories(){"猫咪主粮"===this.selectedKind?this.subkinds=["猫干粮","猫湿粮"]:"猫咪零食"===this.selectedKind?this.subkinds=["饼干","罐头","猫条"]:"猫咪日用"===this.selectedKind&&(this.subkinds=["猫砂盆","猫小窝","猫沙发","清洁除味"]),this.subkinds.length>0?this.selectedSubkind=this.subkinds[0]:this.selectedSubkind=""},async submitForm(){if(this.goodName.length>20)return void alert("商品名称不能超过20个字符");if(isNaN(this.price))return void alert("价格需要输入数字");if(isNaN(this.stock))return void(this.errors.stock="库存需要输入数字");if(this.description.length>100)return void alert("商品描述不能超过100个字符");if(0===this.selectedFiles.length)return void alert("请上传至少一个文件");const e=new FormData;e.append("goodname",this.goodName),e.append("price",this.price),e.append("number",this.stock),e.append("description",this.description),e.append("kind",this.selectedKind),e.append("subkind",this.selectedSubkind),this.selectedFiles.forEach((t=>{e.append("mediaFiles",t)}));const t=await fetch("/good/upload-good",{method:"POST",body:e});this.selectedFiles=[];const s=await t.json();"/error"===s.page?this.$router.push({path:"/error",query:{err:s.msg,to:s.data}}):"/success"===s.page?this.$router.push({path:"/success",query:{message:s.msg,to:s.data}}):null===s.page?console.log("未知页面类型"):this.$router.push({path:s.page})},isImage(e){return e&&e.type&&e.type.startsWith("image/")},getURL(e){return URL.createObjectURL(e)},handleFileChange(e){const t=Array.from(e.target.files),s=["image/png","image/jpeg","video/mp4"],i=t.filter((e=>s.includes(e.type)));if(console.log(i),i.length<t.length)return void alert("不支持的文件格式。请上传png、jpg或mp4格式的文件。");const r=3-this.selectedFiles.length,o=i.slice(0,r),n=3,l=10485760;if(t.length>n)return void alert(`您只能上传最多 ${n} 个文件。`);const a=t.some((e=>e.size>l));a?alert("所有文件必须小于10MB，请重新选择文件。"):this.selectedFiles.length+o.length>3?alert("最多只能上传3个文件。"):(this.selectedFiles=[...this.selectedFiles,...i],3===this.selectedFiles.length?e.target.disabled=!0:(e.target.disabled=!1,e.target.value=""),this.$refs.fileInput&&(this.$refs.fileInput.value=""),this.selectedFiles.length<3&&(e.target.disabled=!1))},goBack(){this.$router.go(-1)},removeFile(e){URL.revokeObjectURL(this.selectedFiles[e]),this.selectedFiles.splice(e,1),this.selectedFiles.length<3&&this.$refs.fileInput&&(this.$refs.fileInput.disabled=!1),this.$refs.fileInput&&(this.$refs.fileInput.value="")},triggerFileInput(){this.$refs.fileInput?this.$refs.fileInput.click():console.error("未找到文件输入框。")},prevImage(){this.selectedFiles.length>0&&(this.currentPreviewIndex=(this.currentPreviewIndex-1+this.selectedFiles.length)%this.selectedFiles.length)},nextImage(){this.selectedFiles.length>0&&(this.currentPreviewIndex=(this.currentPreviewIndex+1)%this.selectedFiles.length)}},mounted(){this.updateSubcategories()},computed:{currentFile(){return this.selectedFiles[this.currentPreviewIndex]},isFileInputDisabled(){return this.selectedFiles.length>=3}}};const Hh=(0,l.Z)(Yh,[["render",Zh],["__scopeId","data-v-96ee6556"]]);var Eh=Hh;const jh=[{path:"/",component:O},{path:"/login",component:O},{path:"/error",component:Pc},{path:"/register",component:re},{path:"/choose-register",component:_e},{path:"/buyer",name:"BuyerMain",component:Nt},{path:"/seller",name:"SellerMain",component:ls,redirect:{name:"ShowGoods"},children:[{path:"ShowGoods",name:"ShowGoods",component:Pi},{path:"ShowSearchGoods",name:"ShowSearchGoods",component:su},{path:"update-password",name:"UpdatePassword",component:Ss},{path:"upload-onegood",name:"UploadOneGood",component:Eh},{path:"show-userinfo",name:"ShowUserInfo",component:Gi},{path:"user-order-history",name:"UserOrderHistory",component:nn},{path:"show-historygoods",name:"ShowHistoryGoods",component:_r},{path:"show-searchhistorygoods",name:"ShowSearchHistoryGoods",component:Ou},{path:"show-allusers",name:"ShowAllUsers",component:Mr},{path:"upload-multiplegoods",name:"UploadMultipleGoods",component:bo}]},{path:"/forgot-password",name:"ForgotPasswordComponent",component:Bo},{path:"/guest",name:"GuestComponent",component:Qo},{path:"/success",name:"Success",component:pn,props:!0},{path:"/secret-question",name:"SecretQuestion",component:Un},{path:"/buyer-history",name:"buyerHistory",component:il},{path:"/buyer-search",name:"buyerSearch",component:$g},{path:"/likes",name:"BuyerLikes",component:Gl},{path:"/cart",name:"BuyerCart",component:Va},{path:"/buyer-fill-info",name:"BuyerFillInfo",component:vd},{path:"/buyer-shop",name:"BuyerShop",component:_c}],$h=(0,u.p7)({history:(0,u.r5)(),routes:jh});var Wh=$h,Jh=(0,sn.MT)({state:{admin:null},getters:{isLoggedIn:e=>!!e.admin,isSeller:e=>e.admin&&1===e.admin.power,isBuyer:e=>e.admin&&0===e.admin.power},mutations:{setAdmin(e,t){e.admin=t,e.isLoggedIn=!0,localStorage.setItem("admin",JSON.stringify(t))},clearAdmin(e){e.admin=null,localStorage.removeItem("admin")}},actions:{login({commit:e},t){console.log("Login action triggered",t);const s="seller",i="buyer",r="123";t.username===s&&t.password===r?(e("setAdmin",{username:s,power:1}),console.log("Admin set to seller")):t.username===i&&t.password===r?(e("setAdmin",{username:i,power:0}),console.log("Admin set to buyer")):console.log("Invalid credentials")},logout({commit:e}){e("clearAdmin")}}});const Xh=(0,i.ri)(c),ep=localStorage.getItem("admin");ep&&Jh.commit("setAdmin",JSON.parse(ep)),Xh.use(Wh),Xh.use(Jh),Xh.mount("#app")},7112:function(e,t,s){e.exports=s.p+"img/food-1.jpg"},453:function(e,t,s){e.exports=s.p+"img/food-2.jpg"},6129:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAA6CAMAAADx2BEqAAAA2FBMVEX9pmf///8AAAD/+vf+xp7+vY7/9u//7+T/8Ob//fv+07T+6Nf9pmf9pmb9pmf5pGb9pmj9q2/+3MT///7//v3//Pr/+fX+38j/+/jtpFv9p2f8pmf+v5P9sHj+wpb/69z+2r/9uIf/8un9s37//fz/9/H+1Lb+z63+xZ39tYD+59b/6tr+5ND/8OX/+PT/9e7+yKH+3sf/pmb+4cv/9Oz+0bD+5dL+1rr+1bj+59T+yKD+yqX+zKf+4c3+zar+xZv+4Mr9u4v/7N/+w5j+2Lz9uoj+v5H/7+Oq/kPNAAAASHRSTlP//wD////////////9zO0tm///////////Dotc/////////////////////////////zz///////////////////////////+1ri3VAAADwklEQVR4nO2d13biMBBAPYHQiytlaQk1QAiQQnrZ/v9/tCM35LLJPuzitTT3IUHCnKNzdJFHwhopRz7tjlqtVRRCaCq1qtpp73vdF6CuUt9LQ0WthwX4lHSbiMPyKSBAvZp0e4hDU3UGAVuAy1rSrSEOT+3SE6BO/S8lNTYGMAFo/JeUqiMAxX/SgpGgclRPuhVEctRRADXpRhDJoR4pbcnWf3pa0i34n6i0lU7SbfinaA+9YMW0sSADODqK2HeArTns8+UbC8xt+CLta9bnGMu91325e6iWJoSqCD0H3GQAGjO+5tkAaxq66jgHPmUsZ/FTHoWDtTUZqorYi0Az7EvrhKuY5wEmgUFBbgFqiuAx4GYCYDa52/5jA2AQvAYFaDw3kbLpCZBjxea5JbwAgnc/0l+jAedchW7dhwJDFCDH7v1KqegJ4PS7/4JIMd1rWHexa2PR2RUkgNh0l13WtSSAzNxcZFxaBpgtr5Cx40MSQFjm0Wk8i/Ds3t5DAoiKthg/hwI+EkAmdBOMwo9gHQkgEb2FEV4JJAGkQtMx+i/q/M8/JIBcTHFZ17zlKsIClPL5lQXWKo8MDZjgv8IYMqzovSgduM3E3+Tlwgj8ABwWQI9fIIgsFhBpJbudvxcDkABy4K8E8QtBuVf7PYoBJCB2LTiTtd8jAYTm1P5LAsjKcW59y68G0jRQMmYWZB648h8IsGmRAOJwBbD6YCEIq67tG4UrgPuPBBABbQXGG18RI4D/jXd7/sSAexJAEM4a0HriK2IEmBbdpwRdAXDQcKb+JED6wW+zM7x7xAiwBbiyX7gCDKDorP6SAOlnAMA/ERorwMD7tcAR4PMaMmckgBj0J9632SMqAE4C3HmCI8BTyxs0SIDUczcOd3dUAOz24YgT4M1wJwEkQPpZRnaBRAXAa9y7BEaDZWU09AcNEiDtdCdg4IO//N6vyC99OE+wZkr/S365w01D92wY8AzBRSTxBRB6b9CtCQ2M594VYAfsDoCRH8O6GeHmwR3eO5r648vQ2SsoMhWxN4fiHIAtA54u7Ad84ig9tmB8h5cWsPuNi28samDOlB0/TH5jqYjUhN4ePlpY7gz/92g7M++EgA7ffxosInCeEzGWgYdJBKQqeIII7Sm0FTzmkpNNoDxvso/Mz1h6iMASkpCogqeIIT6gI12SKIIHk0RRmjiZwTRxlChSZliiSEoVKy92qlhKFi0tbrJoShcvKX66eDowQkr2B0bQkTEywh8ZQ4dGyUfw0Cg6Nk4uYo6No4MjJSF8cOQvbKw8lNEyy/cAAAAASUVORK5CYII="}},t={};function s(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,s),o.exports}s.m=e,function(){var e=[];s.O=function(t,i,r,o){if(!i){var n=1/0;for(c=0;c<e.length;c++){i=e[c][0],r=e[c][1],o=e[c][2];for(var l=!0,a=0;a<i.length;a++)(!1&o||n>=o)&&Object.keys(s.O).every((function(e){return s.O[e](i[a])}))?i.splice(a--,1):(l=!1,o<n&&(n=o));if(l){e.splice(c--,1);var d=r();void 0!==d&&(t=d)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[i,r,o]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.p="/"}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,i){var r,o,n=i[0],l=i[1],a=i[2],d=0;if(n.some((function(t){return 0!==e[t]}))){for(r in l)s.o(l,r)&&(s.m[r]=l[r]);if(a)var c=a(s)}for(t&&t(i);d<n.length;d++)o=n[d],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(c)},i=self["webpackChunkmaoliang_project"]=self["webpackChunkmaoliang_project"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=s.O(void 0,[998],(function(){return s(6203)}));i=s.O(i)})();
//# sourceMappingURL=app.js.map